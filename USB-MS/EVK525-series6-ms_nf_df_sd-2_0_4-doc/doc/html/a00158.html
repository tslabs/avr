<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>ATMEL: nf.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.3 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>nf.h</h1><a href="a00057.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*This file is prepared for Doxygen automatic documentation generation.*/</span>
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="comment">/* Copyright (c) 2009 Atmel Corporation. All rights reserved.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00017"></a>00017 <span class="comment"> * modification, are permitted provided that the following conditions are met:</span>
<a name="l00018"></a>00018 <span class="comment"> *</span>
<a name="l00019"></a>00019 <span class="comment"> * 1. Redistributions of source code must retain the above copyright notice,</span>
<a name="l00020"></a>00020 <span class="comment"> * this list of conditions and the following disclaimer.</span>
<a name="l00021"></a>00021 <span class="comment"> *</span>
<a name="l00022"></a>00022 <span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright notice,</span>
<a name="l00023"></a>00023 <span class="comment"> * this list of conditions and the following disclaimer in the documentation</span>
<a name="l00024"></a>00024 <span class="comment"> * and/or other materials provided with the distribution.</span>
<a name="l00025"></a>00025 <span class="comment"> *</span>
<a name="l00026"></a>00026 <span class="comment"> * 3. The name of Atmel may not be used to endorse or promote products derived</span>
<a name="l00027"></a>00027 <span class="comment"> * from this software without specific prior written permission.</span>
<a name="l00028"></a>00028 <span class="comment"> *</span>
<a name="l00029"></a>00029 <span class="comment"> * 4. This software may only be redistributed and used in connection with an Atmel</span>
<a name="l00030"></a>00030 <span class="comment"> * AVR product.</span>
<a name="l00031"></a>00031 <span class="comment"> *</span>
<a name="l00032"></a>00032 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED</span>
<a name="l00033"></a>00033 <span class="comment"> * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF</span>
<a name="l00034"></a>00034 <span class="comment"> * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE EXPRESSLY AND</span>
<a name="l00035"></a>00035 <span class="comment"> * SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR ANY DIRECT,</span>
<a name="l00036"></a>00036 <span class="comment"> * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span>
<a name="l00037"></a>00037 <span class="comment"> * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;</span>
<a name="l00038"></a>00038 <span class="comment"> * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND</span>
<a name="l00039"></a>00039 <span class="comment"> * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<a name="l00040"></a>00040 <span class="comment"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF</span>
<a name="l00041"></a>00041 <span class="comment"> * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00042"></a>00042 <span class="comment"> */</span>
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="preprocessor">#ifndef _NF_H_</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span><span class="preprocessor">#define _NF_H_</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span>
<a name="l00047"></a>00047 <span class="comment">// ooo ooo                            o</span>
<a name="l00048"></a>00048 <span class="comment">//  o   o</span>
<a name="l00049"></a>00049 <span class="comment">//  o   o</span>
<a name="l00050"></a>00050 <span class="comment">//  o   o   oooo   ooo oo  oo oo    ooo    oo oo    oooooo</span>
<a name="l00051"></a>00051 <span class="comment">//  o o o       o    oo  o  oo  o     o     oo  o  o    o</span>
<a name="l00052"></a>00052 <span class="comment">//  o o o   ooooo    o      o   o     o     o   o  o    o</span>
<a name="l00053"></a>00053 <span class="comment">//  o o o  o    o    o      o   o     o     o   o  o    o</span>
<a name="l00054"></a>00054 <span class="comment">//   o o   o    o    o      o   o     o     o   o   ooooo</span>
<a name="l00055"></a>00055 <span class="comment">//   o o    oooo o ooooo   ooo ooo  ooooo  ooo ooo      o</span>
<a name="l00056"></a>00056 <span class="comment">//                                                      o</span>
<a name="l00057"></a>00057 <span class="comment">//                                                  oooo</span>
<a name="l00058"></a>00058 <span class="comment">//</span>
<a name="l00059"></a>00059 <span class="comment">// Please note that auto-detect mode (NF_AUTO_DETECT_2KB=TRUE or</span>
<a name="l00060"></a>00060 <span class="comment">// NF_AUTO_DETECT_512B=TRUE) may give different performances</span>
<a name="l00061"></a>00061 <span class="comment">// than static compilation (#define NF_TYPE_...)</span>
<a name="l00062"></a>00062 <span class="comment">//</span>
<a name="l00063"></a>00063 
<a name="l00065"></a><a class="code" href="a00057.html#d4377dd47f49ba91ea18a5362f847dad">00065</a> <span class="preprocessor">#define  M_ID_MICRON       0x2C</span>
<a name="l00066"></a><a class="code" href="a00057.html#a82c3e36f0835c032af78a591bbfe150">00066</a> <span class="preprocessor"></span><span class="preprocessor">#define  M_ID_HYNIX        0xAD</span>
<a name="l00067"></a><a class="code" href="a00057.html#e9258f6dea31191cd6dd1c0fccfe4de9">00067</a> <span class="preprocessor"></span><span class="preprocessor">#define  M_ID_SANDISK      0x98</span>
<a name="l00068"></a><a class="code" href="a00057.html#f082ccb4adbf63acbee6df30b9627c97">00068</a> <span class="preprocessor"></span><span class="preprocessor">#define  M_ID_ST           0x20</span>
<a name="l00069"></a><a class="code" href="a00057.html#c1bb8b913648638173f315393b7c6ed4">00069</a> <span class="preprocessor"></span><span class="preprocessor">#define  M_ID_TOSHIBA      0x98</span>
<a name="l00070"></a><a class="code" href="a00057.html#01fff9aa20831992d3504bda2a3dbad8">00070</a> <span class="preprocessor"></span><span class="preprocessor">#define  M_ID_TOSHIBA96    0x96</span>
<a name="l00071"></a><a class="code" href="a00057.html#f85159924084d9e073f6c2bb461dafb0">00071</a> <span class="preprocessor"></span><span class="preprocessor">#define  M_ID_SAMSUNG      0xEC</span>
<a name="l00072"></a><a class="code" href="a00057.html#b40cfc4ef76f2d5249603b7005889b64">00072</a> <span class="preprocessor"></span><span class="preprocessor">#define  M_ID_INFINEON     0xC1</span>
<a name="l00073"></a>00073 <span class="preprocessor"></span>
<a name="l00074"></a>00074 <span class="comment">// Structs used in generic mode</span>
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 <span class="comment">// Device Indentifiant</span>
<a name="l00077"></a><a class="code" href="a00025.html">00077</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00078"></a><a class="code" href="a00025.html#107471962528ce1b140f8d9a691bb1ec">00078</a>    <a class="code" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  manuf;
<a name="l00079"></a><a class="code" href="a00025.html#66ba51829d480845ee8ce0c4831ed0ad">00079</a>    <a class="code" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  dev;
<a name="l00080"></a><a class="code" href="a00025.html#29914bfbb66c667ad11daace4a70e28e">00080</a>    <a class="code" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  conf;
<a name="l00081"></a>00081 } <a class="code" href="a00025.html">St_nf_id</a>;
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 <span class="comment">// Table to link Device Indentifiant and Number of block</span>
<a name="l00084"></a><a class="code" href="a00026.html">00084</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00085"></a><a class="code" href="a00026.html#349f202fc7b8c04d48252aeb383c8bd0">00085</a>    <a class="code" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  dev_id;
<a name="l00086"></a><a class="code" href="a00026.html#983529fa93766ff18f62aa028f07a778">00086</a>    <a class="code" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  nb_zones;     <span class="comment">// zone = 1024 blocks</span>
<a name="l00087"></a>00087 }<a class="code" href="a00026.html">St_nf_link_id_block</a>;
<a name="l00088"></a>00088 
<a name="l00089"></a>00089 <span class="comment">// Device Configuration</span>
<a name="l00090"></a><a class="code" href="a00024.html">00090</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00091"></a><a class="code" href="a00024.html#5bd39ae24f25320ef2e649ee9bfbca0c">00091</a>    <a class="code" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  copy_back_cont   :4;
<a name="l00092"></a><a class="code" href="a00024.html#133767ff27f513dc1d500d75edeab3df">00092</a>    <a class="code" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  copy_back_discont:4;
<a name="l00093"></a><a class="code" href="a00024.html#51b70a77855907a1e141a420d9b0963d">00093</a>    <a class="code" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  cache_program    :1;
<a name="l00094"></a><a class="code" href="a00024.html#34e8492df4646cf29aa5b4e1b57fb266">00094</a>    <a class="code" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  ce_toggle        :1;
<a name="l00095"></a>00095 } <a class="code" href="a00024.html">St_nf_conf</a>;
<a name="l00096"></a>00096 
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 <span class="comment">//-- Pre Check configuration</span>
<a name="l00099"></a>00099 <span class="comment">//</span>
<a name="l00100"></a>00100 <span class="preprocessor">#define NF_BAD_CONFIG            FALSE</span>
<a name="l00101"></a><a class="code" href="a00057.html#aebfff2899a85bcd535e442723f0abda">00101</a> <span class="preprocessor"></span><span class="preprocessor">#define NF_GENERIC_DRIVER        FALSE // the configuration TRUE, it is not available</span>
<a name="l00102"></a><a class="code" href="a00057.html#a85df997eb2d3c6ade9bedd30d51fdc9">00102</a> <span class="preprocessor"></span><span class="preprocessor">#define NF_SHIFT_SECTOR_BYTE     9     // (1&lt;&lt;n) size of sector, unit in bytes (other value not supported)</span>
<a name="l00103"></a>00103 <span class="preprocessor"></span><span class="preprocessor">#if (!defined NF_AUTO_DETECT_2KB)</span>
<a name="l00104"></a><a class="code" href="a00057.html#742004b56af3e64f4b62c2bd22acb746">00104</a> <span class="preprocessor"></span><span class="preprocessor">#  define   NF_AUTO_DETECT_2KB   FALSE</span>
<a name="l00105"></a>00105 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00106"></a>00106 <span class="preprocessor"></span><span class="preprocessor">#if (!defined NF_AUTO_DETECT_512B)</span>
<a name="l00107"></a><a class="code" href="a00057.html#fe9b5c2ff27af44dd537387394d779ef">00107</a> <span class="preprocessor"></span><span class="preprocessor">#  define   NF_AUTO_DETECT_512B  FALSE</span>
<a name="l00108"></a>00108 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00109"></a>00109 <span class="preprocessor"></span><span class="preprocessor">#if (NF_AUTO_DETECT_2KB==TRUE) &amp;&amp; (NF_AUTO_DETECT_512B==TRUE)</span>
<a name="l00110"></a>00110 <span class="preprocessor"></span><span class="preprocessor">#  undef  NF_BAD_CONFIG</span>
<a name="l00111"></a>00111 <span class="preprocessor"></span><span class="preprocessor">#  define NF_BAD_CONFIG (TRUE)</span>
<a name="l00112"></a>00112 <span class="preprocessor"></span><span class="preprocessor">#  error NF_AUTO_DETECT_2KB and NF_AUTO_DETECT_512B can not be activated at the same time.</span>
<a name="l00113"></a>00113 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00114"></a>00114 <span class="preprocessor"></span>
<a name="l00115"></a>00115 <span class="preprocessor">#include "<a class="code" href="a00059.html">nf_512B.h</a>"</span>
<a name="l00116"></a>00116 <span class="preprocessor">#include "<a class="code" href="a00058.html">nf_2KB.h</a>"</span>
<a name="l00117"></a>00117 
<a name="l00118"></a>00118 <span class="comment">//-- Final Check configuration</span>
<a name="l00119"></a>00119 <span class="comment">//</span>
<a name="l00120"></a>00120 <span class="preprocessor">#if (NF_AUTO_DETECT_2KB==TRUE) &amp;&amp; (NF_TYPE_512B_KNOWN==TRUE)</span>
<a name="l00121"></a>00121 <span class="preprocessor"></span><span class="preprocessor">#  undef  NF_BAD_CONFIG</span>
<a name="l00122"></a>00122 <span class="preprocessor"></span><span class="preprocessor">#  define NF_BAD_CONFIG (TRUE)</span>
<a name="l00123"></a>00123 <span class="preprocessor"></span><span class="preprocessor">#  error NF_AUTO_DETECT_2KB and NF_TYPE_x 512B can not be activated at the same time.</span>
<a name="l00124"></a>00124 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00125"></a>00125 <span class="preprocessor"></span><span class="preprocessor">#if (NF_AUTO_DETECT_512B==TRUE) &amp;&amp; (NF_TYPE_2KB_KNOWN==TRUE)</span>
<a name="l00126"></a>00126 <span class="preprocessor"></span><span class="preprocessor">#  undef  NF_BAD_CONFIG</span>
<a name="l00127"></a>00127 <span class="preprocessor"></span><span class="preprocessor">#  define NF_BAD_CONFIG (TRUE)</span>
<a name="l00128"></a>00128 <span class="preprocessor"></span><span class="preprocessor">#  error NF_AUTO_DETECT_512B and NF_TYPE_x 2KB can not be activated at the same time.</span>
<a name="l00129"></a>00129 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00130"></a>00130 <span class="preprocessor"></span><span class="preprocessor">#if (NF_AUTO_DETECT_2KB==FALSE) &amp;&amp; (NF_AUTO_DETECT_512B==FALSE)</span>
<a name="l00131"></a><a class="code" href="a00057.html#1b8449faa1584ab8c10aae31e2d460f8">00131</a> <span class="preprocessor"></span><span class="preprocessor">#  define NF_DETECTION_ID  (DISABLE)</span>
<a name="l00132"></a>00132 <span class="preprocessor"></span><span class="preprocessor">#  if (NF_TYPE_2KB_KNOWN ==FALSE) &amp;&amp; (NF_TYPE_512B_KNOWN ==FALSE)</span>
<a name="l00133"></a>00133 <span class="preprocessor"></span><span class="preprocessor">#     undef  NF_BAD_CONFIG</span>
<a name="l00134"></a><a class="code" href="a00057.html#65e832fd00b7553290a7ce1c73d0e91f">00134</a> <span class="preprocessor"></span><span class="preprocessor">#     define NF_BAD_CONFIG (TRUE)</span>
<a name="l00135"></a>00135 <span class="preprocessor"></span><span class="preprocessor">#     error No NandFlash configuration found (NF_AUTO_DETECT_2KB, NF_AUTO_DETECT_512B, NF_TYPE_x)</span>
<a name="l00136"></a>00136 <span class="preprocessor"></span><span class="preprocessor">#  endif</span>
<a name="l00137"></a>00137 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00138"></a>00138 <span class="preprocessor"></span><span class="preprocessor">#  define NF_DETECTION_ID  (ENABLE)</span>
<a name="l00139"></a>00139 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00140"></a>00140 <span class="preprocessor"></span>
<a name="l00141"></a>00141 
<a name="l00142"></a>00142 <span class="preprocessor">#endif   // _NF_H_</span>
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Mon Sep 14 13:14:17 2009 for ATMEL by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.3 </small></address>
</body>
</html>
