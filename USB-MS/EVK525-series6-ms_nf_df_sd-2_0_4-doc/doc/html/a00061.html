<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>ATMEL: nf_drv.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.3 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>nf_drv.h File Reference</h1>
<p>
<div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dynsection">
</div>

<p>
<a href="a00162.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#d4d03be3b8f3d15ed804170a1311ec98">_GLOBEXT_</a>&nbsp;&nbsp;&nbsp;extern</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#a05075e4b708516ca1110b771bd9cb09">CLK_DFC_NFC_40MHz</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#25a92b5bbf698539fbeee69d50987bb1">CLK_DFC_NFC_30MHz</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#1ac5f27e619c47e98fa275fc3298a314">CLK_DFC_NFC_24MHz</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00121.html#gc89efdcfc7482ffdd7fed7cb558e8520">NFC_ACT_NOP</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">No Operation.  <a href="a00121.html#gc89efdcfc7482ffdd7fed7cb558e8520"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00121.html#g7fac080c5cd6ef2e4488ccabd602dc29">NFC_ACT_DEV_SELECT</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Device selection. The number is given by the extension.  <a href="a00121.html#g7fac080c5cd6ef2e4488ccabd602dc29"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00121.html#g2ab3804d96fbea4a2728c2dfe1ebcf4a">NFC_ACT_READ</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read flow through DFC.  <a href="a00121.html#g2ab3804d96fbea4a2728c2dfe1ebcf4a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00121.html#g3037aaf82a54bdefac7b263e98c87563">NFC_ACT_WRITE</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write flow through DFC.  <a href="a00121.html#g3037aaf82a54bdefac7b263e98c87563"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00121.html#g5f95acd6c54e424dfa198abf6eedb8bd">NFC_ACT_ASSERT_CE</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assert the CE pad of the last selected device.  <a href="a00121.html#g5f95acd6c54e424dfa198abf6eedb8bd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00121.html#g7fbd6608a2f650f008c0bc0bfdfe29df">NFC_EXT_CELOW</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00121.html#g7adf6f14ec58a9b01e5cdbd9c2692c07">NFC_EXT_NOP</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00121.html#g87223158c7a8ae1e77bf9c055a02c277">NFC_ACT_STOP</a>&nbsp;&nbsp;&nbsp;5</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop the NFC, or the DFC flow.  <a href="a00121.html#g87223158c7a8ae1e77bf9c055a02c277"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00121.html#gab34d75dd084ac97e29f53ca9e7b9b5a">NFC_ACT_ADC_EXT</a>&nbsp;&nbsp;&nbsp;6</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Column address extension.  <a href="a00121.html#gab34d75dd084ac97e29f53ca9e7b9b5a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#52171333a19206727fd5cf8dd22764a1">NF_ADD_LATCH_ENABLE_ADD</a>&nbsp;&nbsp;&nbsp;0x3A00</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#b25def4db76056c0fb628017a8745cb9">NF_CMD_LATCH_ENABLE_ADD</a>&nbsp;&nbsp;&nbsp;0x3900</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#2c64a0b3ce78ea21cc2b1a6d1c881011">NF_ADDRESS_CMD_DATA</a>&nbsp;&nbsp;&nbsp;0x3800</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#6a8a6e712a6de87b4b0a4ab60882ddbe">Nf_rd_byte</a>()&nbsp;&nbsp;&nbsp;(nf_data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#85fc4d411042026af1416b523e51470f">Nf_wr_byte</a>(b)&nbsp;&nbsp;&nbsp;(nf_data = b)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#eaf9a582fe49f76b6a5f0500b4f3bf69">Nf_send_command</a>(command)&nbsp;&nbsp;&nbsp;{Nandflash_CLE_select(); nf_send_cmd = command; Nandflash_CLE_unselect(); }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#665fae37ff62a2e59e4a71a50953fe91">Nf_send_address</a>(address)&nbsp;&nbsp;&nbsp;{Nandflash_ALE_select(); nf_send_add = address; Nandflash_ALE_unselect(); }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#91d42d1de5452067661da571363724c8">Mcu_set_sfr_page_nfc</a>()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#50a2c8add5233b65d9c537baf4fe5be0">Nfc_set_cmd</a>(command)&nbsp;&nbsp;&nbsp;Nf_send_command(command)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#ce78f62128d4b37a7cdf14a58fd4606a">Nfc_rd_status</a>()&nbsp;&nbsp;&nbsp;Nf_rd_byte()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#3a9602476f480441b912a7de88d440ed">Nfc_rd_data</a>()&nbsp;&nbsp;&nbsp;Nf_rd_byte()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#e7884626d24995c0dcf00140639cd6d4">Nfc_rd_data_fetch_next</a>()&nbsp;&nbsp;&nbsp;Nf_rd_byte()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#a2f2068df9c25227a31bce91dabfcaa2">Nfc_wr_data</a>(dat)&nbsp;&nbsp;&nbsp;Nf_wr_byte(dat)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#97ed1acd5b7fe680c9516a9b282e723b">Nfc_set_adc</a>(adr)&nbsp;&nbsp;&nbsp;Nf_send_address(adr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#214acfde9f6acc02adb0bb06e2c28a80">Nfc_set_adr</a>(adr)&nbsp;&nbsp;&nbsp;Nf_send_address(adr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#ac6eab632f7d904222094b7994cda033">Nfc_unprotect_all_flash</a>()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#929956d7ddddc291d7af26dea3159401">Nfc_action</a>(a, b)&nbsp;&nbsp;&nbsp;{ if( a == NFC_ACT_DEV_SELECT ) nfc_select_dev(b); }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#0d84ba3390ed57d612c9b3cbc6c04286">nfc_init</a>(a, b)&nbsp;&nbsp;&nbsp;nf_XMCR_enable()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#65a33d3164a890cef47c163e613e9c7e">Nfc_get_ecc</a>()&nbsp;&nbsp;&nbsp;(0xFF)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#1e6a89fab3f44fcdf627a615423711c8">Nfc_init_ecc</a>()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#c8447f3352f9d30b0a9eb506378d3cc9">Nfc_open_page_read</a>(page_addr, byte_addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Opens a page for read.  <a href="#c8447f3352f9d30b0a9eb506378d3cc9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#74dba9394ac015f89cb1c42131a239b5">Nfc_open_page_write</a>(page_addr, byte_addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Opens a page for write.  <a href="#74dba9394ac015f89cb1c42131a239b5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#b55f5bf79b94687e007eeacb266062fa">NF_MAX_DEVICES</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#83d1efcae1aa727613d7a3cbc642ab5b">NF_MAX_RB_TIMEOUT</a>&nbsp;&nbsp;&nbsp;0xFF</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Define here the number of NF connected to the microcontroller For AVR8 the number must be 1.  <a href="#83d1efcae1aa727613d7a3cbc642ab5b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00122.html#gb462ae1b64a27e4a58f80a5d87365a0e">NF_READ_A_AREA_CMD</a>&nbsp;&nbsp;&nbsp;0x00</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read Command of zone A (512B).  <a href="a00122.html#gb462ae1b64a27e4a58f80a5d87365a0e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00122.html#g924be83e972fbe0a20d7597ba63eb898">NF_READ_B_AREA_CMD</a>&nbsp;&nbsp;&nbsp;0x01</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read Command of zone B (512B).  <a href="a00122.html#g924be83e972fbe0a20d7597ba63eb898"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00122.html#gdac832d0e197802122f3ed08659eab62">NF_READ_C_AREA_CMD</a>&nbsp;&nbsp;&nbsp;0x50</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read Command of zone C (spare) (512B).  <a href="a00122.html#gdac832d0e197802122f3ed08659eab62"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00122.html#geba99dc96d78f777d7977d9e635a486d">NF_READ_CMD</a>&nbsp;&nbsp;&nbsp;0x00</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read Command (2KB).  <a href="a00122.html#geba99dc96d78f777d7977d9e635a486d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00122.html#ge3b430852969e884286ed0c54484b840">NF_READ_CMD2</a>&nbsp;&nbsp;&nbsp;0x30</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Confirm read Command (2KB).  <a href="a00122.html#ge3b430852969e884286ed0c54484b840"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00122.html#g6b3e6f65ed9fb365dc80dd9eea7c7bb5">NF_RANDOM_READ_CMD_C1</a>&nbsp;&nbsp;&nbsp;0x05</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Random read Command (2KB).  <a href="a00122.html#g6b3e6f65ed9fb365dc80dd9eea7c7bb5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00122.html#gb60ea5558934d96fe4e5f690e68c1f39">NF_RANDOM_READ_CMD_C2</a>&nbsp;&nbsp;&nbsp;0xE0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Confirm random read Command (2KB).  <a href="a00122.html#gb60ea5558934d96fe4e5f690e68c1f39"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00122.html#g501ac26cbe74623f2be4889e79ae38d1">NF_READ_ID_CMD</a>&nbsp;&nbsp;&nbsp;0x90</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read ID Command.  <a href="a00122.html#g501ac26cbe74623f2be4889e79ae38d1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00122.html#g3e6a1b5ac416b2b1aaf4b35d7f0fc1ec">NF_READ_ID2_CMD</a>&nbsp;&nbsp;&nbsp;0x91</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read ID 2 Command.  <a href="a00122.html#g3e6a1b5ac416b2b1aaf4b35d7f0fc1ec"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00122.html#g5ff4dc8af5fcac6e451765fbb857129d">NF_RESET_CMD</a>&nbsp;&nbsp;&nbsp;0xff</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reset command.  <a href="a00122.html#g5ff4dc8af5fcac6e451765fbb857129d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00122.html#g2efc28c0b0df3adabc23d63edc27e01c">NF_SEQUENTIAL_DATA_INPUT_CMD</a>&nbsp;&nbsp;&nbsp;0x80</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sequential data input command.  <a href="a00122.html#g2efc28c0b0df3adabc23d63edc27e01c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00122.html#gcb67f1eda6e20910614d4ee4e5f16b94">NF_PAGE_PROGRAM_CMD</a>&nbsp;&nbsp;&nbsp;0x10</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Page Program command.  <a href="a00122.html#gcb67f1eda6e20910614d4ee4e5f16b94"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00122.html#g135bceb08b1260b0b07f97bc0596528b">NF_RANDOM_DATA_INPUT_CMD</a>&nbsp;&nbsp;&nbsp;0x85</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Random data input command (2KB).  <a href="a00122.html#g135bceb08b1260b0b07f97bc0596528b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00122.html#g604b8b2d96b64df0d8a4e15dcb574abc">NF_COPY_BACK_CMD</a>&nbsp;&nbsp;&nbsp;0x35</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy-back command (2KB).  <a href="a00122.html#g604b8b2d96b64df0d8a4e15dcb574abc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00122.html#g4bd39b96f3be4d842abc784c09b16659">NF_CACHE_PROGRAM_CMD</a>&nbsp;&nbsp;&nbsp;0x15</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cache program (fast) command (2KB).  <a href="a00122.html#g4bd39b96f3be4d842abc784c09b16659"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00122.html#gac29402cb01e7f1b3bfde047d1d578fa">NF_BLOCK_ERASE_CMD</a>&nbsp;&nbsp;&nbsp;0x60</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Erase command.  <a href="a00122.html#gac29402cb01e7f1b3bfde047d1d578fa"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00122.html#g43f524c57b3ba4c51c9f6bbf92ff90b0">NF_BLOCK_ERASE_CONFIRM_CMD</a>&nbsp;&nbsp;&nbsp;0xD0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Confirm erase command.  <a href="a00122.html#g43f524c57b3ba4c51c9f6bbf92ff90b0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00122.html#g783e21781a180e0fb6ebba10209d6833">NF_READ_STATUS_CMD</a>&nbsp;&nbsp;&nbsp;0x70</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read Status command.  <a href="a00122.html#g783e21781a180e0fb6ebba10209d6833"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00123.html#gb02ffb6b5c399ba4afebedb99aa0691d">NF_MASK_STATUS_FAIL</a>&nbsp;&nbsp;&nbsp;(1&lt;&lt;0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fail.  <a href="a00123.html#gb02ffb6b5c399ba4afebedb99aa0691d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00123.html#gc0f4b42f5c5e79d042e6253733a3e2e5">NF_MASK_STATUS_READY</a>&nbsp;&nbsp;&nbsp;(1&lt;&lt;6)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Ready.  <a href="a00123.html#gc0f4b42f5c5e79d042e6253733a3e2e5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00123.html#g54968ef06beb1735571aa86940b5e24b">NF_MASK_STATUS_T_RDY_2KB</a>&nbsp;&nbsp;&nbsp;(1&lt;&lt;5)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">True Ready.  <a href="a00123.html#g54968ef06beb1735571aa86940b5e24b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00123.html#g67bd7320150ac34c7500aa2933928617">NF_MASK_STATUS_T_RDY_512B</a>&nbsp;&nbsp;&nbsp;(1&lt;&lt;6)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">True Ready.  <a href="a00123.html#g67bd7320150ac34c7500aa2933928617"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#68e6bb4551fa0bcd18526a39a7b74203">Nfc_wait_cache_busy</a>()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Macro that tests the cache busy.  <a href="#68e6bb4551fa0bcd18526a39a7b74203"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#d68699283962590b223fb226e78739c5">SIZE_PAGE_BYTE</a>&nbsp;&nbsp;&nbsp;((<a class="el" href="a00032.html#df928e51a60dba0df29d615401cc55a8">U16</a>)1&lt;&lt;G_SHIFT_PAGE_BYTE)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#eb269843d27f183677d85ee457233918">SIZE_SECTOR_BYTE</a>&nbsp;&nbsp;&nbsp;((<a class="el" href="a00032.html#df928e51a60dba0df29d615401cc55a8">U16</a>)1&lt;&lt;S_SHIFT_SECTOR_BYTE)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#668da83f591b67adc32d57080a5afa2c">SIZE_BLOCK_PAGE</a>&nbsp;&nbsp;&nbsp;((<a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>)1&lt;&lt;G_SHIFT_BLOCK_PAGE)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#ab9745c0e67c22216932ef3333cc9e52">SIZE_PAGE_SECTOR</a>&nbsp;&nbsp;&nbsp;((<a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>)1&lt;&lt;(G_SHIFT_PAGE_BYTE - S_SHIFT_SECTOR_BYTE))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#1e3d88079128d3118806d979fc2012c0">NFC_SPARE_OFST_1_BLK_ID</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#705297c11d74b4291c0f0230f2c85fac">NFC_BLK_ID_SYSTEM</a>&nbsp;&nbsp;&nbsp;0x39</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#974cae7c6c942b71e22d685bdb3c2107">NFC_BLK_ID_SUBLUT</a>&nbsp;&nbsp;&nbsp;0xE8</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#add91673c29e209dc3a833ff51713708">NFC_BLK_ID_RCV</a>&nbsp;&nbsp;&nbsp;0x72</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#c025edc74717298e57de75859117dc1e">NFC_BLK_ID_FBB</a>&nbsp;&nbsp;&nbsp;0xB4</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#2e268e2bf7f16ea1e30a5ff354e06fd7">NFC_BLK_ID_DATA</a>&nbsp;&nbsp;&nbsp;0xFF</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#f19a6cf6b26673dc36867d41b8eefed0">NFC_BLK_ID_QUARANTINE</a>&nbsp;&nbsp;&nbsp;0x8D</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#89ad3db087517a60f80aef41609e1caf">NFC_SPARE_OFST_2_BYTE_2</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#a21795d25cf7b6c5fe5d5e205cac92b2">NFC_SPARE_OFST_3_BYTE_3</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#7c529432302c1504305d86773d1ae0a7">NFC_OFST_3_DATA_SRC</a>&nbsp;&nbsp;&nbsp;0x00</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#98a49853a649a262cd8c415d568e92f3">NFC_OFST_3_DATA_DST</a>&nbsp;&nbsp;&nbsp;0xFF</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#a36ea238247cfc24264d4fd936b53e08">NFC_SPARE_OFST_4_BYTE_4</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#5df984b9f7ef87bb85401f4fb7978908">NFC_OFST_4_FBB_DRIVER_RELEASE</a>&nbsp;&nbsp;&nbsp;0x01</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#ee5e2777710c4535183e1791a4dfdc64">NFC_SPARE_DATA_VALID</a>&nbsp;&nbsp;&nbsp;0xFF</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#73da490f34dbbdb8f21005f7fb708e42">NFC_SPARE_DATA_INVALID</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#391ff58f6f81da0da062a288ed96d847">NFC_SPARE_OFST_EXPORT</a>&nbsp;&nbsp;&nbsp;11</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#541bc42ea0ce5ece317663b6330270e1">NFC_SPARE_OFST_6_LBA</a>&nbsp;&nbsp;&nbsp;6</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#6fd751d12dbd6e385f256152224b6635">NFC_OFST_6_FBB_VALID</a>&nbsp;&nbsp;&nbsp;0xFF</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#368c0bb974ad49ad58ab016d8a7f93bb">NFC_OFST_6_FBB_INVALID</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#fb32792772f53d535a51f8a41da8eba4">NFC_SPARE_OFST_ECC2</a>&nbsp;&nbsp;&nbsp;8</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#9b1d5140f23bee8a0de2fc1dc29e21ee">NFC_SPARE_OFST_ECC1</a>&nbsp;&nbsp;&nbsp;13</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#55533de21e4e26eacb813e07cb1150b0">G_N_ZONES</a>&nbsp;&nbsp;&nbsp;<a class="el" href="a00064.html#61fea0ce6f891274490f59384e7a21de">g_n_zones</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#21e40fac2f3e76ae00f24b91301882c6">G_N_BLOCKS</a>&nbsp;&nbsp;&nbsp;<a class="el" href="a00064.html#a77d29865677c8e97bbd578eac48be3f">g_n_blocks</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#26193f60c442075fc7fdf8022b04c489">G_N_ROW_CYCLES</a>&nbsp;&nbsp;&nbsp;<a class="el" href="a00062.html#4d7c730b3cd399426d94328236980166">g_n_row_cycles</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#7c58fe9f6485fa8f05d7198ab500179d">G_COPY_BACK_CONT</a>&nbsp;&nbsp;&nbsp;<a class="el" href="a00062.html#704f58e28283f1a6539d4ebcf52d2be8">g_copy_back_cont</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#8ba6ce5d7c8560f7c591a66516e167ac">G_COPY_BACK_DISCONT</a>&nbsp;&nbsp;&nbsp;<a class="el" href="a00062.html#ccd4688c7bedb0ceeb4b3b4d4a78c92a">g_copy_back_discont</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#b4233cf2358424060e6586b4ca401213">G_CACHE_PROG</a>&nbsp;&nbsp;&nbsp;<a class="el" href="a00061.html#7e776f74effed1ef2372393ca5cded60">g_cache_program</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#1294603227ee6dda5d13ee630f7b7415">G_CE_TOGGLE</a>&nbsp;&nbsp;&nbsp;<a class="el" href="a00061.html#4f97a48cb3ad4cb94aa358a5e5201b76">g_ce_toggle</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#02a8a44f37b2e7779254db91d3f9db39">G_CLK_DFC_NFC</a>&nbsp;&nbsp;&nbsp;<a class="el" href="a00061.html#7176fd8ca68947e606bfb2574f6612d1">g_clock_dfc_nfc</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#8fe0d788080aeed45f883b09ab26c2d4">G_DEV_MAKER</a>&nbsp;&nbsp;&nbsp;<a class="el" href="a00061.html#f1988bb3020968301cdb41696b569c0c">g_dev_maker</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#fe78dc9100a7cabc360db6885f1daaec">G_DEV_ID</a>&nbsp;&nbsp;&nbsp;<a class="el" href="a00061.html#a18d841aa5fc7d3706489403ad06529a">g_dev_id</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#db2af259f2983b78d8cf4fac62afaf7d">Is_nf_2k</a>()&nbsp;&nbsp;&nbsp;(11==<a class="el" href="a00062.html#12e3a20682ed5032e788a57882f8256f">g_shift_page_byte</a> )</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#dcb60d50b5764fc609ef291064f0eda3">Is_not_nf_2k</a>()&nbsp;&nbsp;&nbsp;(11!=<a class="el" href="a00062.html#12e3a20682ed5032e788a57882f8256f">g_shift_page_byte</a> )</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#d1213b7a82a55a9d9addaef5cd33ee69">Is_nf_512</a>()&nbsp;&nbsp;&nbsp;( 9==<a class="el" href="a00062.html#12e3a20682ed5032e788a57882f8256f">g_shift_page_byte</a> )</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#1807031055d9d07f3229cb8d826d3ffc">Is_not_nf_512</a>()&nbsp;&nbsp;&nbsp;( 9!=<a class="el" href="a00062.html#12e3a20682ed5032e788a57882f8256f">g_shift_page_byte</a> )</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#0bc54ae60cf42f5064c0a90cfca229cf">G_SHIFT_BLOCK_PAGE</a>&nbsp;&nbsp;&nbsp;<a class="el" href="a00062.html#be82d871b5e412806adb94589b4b7f2e">g_shift_block_page</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#bff7cf7d50c8eed7cb6122155aed8f3b">G_SHIFT_PAGE_BYTE</a>&nbsp;&nbsp;&nbsp;<a class="el" href="a00062.html#12e3a20682ed5032e788a57882f8256f">g_shift_page_byte</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#e0e77dabaa2dc4bdde63fa552f44e745">G_OFST_BLK_STATUS</a>&nbsp;&nbsp;&nbsp;<a class="el" href="a00062.html#b466843403d37526c75306381a6807c7">g_ofst_blk_status</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#c0f49b3b35f158892b2d8695c1d1f705">NF_SPARE_POS</a>&nbsp;&nbsp;&nbsp;( Is_nf_2k() ? 2048 : 512 )</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#cab1cd545a6af56cc962fe3f25c72ac8">NF_N_GOOD_STATIC_BLOCK</a>&nbsp;&nbsp;&nbsp;( Is_nf_2k() ?   32 : 256 )</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#56789fa8d78f2dc5fc1c2c95d7f9fb83">NO_NF_CONNECTED</a>&nbsp;&nbsp;&nbsp;0xFF</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#d86057b9c0e0585bc03215515ce28f5f">NF_UNKNOW</a>&nbsp;&nbsp;&nbsp;0xFE</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#2888ee8b7b2aad2f3e86eeff599729ca">nf_XMCR_enable</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable the XMCR (Extending Memory Module) of the AVR to drive the NAND Flash.  <a href="#2888ee8b7b2aad2f3e86eeff599729ca"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#6008aafe936bca7bfc39a8db231c1e7b">nf_XMCR_disable</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Disable the XMCR module of the AVR, to allow access to others peripherals that may be connected on this same bus.  <a href="#6008aafe936bca7bfc39a8db231c1e7b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#2bd4c6ceb672b91624859e1f4bec04ac">nfc_select_dev</a> (<a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> dev)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00032.html#a95502d3ad090c7564841b21b6aedcee">Status_bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#ef97b996828cba45aa7ee961af28e036">nfc_check_status</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check the status of the selected device.  <a href="#ef97b996828cba45aa7ee961af28e036"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#455d3b498da0863662f3309643c2b719">nfc_check_type</a> (<a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> nb_dev)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tests the Nand Flash configuration.  <a href="#455d3b498da0863662f3309643c2b719"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#ec96d29ad256f2dfc2ebfceddf08d6a9">nfc_reset_nands</a> (<a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> nb_dev)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reset all the NF devices.  <a href="#ec96d29ad256f2dfc2ebfceddf08d6a9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#a0a322a0237ff247248591adb2b10fab">nfc_open_page_read</a> (<a class="el" href="a00032.html#811024d35b9b8a41095b1f583b649e56">U32</a> page_addr, <a class="el" href="a00032.html#df928e51a60dba0df29d615401cc55a8">U16</a> byte_addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Opens a page for read.  <a href="#a0a322a0237ff247248591adb2b10fab"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#856b5ae1fade14e11da35fd5109fda8c">nfc_open_page_write</a> (<a class="el" href="a00032.html#811024d35b9b8a41095b1f583b649e56">U32</a> page_addr, <a class="el" href="a00032.html#df928e51a60dba0df29d615401cc55a8">U16</a> byte_addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Opens a page for write.  <a href="#856b5ae1fade14e11da35fd5109fda8c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#baa6a09d1819325c231e3735177a2179">nfc_mark_bad_block</a> (<a class="el" href="a00032.html#811024d35b9b8a41095b1f583b649e56">U32</a> page_addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Mark a block as 'invalid' by clearing it entirely.  <a href="#baa6a09d1819325c231e3735177a2179"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#4a7f7eed66f5eb678e4a96ae5dc32486">nfc_erase_block</a> (<a class="el" href="a00032.html#811024d35b9b8a41095b1f583b649e56">U32</a> page_addr, <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> force_erase)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Erases a block.  <a href="#4a7f7eed66f5eb678e4a96ae5dc32486"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#b9ba38cddb62690e76858546804fac2c">nfc_copy_back_init</a> (<a class="el" href="a00032.html#811024d35b9b8a41095b1f583b649e56">U32</a> page_addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prepare a copy-back session.  <a href="#b9ba38cddb62690e76858546804fac2c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#f172475aee374f6742159a2bfb9b333b">nfc_copy_back_conf</a> (<a class="el" href="a00032.html#811024d35b9b8a41095b1f583b649e56">U32</a> page_addr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00032.html#811024d35b9b8a41095b1f583b649e56">U32</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#2d5cf1d9c2243be1a253d5b0fd9147dd">nfc_read_id</a> (<a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> read_id_cmd, <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> nf_num)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read the ID of the Nand-Flash.  <a href="#2d5cf1d9c2243be1a253d5b0fd9147dd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#257fa3cbd1bd671a438dad76c52d4365">nfc_detect</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read the ID of the Nand-Flash and update the global variable.  <a href="#257fa3cbd1bd671a438dad76c52d4365"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#479efac38d042c2f27684ec8087da576">nfc_wait_busy</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tests the true busy.  <a href="#479efac38d042c2f27684ec8087da576"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#37641716cd31a827e214a2d0ec1f5c66">nfc_read_spare_byte</a> (<a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> _MEM_TYPE_SLOW_ *p_byte, <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> n_byte, <a class="el" href="a00032.html#811024d35b9b8a41095b1f583b649e56">U32</a> page_addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads the number spare bytes specified and stores them in a array.  <a href="#37641716cd31a827e214a2d0ec1f5c66"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#fc4fa239b80b2467d96653e379f2c473">nfc_print_block</a> (<a class="el" href="a00032.html#df928e51a60dba0df29d615401cc55a8">U16</a> block_addr, <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> dev_id)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">_MEM_TYPE_SLOW_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#61fea0ce6f891274490f59384e7a21de">g_n_zones</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">_MEM_TYPE_SLOW_ <a class="el" href="a00032.html#df928e51a60dba0df29d615401cc55a8">U16</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#a77d29865677c8e97bbd578eac48be3f">g_n_blocks</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">_MEM_TYPE_FAST_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#4d7c730b3cd399426d94328236980166">g_n_row_cycles</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">_MEM_TYPE_SLOW_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#704f58e28283f1a6539d4ebcf52d2be8">g_copy_back_cont</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">_MEM_TYPE_SLOW_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#ccd4688c7bedb0ceeb4b3b4d4a78c92a">g_copy_back_discont</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00032.html#253b248072cfc8bd812c69acd0046eed">Bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#7e776f74effed1ef2372393ca5cded60">g_cache_program</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00032.html#253b248072cfc8bd812c69acd0046eed">Bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#4f97a48cb3ad4cb94aa358a5e5201b76">g_ce_toggle</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">_MEM_TYPE_SLOW_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#7176fd8ca68947e606bfb2574f6612d1">g_clock_dfc_nfc</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">_MEM_TYPE_SLOW_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#f1988bb3020968301cdb41696b569c0c">g_dev_maker</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">_MEM_TYPE_SLOW_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#a18d841aa5fc7d3706489403ad06529a">g_dev_id</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">_MEM_TYPE_FAST_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#12e3a20682ed5032e788a57882f8256f">g_shift_page_byte</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">_MEM_TYPE_FAST_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#be82d871b5e412806adb94589b4b7f2e">g_shift_block_page</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">_MEM_TYPE_SLOW_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00061.html#b466843403d37526c75306381a6807c7">g_ofst_blk_status</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This file contains the low level macros and definition for the Nand-Flash Controller.<p>
<ul>
<li>Compiler: IAR EWAVR and GNU GCC for AVR</li><li>Supported devices: AT90USB1287, AT90USB1286, AT90USB647, AT90USB646</li></ul>
<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Atmel Corporation: <a href="http://www.atmel.com">http://www.atmel.com</a> <br>
 Support and FAQ: <a href="http://support.atmel.no/">http://support.atmel.no/</a> </dd></dl>

<p>Definition in file <a class="el" href="a00162.html">nf_drv.h</a>.</p>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="d4d03be3b8f3d15ed804170a1311ec98"></a><!-- doxytag: member="nf_drv.h::_GLOBEXT_" ref="d4d03be3b8f3d15ed804170a1311ec98" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _GLOBEXT_&nbsp;&nbsp;&nbsp;extern          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00054">54</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="a05075e4b708516ca1110b771bd9cb09"></a><!-- doxytag: member="nf_drv.h::CLK_DFC_NFC_40MHz" ref="a05075e4b708516ca1110b771bd9cb09" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CLK_DFC_NFC_40MHz&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00058">58</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="25a92b5bbf698539fbeee69d50987bb1"></a><!-- doxytag: member="nf_drv.h::CLK_DFC_NFC_30MHz" ref="25a92b5bbf698539fbeee69d50987bb1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CLK_DFC_NFC_30MHz&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00059">59</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="1ac5f27e619c47e98fa275fc3298a314"></a><!-- doxytag: member="nf_drv.h::CLK_DFC_NFC_24MHz" ref="1ac5f27e619c47e98fa275fc3298a314" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CLK_DFC_NFC_24MHz&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00060">60</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="52171333a19206727fd5cf8dd22764a1"></a><!-- doxytag: member="nf_drv.h::NF_ADD_LATCH_ENABLE_ADD" ref="52171333a19206727fd5cf8dd22764a1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NF_ADD_LATCH_ENABLE_ADD&nbsp;&nbsp;&nbsp;0x3A00          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00089">89</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="b25def4db76056c0fb628017a8745cb9"></a><!-- doxytag: member="nf_drv.h::NF_CMD_LATCH_ENABLE_ADD" ref="b25def4db76056c0fb628017a8745cb9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NF_CMD_LATCH_ENABLE_ADD&nbsp;&nbsp;&nbsp;0x3900          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00090">90</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="2c64a0b3ce78ea21cc2b1a6d1c881011"></a><!-- doxytag: member="nf_drv.h::NF_ADDRESS_CMD_DATA" ref="2c64a0b3ce78ea21cc2b1a6d1c881011" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NF_ADDRESS_CMD_DATA&nbsp;&nbsp;&nbsp;0x3800          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00091">91</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="6a8a6e712a6de87b4b0a4ab60882ddbe"></a><!-- doxytag: member="nf_drv.h::Nf_rd_byte" ref="6a8a6e712a6de87b4b0a4ab60882ddbe" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Nf_rd_byte          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(nf_data)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00095">95</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l02186">nf_nf_2_ram()</a>, <a class="el" href="a00163.html#l00540">nf_read_sector_to_usb()</a>, and <a class="el" href="a00163.html#l01699">nf_upload()</a>.</p>

</div>
</div><p>
<a class="anchor" name="85fc4d411042026af1416b523e51470f"></a><!-- doxytag: member="nf_drv.h::Nf_wr_byte" ref="85fc4d411042026af1416b523e51470f" args="(b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Nf_wr_byte          </td>
          <td>(</td>
          <td class="paramtype">b&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(nf_data = b)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00096">96</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01663">nf_download()</a>, <a class="el" href="a00163.html#l02117">nf_ram_2_nf()</a>, and <a class="el" href="a00163.html#l00632">nf_write_sector_from_usb()</a>.</p>

</div>
</div><p>
<a class="anchor" name="eaf9a582fe49f76b6a5f0500b4f3bf69"></a><!-- doxytag: member="nf_drv.h::Nf_send_command" ref="eaf9a582fe49f76b6a5f0500b4f3bf69" args="(command)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Nf_send_command          </td>
          <td>(</td>
          <td class="paramtype">command&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;{Nandflash_CLE_select(); nf_send_cmd = command; Nandflash_CLE_unselect(); }</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00098">98</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="665fae37ff62a2e59e4a71a50953fe91"></a><!-- doxytag: member="nf_drv.h::Nf_send_address" ref="665fae37ff62a2e59e4a71a50953fe91" args="(address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Nf_send_address          </td>
          <td>(</td>
          <td class="paramtype">address&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;{Nandflash_ALE_select(); nf_send_add = address; Nandflash_ALE_unselect(); }</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00099">99</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="91d42d1de5452067661da571363724c8"></a><!-- doxytag: member="nf_drv.h::Mcu_set_sfr_page_nfc" ref="91d42d1de5452067661da571363724c8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Mcu_set_sfr_page_nfc          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00106">106</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00161.html#l00203">nfc_check_status()</a>, <a class="el" href="a00161.html#l00558">nfc_copy_back_init()</a>, <a class="el" href="a00161.html#l00302">nfc_erase_block()</a>, <a class="el" href="a00161.html#l00255">nfc_mark_bad_block()</a>, <a class="el" href="a00161.html#l00221">nfc_open_page_read()</a>, <a class="el" href="a00161.html#l00239">nfc_open_page_write()</a>, <a class="el" href="a00161.html#l00397">nfc_read_id()</a>, <a class="el" href="a00161.html#l00333">nfc_read_spare_byte()</a>, and <a class="el" href="a00161.html#l00152">nfc_reset_nands()</a>.</p>

</div>
</div><p>
<a class="anchor" name="50a2c8add5233b65d9c537baf4fe5be0"></a><!-- doxytag: member="nf_drv.h::Nfc_set_cmd" ref="50a2c8add5233b65d9c537baf4fe5be0" args="(command)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Nfc_set_cmd          </td>
          <td>(</td>
          <td class="paramtype">command&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;Nf_send_command(command)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00107">107</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01859">nf_copy()</a>, <a class="el" href="a00163.html#l01558">nf_copy_tail()</a>, <a class="el" href="a00163.html#l00770">nf_dfc_write_stop()</a>, <a class="el" href="a00163.html#l00880">nf_open_write()</a>, <a class="el" href="a00163.html#l00724">nf_update_spare_zone()</a>, <a class="el" href="a00163.html#l00384">nf_write_10()</a>, <a class="el" href="a00163.html#l01417">nf_write_fbb()</a>, <a class="el" href="a00163.html#l01213">nf_write_lut()</a>, <a class="el" href="a00161.html#l00107">nfc_check_type()</a>, <a class="el" href="a00161.html#l00558">nfc_copy_back_init()</a>, <a class="el" href="a00161.html#l00302">nfc_erase_block()</a>, <a class="el" href="a00161.html#l00255">nfc_mark_bad_block()</a>, <a class="el" href="a00161.html#l00423">nfc_nf_is_ready()</a>, <a class="el" href="a00161.html#l00397">nfc_read_id()</a>, <a class="el" href="a00161.html#l00152">nfc_reset_nands()</a>, and <a class="el" href="a00161.html#l00353">nfc_wait_busy()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ce78f62128d4b37a7cdf14a58fd4606a"></a><!-- doxytag: member="nf_drv.h::Nfc_rd_status" ref="ce78f62128d4b37a7cdf14a58fd4606a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Nfc_rd_status          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;Nf_rd_byte()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00108">108</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00161.html#l00423">nfc_nf_is_ready()</a>, and <a class="el" href="a00161.html#l00353">nfc_wait_busy()</a>.</p>

</div>
</div><p>
<a class="anchor" name="3a9602476f480441b912a7de88d440ed"></a><!-- doxytag: member="nf_drv.h::Nfc_rd_data" ref="3a9602476f480441b912a7de88d440ed" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Nfc_rd_data          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;Nf_rd_byte()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00109">109</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00165.html#l00250">nf_cleanup_memory()</a>, <a class="el" href="a00165.html#l00894">nf_refine_index()</a>, <a class="el" href="a00161.html#l00203">nfc_check_status()</a>, and <a class="el" href="a00161.html#l00302">nfc_erase_block()</a>.</p>

</div>
</div><p>
<a class="anchor" name="e7884626d24995c0dcf00140639cd6d4"></a><!-- doxytag: member="nf_drv.h::Nfc_rd_data_fetch_next" ref="e7884626d24995c0dcf00140639cd6d4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Nfc_rd_data_fetch_next          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;Nf_rd_byte()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00110">110</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01295">nf_cache_fbb_flush()</a>, <a class="el" href="a00163.html#l01049">nf_cache_fbb_refill()</a>, <a class="el" href="a00163.html#l01099">nf_cache_lut_flush()</a>, <a class="el" href="a00163.html#l00980">nf_cache_lut_refill()</a>, <a class="el" href="a00163.html#l01463">nf_check_fbb()</a>, <a class="el" href="a00163.html#l01514">nf_check_lut()</a>, <a class="el" href="a00165.html#l00250">nf_cleanup_memory()</a>, <a class="el" href="a00165.html#l00490">nf_rebuild()</a>, <a class="el" href="a00161.html#l00107">nfc_check_type()</a>, <a class="el" href="a00161.html#l00397">nfc_read_id()</a>, and <a class="el" href="a00161.html#l00333">nfc_read_spare_byte()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a2f2068df9c25227a31bce91dabfcaa2"></a><!-- doxytag: member="nf_drv.h::Nfc_wr_data" ref="a2f2068df9c25227a31bce91dabfcaa2" args="(dat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Nfc_wr_data          </td>
          <td>(</td>
          <td class="paramtype">dat&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;Nf_wr_byte(dat)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00111">111</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01859">nf_copy()</a>, <a class="el" href="a00163.html#l00880">nf_open_write()</a>, <a class="el" href="a00163.html#l00724">nf_update_spare_zone()</a>, <a class="el" href="a00163.html#l01417">nf_write_fbb()</a>, <a class="el" href="a00163.html#l01213">nf_write_lut()</a>, and <a class="el" href="a00161.html#l00255">nfc_mark_bad_block()</a>.</p>

</div>
</div><p>
<a class="anchor" name="97ed1acd5b7fe680c9516a9b282e723b"></a><!-- doxytag: member="nf_drv.h::Nfc_set_adc" ref="97ed1acd5b7fe680c9516a9b282e723b" args="(adr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Nfc_set_adc          </td>
          <td>(</td>
          <td class="paramtype">adr&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;Nf_send_address(adr)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00112">112</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01859">nf_copy()</a>, <a class="el" href="a00163.html#l01558">nf_copy_tail()</a>, <a class="el" href="a00163.html#l00724">nf_update_spare_zone()</a>, <a class="el" href="a00161.html#l00107">nfc_check_type()</a>, <a class="el" href="a00161.html#l00558">nfc_copy_back_init()</a>, and <a class="el" href="a00161.html#l00397">nfc_read_id()</a>.</p>

</div>
</div><p>
<a class="anchor" name="214acfde9f6acc02adb0bb06e2c28a80"></a><!-- doxytag: member="nf_drv.h::Nfc_set_adr" ref="214acfde9f6acc02adb0bb06e2c28a80" args="(adr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Nfc_set_adr          </td>
          <td>(</td>
          <td class="paramtype">adr&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;Nf_send_address(adr)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00113">113</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01859">nf_copy()</a>, <a class="el" href="a00161.html#l00558">nfc_copy_back_init()</a>, and <a class="el" href="a00161.html#l00302">nfc_erase_block()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ac6eab632f7d904222094b7994cda033"></a><!-- doxytag: member="nf_drv.h::Nfc_unprotect_all_flash" ref="ac6eab632f7d904222094b7994cda033" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Nfc_unprotect_all_flash          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00114">114</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01859">nf_copy()</a>, <a class="el" href="a00161.html#l00558">nfc_copy_back_init()</a>, and <a class="el" href="a00161.html#l00302">nfc_erase_block()</a>.</p>

</div>
</div><p>
<a class="anchor" name="929956d7ddddc291d7af26dea3159401"></a><!-- doxytag: member="nf_drv.h::Nfc_action" ref="929956d7ddddc291d7af26dea3159401" args="(a, b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Nfc_action          </td>
          <td>(</td>
          <td class="paramtype">a,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">b&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;{ if( a == NFC_ACT_DEV_SELECT ) nfc_select_dev(b); }</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00116">116</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01295">nf_cache_fbb_flush()</a>, <a class="el" href="a00163.html#l01049">nf_cache_fbb_refill()</a>, <a class="el" href="a00163.html#l01099">nf_cache_lut_flush()</a>, <a class="el" href="a00163.html#l00980">nf_cache_lut_refill()</a>, <a class="el" href="a00163.html#l01463">nf_check_fbb()</a>, <a class="el" href="a00163.html#l01514">nf_check_lut()</a>, <a class="el" href="a00165.html#l00250">nf_cleanup_memory()</a>, <a class="el" href="a00163.html#l01558">nf_copy_tail()</a>, <a class="el" href="a00163.html#l00819">nf_erase_old_blocks()</a>, <a class="el" href="a00163.html#l02186">nf_nf_2_ram()</a>, <a class="el" href="a00163.html#l00880">nf_open_write()</a>, <a class="el" href="a00163.html#l02117">nf_ram_2_nf()</a>, <a class="el" href="a00163.html#l00320">nf_read_10()</a>, <a class="el" href="a00165.html#l00490">nf_rebuild()</a>, <a class="el" href="a00165.html#l00303">nf_scan()</a>, <a class="el" href="a00163.html#l00384">nf_write_10()</a>, <a class="el" href="a00163.html#l01417">nf_write_fbb()</a>, <a class="el" href="a00163.html#l01213">nf_write_lut()</a>, <a class="el" href="a00161.html#l00107">nfc_check_type()</a>, <a class="el" href="a00161.html#l00397">nfc_read_id()</a>, <a class="el" href="a00161.html#l00152">nfc_reset_nands()</a>, and <a class="el" href="a00165.html#l00920">ut_nfc_erase_all()</a>.</p>

</div>
</div><p>
<a class="anchor" name="0d84ba3390ed57d612c9b3cbc6c04286"></a><!-- doxytag: member="nf_drv.h::nfc_init" ref="0d84ba3390ed57d612c9b3cbc6c04286" args="(a, b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define nfc_init          </td>
          <td>(</td>
          <td class="paramtype">a,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">b&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;nf_XMCR_enable()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00117">117</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00161.html#l00107">nfc_check_type()</a>, and <a class="el" href="a00161.html#l00449">nfc_detect()</a>.</p>

</div>
</div><p>
<a class="anchor" name="65a33d3164a890cef47c163e613e9c7e"></a><!-- doxytag: member="nf_drv.h::Nfc_get_ecc" ref="65a33d3164a890cef47c163e613e9c7e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Nfc_get_ecc          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(0xFF)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00118">118</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="1e6a89fab3f44fcdf627a615423711c8"></a><!-- doxytag: member="nf_drv.h::Nfc_init_ecc" ref="1e6a89fab3f44fcdf627a615423711c8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Nfc_init_ecc          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00119">119</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="c8447f3352f9d30b0a9eb506378d3cc9"></a><!-- doxytag: member="nf_drv.h::Nfc_open_page_read" ref="c8447f3352f9d30b0a9eb506378d3cc9" args="(page_addr, byte_addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Nfc_open_page_read          </td>
          <td>(</td>
          <td class="paramtype">page_addr,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte_addr&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Opens a page for read. 
<p>
The macro will adapt the commands according to the type of flash memory. The busy is polled at the end of the function.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>page_addr</em>&nbsp;</td><td>absolute page address of the block </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>byte_addr</em>&nbsp;</td><td>relative byte address inside the page.</td></tr>
  </table>
</dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd><code><a class="el" href="a00063.html#7fa3ba35a1436fa32cc3a53d079dedc0" title="Initializes the nand flash memory driver.">nf_init()</a></code> should have been called before. The NF device should have been selected before with <code><a class="el" href="a00061.html#929956d7ddddc291d7af26dea3159401">Nfc_action(NFC_ACT_DEV_SELECT, id)</a></code>. </dd></dl>

<p>Definition at line <a class="el" href="a00162.html#l00132">132</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l00320">nf_read_10()</a>, and <a class="el" href="a00161.html#l00221">nfc_open_page_read()</a>.</p>

</div>
</div><p>
<a class="anchor" name="74dba9394ac015f89cb1c42131a239b5"></a><!-- doxytag: member="nf_drv.h::Nfc_open_page_write" ref="74dba9394ac015f89cb1c42131a239b5" args="(page_addr, byte_addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Nfc_open_page_write          </td>
          <td>(</td>
          <td class="paramtype">page_addr,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte_addr&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Opens a page for write. 
<p>
The macro will adapt the commands according to the type of flash memory.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>page_addr</em>&nbsp;</td><td>absolute page address of the block </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>byte_addr</em>&nbsp;</td><td>relative byte address inside the page.</td></tr>
  </table>
</dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd><code><a class="el" href="a00063.html#7fa3ba35a1436fa32cc3a53d079dedc0" title="Initializes the nand flash memory driver.">nf_init()</a></code> should have been called before. The NF device should have been selected before with <code><a class="el" href="a00061.html#929956d7ddddc291d7af26dea3159401">Nfc_action(NFC_ACT_DEV_SELECT, id)</a></code>. </dd></dl>

<p>Definition at line <a class="el" href="a00162.html#l00211">211</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l00384">nf_write_10()</a>, and <a class="el" href="a00161.html#l00239">nfc_open_page_write()</a>.</p>

</div>
</div><p>
<a class="anchor" name="b55f5bf79b94687e007eeacb266062fa"></a><!-- doxytag: member="nf_drv.h::NF_MAX_DEVICES" ref="b55f5bf79b94687e007eeacb266062fa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NF_MAX_DEVICES&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00274">274</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00161.html#l00449">nfc_detect()</a>.</p>

</div>
</div><p>
<a class="anchor" name="83d1efcae1aa727613d7a3cbc642ab5b"></a><!-- doxytag: member="nf_drv.h::NF_MAX_RB_TIMEOUT" ref="83d1efcae1aa727613d7a3cbc642ab5b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NF_MAX_RB_TIMEOUT&nbsp;&nbsp;&nbsp;0xFF          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Define here the number of NF connected to the microcontroller For AVR8 the number must be 1. 
<p>

<p>Definition at line <a class="el" href="a00162.html#l00278">278</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00161.html#l00423">nfc_nf_is_ready()</a>.</p>

</div>
</div><p>
<a class="anchor" name="68e6bb4551fa0bcd18526a39a7b74203"></a><!-- doxytag: member="nf_drv.h::Nfc_wait_cache_busy" ref="68e6bb4551fa0bcd18526a39a7b74203" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Nfc_wait_cache_busy          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">{                                                                 \
      <span class="keyword">register</span> <span class="keywordtype">int</span> Reg;                                              \
      <a class="code" href="a00061.html#50a2c8add5233b65d9c537baf4fe5be0">Nfc_set_cmd</a>(<a class="code" href="a00122.html#g783e21781a180e0fb6ebba10209d6833" title="Read Status command.">NF_READ_STATUS_CMD</a>);                               \
      Reg = <a class="code" href="a00061.html#ce78f62128d4b37a7cdf14a58fd4606a">Nfc_rd_status</a>();                                         \
      <span class="keywordflow">while</span>( (<a class="code" href="a00061.html#ce78f62128d4b37a7cdf14a58fd4606a">Nfc_rd_status</a>() &amp; <a class="code" href="a00123.html#gc0f4b42f5c5e79d042e6253733a3e2e5" title="Ready.">NF_MASK_STATUS_READY</a>)==0 <span class="comment">/*busy*/</span> ); \
      <span class="keywordflow">while</span>( (<a class="code" href="a00061.html#ce78f62128d4b37a7cdf14a58fd4606a">Nfc_rd_status</a>() &amp; <a class="code" href="a00123.html#gc0f4b42f5c5e79d042e6253733a3e2e5" title="Ready.">NF_MASK_STATUS_READY</a>)==0 <span class="comment">/*busy*/</span> ); \
   }
</pre></div>Macro that tests the cache busy. 
<p>

<p>Definition at line <a class="el" href="a00162.html#l00326">326</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="d68699283962590b223fb226e78739c5"></a><!-- doxytag: member="nf_drv.h::SIZE_PAGE_BYTE" ref="d68699283962590b223fb226e78739c5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SIZE_PAGE_BYTE&nbsp;&nbsp;&nbsp;((<a class="el" href="a00032.html#df928e51a60dba0df29d615401cc55a8">U16</a>)1&lt;&lt;G_SHIFT_PAGE_BYTE)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00335">335</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01295">nf_cache_fbb_flush()</a>, <a class="el" href="a00163.html#l01049">nf_cache_fbb_refill()</a>, and <a class="el" href="a00163.html#l00980">nf_cache_lut_refill()</a>.</p>

</div>
</div><p>
<a class="anchor" name="eb269843d27f183677d85ee457233918"></a><!-- doxytag: member="nf_drv.h::SIZE_SECTOR_BYTE" ref="eb269843d27f183677d85ee457233918" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SIZE_SECTOR_BYTE&nbsp;&nbsp;&nbsp;((<a class="el" href="a00032.html#df928e51a60dba0df29d615401cc55a8">U16</a>)1&lt;&lt;S_SHIFT_SECTOR_BYTE)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00336">336</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01558">nf_copy_tail()</a>, and <a class="el" href="a00163.html#l00880">nf_open_write()</a>.</p>

</div>
</div><p>
<a class="anchor" name="668da83f591b67adc32d57080a5afa2c"></a><!-- doxytag: member="nf_drv.h::SIZE_BLOCK_PAGE" ref="668da83f591b67adc32d57080a5afa2c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SIZE_BLOCK_PAGE&nbsp;&nbsp;&nbsp;((<a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>)1&lt;&lt;G_SHIFT_BLOCK_PAGE)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00337">337</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01558">nf_copy_tail()</a>, <a class="el" href="a00163.html#l00770">nf_dfc_write_stop()</a>, <a class="el" href="a00163.html#l00880">nf_open_write()</a>, <a class="el" href="a00163.html#l00320">nf_read_10()</a>, <a class="el" href="a00165.html#l00490">nf_rebuild()</a>, <a class="el" href="a00165.html#l00894">nf_refine_index()</a>, <a class="el" href="a00163.html#l01743">nf_translate()</a>, and <a class="el" href="a00163.html#l00384">nf_write_10()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ab9745c0e67c22216932ef3333cc9e52"></a><!-- doxytag: member="nf_drv.h::SIZE_PAGE_SECTOR" ref="ab9745c0e67c22216932ef3333cc9e52" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SIZE_PAGE_SECTOR&nbsp;&nbsp;&nbsp;((<a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>)1&lt;&lt;(G_SHIFT_PAGE_BYTE - S_SHIFT_SECTOR_BYTE))          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00338">338</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01558">nf_copy_tail()</a>, <a class="el" href="a00163.html#l00880">nf_open_write()</a>, <a class="el" href="a00165.html#l00490">nf_rebuild()</a>, <a class="el" href="a00163.html#l01743">nf_translate()</a>, and <a class="el" href="a00163.html#l00490">nf_xfer_update_vars()</a>.</p>

</div>
</div><p>
<a class="anchor" name="1e3d88079128d3118806d979fc2012c0"></a><!-- doxytag: member="nf_drv.h::NFC_SPARE_OFST_1_BLK_ID" ref="1e3d88079128d3118806d979fc2012c0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_SPARE_OFST_1_BLK_ID&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00344">344</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00165.html#l00847">nf_fetch_free_block()</a>, <a class="el" href="a00165.html#l00490">nf_rebuild()</a>, <a class="el" href="a00165.html#l00894">nf_refine_index()</a>, and <a class="el" href="a00165.html#l00303">nf_scan()</a>.</p>

</div>
</div><p>
<a class="anchor" name="705297c11d74b4291c0f0230f2c85fac"></a><!-- doxytag: member="nf_drv.h::NFC_BLK_ID_SYSTEM" ref="705297c11d74b4291c0f0230f2c85fac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_BLK_ID_SYSTEM&nbsp;&nbsp;&nbsp;0x39          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00345">345</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="974cae7c6c942b71e22d685bdb3c2107"></a><!-- doxytag: member="nf_drv.h::NFC_BLK_ID_SUBLUT" ref="974cae7c6c942b71e22d685bdb3c2107" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_BLK_ID_SUBLUT&nbsp;&nbsp;&nbsp;0xE8          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00346">346</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00165.html#l00250">nf_cleanup_memory()</a>, <a class="el" href="a00165.html#l00847">nf_fetch_free_block()</a>, <a class="el" href="a00165.html#l00303">nf_scan()</a>, and <a class="el" href="a00163.html#l01213">nf_write_lut()</a>.</p>

</div>
</div><p>
<a class="anchor" name="add91673c29e209dc3a833ff51713708"></a><!-- doxytag: member="nf_drv.h::NFC_BLK_ID_RCV" ref="add91673c29e209dc3a833ff51713708" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_BLK_ID_RCV&nbsp;&nbsp;&nbsp;0x72          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00347">347</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="c025edc74717298e57de75859117dc1e"></a><!-- doxytag: member="nf_drv.h::NFC_BLK_ID_FBB" ref="c025edc74717298e57de75859117dc1e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_BLK_ID_FBB&nbsp;&nbsp;&nbsp;0xB4          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00348">348</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00165.html#l00250">nf_cleanup_memory()</a>, <a class="el" href="a00165.html#l00847">nf_fetch_free_block()</a>, <a class="el" href="a00165.html#l00303">nf_scan()</a>, and <a class="el" href="a00163.html#l01417">nf_write_fbb()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2e268e2bf7f16ea1e30a5ff354e06fd7"></a><!-- doxytag: member="nf_drv.h::NFC_BLK_ID_DATA" ref="2e268e2bf7f16ea1e30a5ff354e06fd7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_BLK_ID_DATA&nbsp;&nbsp;&nbsp;0xFF          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00349">349</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00165.html#l00847">nf_fetch_free_block()</a>, <a class="el" href="a00165.html#l00490">nf_rebuild()</a>, <a class="el" href="a00165.html#l00303">nf_scan()</a>, and <a class="el" href="a00163.html#l00724">nf_update_spare_zone()</a>.</p>

</div>
</div><p>
<a class="anchor" name="f19a6cf6b26673dc36867d41b8eefed0"></a><!-- doxytag: member="nf_drv.h::NFC_BLK_ID_QUARANTINE" ref="f19a6cf6b26673dc36867d41b8eefed0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_BLK_ID_QUARANTINE&nbsp;&nbsp;&nbsp;0x8D          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00350">350</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00165.html#l00303">nf_scan()</a>.</p>

</div>
</div><p>
<a class="anchor" name="89ad3db087517a60f80aef41609e1caf"></a><!-- doxytag: member="nf_drv.h::NFC_SPARE_OFST_2_BYTE_2" ref="89ad3db087517a60f80aef41609e1caf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_SPARE_OFST_2_BYTE_2&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00352">352</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00165.html#l00303">nf_scan()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a21795d25cf7b6c5fe5d5e205cac92b2"></a><!-- doxytag: member="nf_drv.h::NFC_SPARE_OFST_3_BYTE_3" ref="a21795d25cf7b6c5fe5d5e205cac92b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_SPARE_OFST_3_BYTE_3&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00353">353</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01859">nf_copy()</a>, <a class="el" href="a00163.html#l00880">nf_open_write()</a>, <a class="el" href="a00165.html#l00490">nf_rebuild()</a>, and <a class="el" href="a00165.html#l00303">nf_scan()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7c529432302c1504305d86773d1ae0a7"></a><!-- doxytag: member="nf_drv.h::NFC_OFST_3_DATA_SRC" ref="7c529432302c1504305d86773d1ae0a7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_OFST_3_DATA_SRC&nbsp;&nbsp;&nbsp;0x00          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00354">354</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l00880">nf_open_write()</a>.</p>

</div>
</div><p>
<a class="anchor" name="98a49853a649a262cd8c415d568e92f3"></a><!-- doxytag: member="nf_drv.h::NFC_OFST_3_DATA_DST" ref="98a49853a649a262cd8c415d568e92f3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_OFST_3_DATA_DST&nbsp;&nbsp;&nbsp;0xFF          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00355">355</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01859">nf_copy()</a>, <a class="el" href="a00165.html#l00490">nf_rebuild()</a>, and <a class="el" href="a00163.html#l00724">nf_update_spare_zone()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a36ea238247cfc24264d4fd936b53e08"></a><!-- doxytag: member="nf_drv.h::NFC_SPARE_OFST_4_BYTE_4" ref="a36ea238247cfc24264d4fd936b53e08" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_SPARE_OFST_4_BYTE_4&nbsp;&nbsp;&nbsp;4          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00357">357</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00165.html#l00303">nf_scan()</a>.</p>

</div>
</div><p>
<a class="anchor" name="5df984b9f7ef87bb85401f4fb7978908"></a><!-- doxytag: member="nf_drv.h::NFC_OFST_4_FBB_DRIVER_RELEASE" ref="5df984b9f7ef87bb85401f4fb7978908" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_OFST_4_FBB_DRIVER_RELEASE&nbsp;&nbsp;&nbsp;0x01          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00358">358</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00165.html#l00444">is_nf_invalid()</a>, and <a class="el" href="a00163.html#l01417">nf_write_fbb()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ee5e2777710c4535183e1791a4dfdc64"></a><!-- doxytag: member="nf_drv.h::NFC_SPARE_DATA_VALID" ref="ee5e2777710c4535183e1791a4dfdc64" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_SPARE_DATA_VALID&nbsp;&nbsp;&nbsp;0xFF          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00359">359</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l00724">nf_update_spare_zone()</a>.</p>

</div>
</div><p>
<a class="anchor" name="73da490f34dbbdb8f21005f7fb708e42"></a><!-- doxytag: member="nf_drv.h::NFC_SPARE_DATA_INVALID" ref="73da490f34dbbdb8f21005f7fb708e42" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_SPARE_DATA_INVALID&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00360">360</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="391ff58f6f81da0da062a288ed96d847"></a><!-- doxytag: member="nf_drv.h::NFC_SPARE_OFST_EXPORT" ref="391ff58f6f81da0da062a288ed96d847" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_SPARE_OFST_EXPORT&nbsp;&nbsp;&nbsp;11          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00361">361</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00165.html#l00303">nf_scan()</a>.</p>

</div>
</div><p>
<a class="anchor" name="541bc42ea0ce5ece317663b6330270e1"></a><!-- doxytag: member="nf_drv.h::NFC_SPARE_OFST_6_LBA" ref="541bc42ea0ce5ece317663b6330270e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_SPARE_OFST_6_LBA&nbsp;&nbsp;&nbsp;6          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00363">363</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01859">nf_copy()</a>, <a class="el" href="a00165.html#l00847">nf_fetch_free_block()</a>, <a class="el" href="a00163.html#l00880">nf_open_write()</a>, <a class="el" href="a00165.html#l00490">nf_rebuild()</a>, and <a class="el" href="a00165.html#l00303">nf_scan()</a>.</p>

</div>
</div><p>
<a class="anchor" name="6fd751d12dbd6e385f256152224b6635"></a><!-- doxytag: member="nf_drv.h::NFC_OFST_6_FBB_VALID" ref="6fd751d12dbd6e385f256152224b6635" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_OFST_6_FBB_VALID&nbsp;&nbsp;&nbsp;0xFF          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00364">364</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00165.html#l00303">nf_scan()</a>, and <a class="el" href="a00163.html#l01417">nf_write_fbb()</a>.</p>

</div>
</div><p>
<a class="anchor" name="368c0bb974ad49ad58ab016d8a7f93bb"></a><!-- doxytag: member="nf_drv.h::NFC_OFST_6_FBB_INVALID" ref="368c0bb974ad49ad58ab016d8a7f93bb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_OFST_6_FBB_INVALID&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00365">365</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l00880">nf_open_write()</a>.</p>

</div>
</div><p>
<a class="anchor" name="fb32792772f53d535a51f8a41da8eba4"></a><!-- doxytag: member="nf_drv.h::NFC_SPARE_OFST_ECC2" ref="fb32792772f53d535a51f8a41da8eba4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_SPARE_OFST_ECC2&nbsp;&nbsp;&nbsp;8          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00367">367</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="9b1d5140f23bee8a0de2fc1dc29e21ee"></a><!-- doxytag: member="nf_drv.h::NFC_SPARE_OFST_ECC1" ref="9b1d5140f23bee8a0de2fc1dc29e21ee" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NFC_SPARE_OFST_ECC1&nbsp;&nbsp;&nbsp;13          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00368">368</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="55533de21e4e26eacb813e07cb1150b0"></a><!-- doxytag: member="nf_drv.h::G_N_ZONES" ref="55533de21e4e26eacb813e07cb1150b0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define G_N_ZONES&nbsp;&nbsp;&nbsp;<a class="el" href="a00064.html#61fea0ce6f891274490f59384e7a21de">g_n_zones</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00382">382</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01859">nf_copy()</a>.</p>

</div>
</div><p>
<a class="anchor" name="21e40fac2f3e76ae00f24b91301882c6"></a><!-- doxytag: member="nf_drv.h::G_N_BLOCKS" ref="21e40fac2f3e76ae00f24b91301882c6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define G_N_BLOCKS&nbsp;&nbsp;&nbsp;<a class="el" href="a00064.html#a77d29865677c8e97bbd578eac48be3f">g_n_blocks</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00383">383</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01295">nf_cache_fbb_flush()</a>, <a class="el" href="a00163.html#l01049">nf_cache_fbb_refill()</a>, <a class="el" href="a00163.html#l01099">nf_cache_lut_flush()</a>, <a class="el" href="a00163.html#l00980">nf_cache_lut_refill()</a>, <a class="el" href="a00163.html#l01463">nf_check_fbb()</a>, <a class="el" href="a00163.html#l01514">nf_check_lut()</a>, <a class="el" href="a00165.html#l00250">nf_cleanup_memory()</a>, <a class="el" href="a00163.html#l02091">nf_erase_all_blocks()</a>, <a class="el" href="a00165.html#l00490">nf_rebuild()</a>, <a class="el" href="a00165.html#l00303">nf_scan()</a>, <a class="el" href="a00163.html#l02021">nf_swap()</a>, <a class="el" href="a00163.html#l01213">nf_write_lut()</a>, and <a class="el" href="a00165.html#l00920">ut_nfc_erase_all()</a>.</p>

</div>
</div><p>
<a class="anchor" name="26193f60c442075fc7fdf8022b04c489"></a><!-- doxytag: member="nf_drv.h::G_N_ROW_CYCLES" ref="26193f60c442075fc7fdf8022b04c489" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define G_N_ROW_CYCLES&nbsp;&nbsp;&nbsp;<a class="el" href="a00062.html#4d7c730b3cd399426d94328236980166">g_n_row_cycles</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00384">384</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01859">nf_copy()</a>, <a class="el" href="a00161.html#l00558">nfc_copy_back_init()</a>, and <a class="el" href="a00161.html#l00302">nfc_erase_block()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7c58fe9f6485fa8f05d7198ab500179d"></a><!-- doxytag: member="nf_drv.h::G_COPY_BACK_CONT" ref="7c58fe9f6485fa8f05d7198ab500179d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define G_COPY_BACK_CONT&nbsp;&nbsp;&nbsp;<a class="el" href="a00062.html#704f58e28283f1a6539d4ebcf52d2be8">g_copy_back_cont</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00385">385</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01859">nf_copy()</a>.</p>

</div>
</div><p>
<a class="anchor" name="8ba6ce5d7c8560f7c591a66516e167ac"></a><!-- doxytag: member="nf_drv.h::G_COPY_BACK_DISCONT" ref="8ba6ce5d7c8560f7c591a66516e167ac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define G_COPY_BACK_DISCONT&nbsp;&nbsp;&nbsp;<a class="el" href="a00062.html#ccd4688c7bedb0ceeb4b3b4d4a78c92a">g_copy_back_discont</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00386">386</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01859">nf_copy()</a>.</p>

</div>
</div><p>
<a class="anchor" name="b4233cf2358424060e6586b4ca401213"></a><!-- doxytag: member="nf_drv.h::G_CACHE_PROG" ref="b4233cf2358424060e6586b4ca401213" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define G_CACHE_PROG&nbsp;&nbsp;&nbsp;<a class="el" href="a00061.html#7e776f74effed1ef2372393ca5cded60">g_cache_program</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00387">387</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l00384">nf_write_10()</a>, and <a class="el" href="a00161.html#l00353">nfc_wait_busy()</a>.</p>

</div>
</div><p>
<a class="anchor" name="1294603227ee6dda5d13ee630f7b7415"></a><!-- doxytag: member="nf_drv.h::G_CE_TOGGLE" ref="1294603227ee6dda5d13ee630f7b7415" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define G_CE_TOGGLE&nbsp;&nbsp;&nbsp;<a class="el" href="a00061.html#4f97a48cb3ad4cb94aa358a5e5201b76">g_ce_toggle</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00388">388</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00161.html#l00107">nfc_check_type()</a>.</p>

</div>
</div><p>
<a class="anchor" name="02a8a44f37b2e7779254db91d3f9db39"></a><!-- doxytag: member="nf_drv.h::G_CLK_DFC_NFC" ref="02a8a44f37b2e7779254db91d3f9db39" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define G_CLK_DFC_NFC&nbsp;&nbsp;&nbsp;<a class="el" href="a00061.html#7176fd8ca68947e606bfb2574f6612d1">g_clock_dfc_nfc</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00389">389</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="8fe0d788080aeed45f883b09ab26c2d4"></a><!-- doxytag: member="nf_drv.h::G_DEV_MAKER" ref="8fe0d788080aeed45f883b09ab26c2d4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define G_DEV_MAKER&nbsp;&nbsp;&nbsp;<a class="el" href="a00061.html#f1988bb3020968301cdb41696b569c0c">g_dev_maker</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00390">390</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00161.html#l00107">nfc_check_type()</a>.</p>

</div>
</div><p>
<a class="anchor" name="fe78dc9100a7cabc360db6885f1daaec"></a><!-- doxytag: member="nf_drv.h::G_DEV_ID" ref="fe78dc9100a7cabc360db6885f1daaec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define G_DEV_ID&nbsp;&nbsp;&nbsp;<a class="el" href="a00061.html#a18d841aa5fc7d3706489403ad06529a">g_dev_id</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00391">391</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00161.html#l00107">nfc_check_type()</a>.</p>

</div>
</div><p>
<a class="anchor" name="db2af259f2983b78d8cf4fac62afaf7d"></a><!-- doxytag: member="nf_drv.h::Is_nf_2k" ref="db2af259f2983b78d8cf4fac62afaf7d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Is_nf_2k          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(11==<a class="el" href="a00062.html#12e3a20682ed5032e788a57882f8256f">g_shift_page_byte</a> )</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00409">409</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01859">nf_copy()</a>, <a class="el" href="a00165.html#l00151">nf_init()</a>, <a class="el" href="a00163.html#l02117">nf_ram_2_nf()</a>, <a class="el" href="a00163.html#l00724">nf_update_spare_zone()</a>, <a class="el" href="a00163.html#l00384">nf_write_10()</a>, and <a class="el" href="a00161.html#l00353">nfc_wait_busy()</a>.</p>

</div>
</div><p>
<a class="anchor" name="dcb60d50b5764fc609ef291064f0eda3"></a><!-- doxytag: member="nf_drv.h::Is_not_nf_2k" ref="dcb60d50b5764fc609ef291064f0eda3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Is_not_nf_2k          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(11!=<a class="el" href="a00062.html#12e3a20682ed5032e788a57882f8256f">g_shift_page_byte</a> )</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00410">410</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="d1213b7a82a55a9d9addaef5cd33ee69"></a><!-- doxytag: member="nf_drv.h::Is_nf_512" ref="d1213b7a82a55a9d9addaef5cd33ee69" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Is_nf_512          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;( 9==<a class="el" href="a00062.html#12e3a20682ed5032e788a57882f8256f">g_shift_page_byte</a> )</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00411">411</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00165.html#l00151">nf_init()</a>, <a class="el" href="a00161.html#l00255">nfc_mark_bad_block()</a>, and <a class="el" href="a00161.html#l00353">nfc_wait_busy()</a>.</p>

</div>
</div><p>
<a class="anchor" name="1807031055d9d07f3229cb8d826d3ffc"></a><!-- doxytag: member="nf_drv.h::Is_not_nf_512" ref="1807031055d9d07f3229cb8d826d3ffc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Is_not_nf_512          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;( 9!=<a class="el" href="a00062.html#12e3a20682ed5032e788a57882f8256f">g_shift_page_byte</a> )</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00412">412</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01558">nf_copy_tail()</a>.</p>

</div>
</div><p>
<a class="anchor" name="0bc54ae60cf42f5064c0a90cfca229cf"></a><!-- doxytag: member="nf_drv.h::G_SHIFT_BLOCK_PAGE" ref="0bc54ae60cf42f5064c0a90cfca229cf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define G_SHIFT_BLOCK_PAGE&nbsp;&nbsp;&nbsp;<a class="el" href="a00062.html#be82d871b5e412806adb94589b4b7f2e">g_shift_block_page</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00413">413</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l00306">nf_block_2_page()</a>, <a class="el" href="a00163.html#l01295">nf_cache_fbb_flush()</a>, <a class="el" href="a00163.html#l01099">nf_cache_lut_flush()</a>, <a class="el" href="a00163.html#l01859">nf_copy()</a>, <a class="el" href="a00163.html#l00296">nf_get_sectors_number()</a>, <a class="el" href="a00165.html#l00151">nf_init()</a>, <a class="el" href="a00165.html#l00894">nf_refine_index()</a>, and <a class="el" href="a00161.html#l00255">nfc_mark_bad_block()</a>.</p>

</div>
</div><p>
<a class="anchor" name="bff7cf7d50c8eed7cb6122155aed8f3b"></a><!-- doxytag: member="nf_drv.h::G_SHIFT_PAGE_BYTE" ref="bff7cf7d50c8eed7cb6122155aed8f3b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define G_SHIFT_PAGE_BYTE&nbsp;&nbsp;&nbsp;<a class="el" href="a00062.html#12e3a20682ed5032e788a57882f8256f">g_shift_page_byte</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00414">414</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00163.html#l01859">nf_copy()</a>, <a class="el" href="a00163.html#l00296">nf_get_sectors_number()</a>, <a class="el" href="a00165.html#l00151">nf_init()</a>, <a class="el" href="a00163.html#l02186">nf_nf_2_ram()</a>, <a class="el" href="a00163.html#l02117">nf_ram_2_nf()</a>, <a class="el" href="a00163.html#l01743">nf_translate()</a>, <a class="el" href="a00163.html#l00384">nf_write_10()</a>, <a class="el" href="a00163.html#l01417">nf_write_fbb()</a>, and <a class="el" href="a00163.html#l01213">nf_write_lut()</a>.</p>

</div>
</div><p>
<a class="anchor" name="e0e77dabaa2dc4bdde63fa552f44e745"></a><!-- doxytag: member="nf_drv.h::G_OFST_BLK_STATUS" ref="e0e77dabaa2dc4bdde63fa552f44e745" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define G_OFST_BLK_STATUS&nbsp;&nbsp;&nbsp;<a class="el" href="a00062.html#b466843403d37526c75306381a6807c7">g_ofst_blk_status</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00415">415</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00165.html#l00847">nf_fetch_free_block()</a>, <a class="el" href="a00165.html#l00490">nf_rebuild()</a>, <a class="el" href="a00165.html#l00303">nf_scan()</a>, and <a class="el" href="a00161.html#l00302">nfc_erase_block()</a>.</p>

</div>
</div><p>
<a class="anchor" name="c0f49b3b35f158892b2d8695c1d1f705"></a><!-- doxytag: member="nf_drv.h::NF_SPARE_POS" ref="c0f49b3b35f158892b2d8695c1d1f705" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NF_SPARE_POS&nbsp;&nbsp;&nbsp;( Is_nf_2k() ? 2048 : 512 )          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00416">416</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00165.html#l00250">nf_cleanup_memory()</a>, <a class="el" href="a00163.html#l01859">nf_copy()</a>, <a class="el" href="a00163.html#l01558">nf_copy_tail()</a>, <a class="el" href="a00163.html#l00880">nf_open_write()</a>, <a class="el" href="a00165.html#l00490">nf_rebuild()</a>, <a class="el" href="a00165.html#l00894">nf_refine_index()</a>, <a class="el" href="a00163.html#l00724">nf_update_spare_zone()</a>, <a class="el" href="a00161.html#l00302">nfc_erase_block()</a>, <a class="el" href="a00161.html#l00255">nfc_mark_bad_block()</a>, and <a class="el" href="a00161.html#l00333">nfc_read_spare_byte()</a>.</p>

</div>
</div><p>
<a class="anchor" name="cab1cd545a6af56cc962fe3f25c72ac8"></a><!-- doxytag: member="nf_drv.h::NF_N_GOOD_STATIC_BLOCK" ref="cab1cd545a6af56cc962fe3f25c72ac8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NF_N_GOOD_STATIC_BLOCK&nbsp;&nbsp;&nbsp;( Is_nf_2k() ?   32 : 256 )          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00417">417</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="56789fa8d78f2dc5fc1c2c95d7f9fb83"></a><!-- doxytag: member="nf_drv.h::NO_NF_CONNECTED" ref="56789fa8d78f2dc5fc1c2c95d7f9fb83" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NO_NF_CONNECTED&nbsp;&nbsp;&nbsp;0xFF          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00446">446</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00161.html#l00449">nfc_detect()</a>.</p>

</div>
</div><p>
<a class="anchor" name="d86057b9c0e0585bc03215515ce28f5f"></a><!-- doxytag: member="nf_drv.h::NF_UNKNOW" ref="d86057b9c0e0585bc03215515ce28f5f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NF_UNKNOW&nbsp;&nbsp;&nbsp;0xFE          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00162.html#l00447">447</a> of file <a class="el" href="a00162.html">nf_drv.h</a>.</p>

<p>Referenced by <a class="el" href="a00161.html#l00449">nfc_detect()</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="2888ee8b7b2aad2f3e86eeff599729ca"></a><!-- doxytag: member="nf_drv.h::nf_XMCR_enable" ref="2888ee8b7b2aad2f3e86eeff599729ca" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nf_XMCR_enable           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Enable the XMCR (Extending Memory Module) of the AVR to drive the NAND Flash. 
<p>

<p>Definition at line <a class="el" href="a00161.html#l00172">172</a> of file <a class="el" href="a00161.html">nf_drv.c</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00173"></a>00173 {
<a name="l00174"></a>00174 <span class="preprocessor">#if (NF_CLE_ALE_MANUAL == ENABLED)</span>
<a name="l00175"></a>00175 <span class="preprocessor"></span>  XMCRB |= ((1&lt;&lt;XMM2) | (1&lt;&lt;XMM1) | (1&lt;&lt;XMM0));   <span class="comment">// limit XRAM interface to A7 (release PC0..7)</span>
<a name="l00176"></a>00176 <span class="preprocessor">#else</span>
<a name="l00177"></a>00177 <span class="preprocessor"></span>  XMCRB |= ((1&lt;&lt;XMM2) | (1&lt;&lt;XMM1));                <span class="comment">// limit XRAM interface to A9 (release PC2..7)</span>
<a name="l00178"></a>00178 <span class="preprocessor">#endif  </span>
<a name="l00179"></a>00179 <span class="preprocessor"></span>  XMCRA |= (1&lt;&lt;SRE);                  <span class="comment">// enable the external memory</span>
<a name="l00180"></a>00180 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="6008aafe936bca7bfc39a8db231c1e7b"></a><!-- doxytag: member="nf_drv.h::nf_XMCR_disable" ref="6008aafe936bca7bfc39a8db231c1e7b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nf_XMCR_disable           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Disable the XMCR module of the AVR, to allow access to others peripherals that may be connected on this same bus. 
<p>

<p>Definition at line <a class="el" href="a00161.html#l00185">185</a> of file <a class="el" href="a00161.html">nf_drv.c</a>.</p>

<p>References <a class="el" href="a00129.html#l00084">Nandflash0_unselect</a>, and <a class="el" href="a00129.html#l00086">Nandflash1_unselect</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00186"></a>00186 {
<a name="l00187"></a>00187   <a class="code" href="a00029.html#f432627dbe8700038462fd300e96a956">Nandflash0_unselect</a>();
<a name="l00188"></a>00188   <a class="code" href="a00029.html#889f117ea2876850629e734d16ae6582">Nandflash1_unselect</a>();
<a name="l00189"></a>00189   XMCRA &amp;= ~(1&lt;&lt;SRE);  <span class="comment">// disable the external memory</span>
<a name="l00190"></a>00190 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="2bd4c6ceb672b91624859e1f4bec04ac"></a><!-- doxytag: member="nf_drv.h::nfc_select_dev" ref="2bd4c6ceb672b91624859e1f4bec04ac" args="(U8 dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nfc_select_dev           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>dev</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00161.html#l00083">83</a> of file <a class="el" href="a00161.html">nf_drv.c</a>.</p>

<p>References <a class="el" href="a00129.html#l00083">Nandflash0_select</a>, <a class="el" href="a00129.html#l00084">Nandflash0_unselect</a>, <a class="el" href="a00129.html#l00085">Nandflash1_select</a>, and <a class="el" href="a00129.html#l00086">Nandflash1_unselect</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00084"></a>00084 {
<a name="l00085"></a>00085    <span class="keywordflow">if</span>(0==dev)
<a name="l00086"></a>00086    {
<a name="l00087"></a>00087       <a class="code" href="a00029.html#889f117ea2876850629e734d16ae6582">Nandflash1_unselect</a>();
<a name="l00088"></a>00088       <a class="code" href="a00029.html#c7d10ce399e3d07c61a6395fa801c9ef">Nandflash0_select</a>();
<a name="l00089"></a>00089    }<span class="keywordflow">else</span>{
<a name="l00090"></a>00090       <a class="code" href="a00029.html#f432627dbe8700038462fd300e96a956">Nandflash0_unselect</a>();
<a name="l00091"></a>00091       <a class="code" href="a00029.html#7219fa6191a93660329fdaa737e63bf9">Nandflash1_select</a>();
<a name="l00092"></a>00092    }
<a name="l00093"></a>00093 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ef97b996828cba45aa7ee961af28e036"></a><!-- doxytag: member="nf_drv.h::nfc_check_status" ref="ef97b996828cba45aa7ee961af28e036" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00032.html#a95502d3ad090c7564841b21b6aedcee">Status_bool</a> nfc_check_status           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check the status of the selected device. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>a status: PASS if the status is PASS; FAIL if the status is FAIL </dd></dl>

<p>Definition at line <a class="el" href="a00161.html#l00203">203</a> of file <a class="el" href="a00161.html">nf_drv.c</a>.</p>

<p>References <a class="el" href="a00133.html#l00067">FAIL</a>, <a class="el" href="a00162.html#l00106">Mcu_set_sfr_page_nfc</a>, <a class="el" href="a00162.html#l00316">NF_MASK_STATUS_FAIL</a>, <a class="el" href="a00162.html#l00109">Nfc_rd_data</a>, <a class="el" href="a00161.html#l00353">nfc_wait_busy()</a>, and <a class="el" href="a00133.html#l00066">PASS</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00204"></a>00204 {
<a name="l00205"></a>00205    <a class="code" href="a00061.html#91d42d1de5452067661da571363724c8">Mcu_set_sfr_page_nfc</a>();
<a name="l00206"></a>00206    <a class="code" href="a00060.html#479efac38d042c2f27684ec8087da576" title="Tests the true busy.">nfc_wait_busy</a>(); <span class="comment">// Send a status command and wait the completion of the last command</span>
<a name="l00207"></a>00207    <span class="keywordflow">if</span> ( (<a class="code" href="a00061.html#3a9602476f480441b912a7de88d440ed">Nfc_rd_data</a>()&amp;<a class="code" href="a00123.html#gb02ffb6b5c399ba4afebedb99aa0691d" title="Fail.">NF_MASK_STATUS_FAIL</a>)==0 ) { <span class="keywordflow">return</span> <a class="code" href="a00032.html#ba5c54fadff8d880b1945dde87496e31">PASS</a>; } <span class="comment">// I/O 0   Pass:0  Fail:1</span>
<a name="l00208"></a>00208    <span class="keywordflow">else</span>                                          { <span class="keywordflow">return</span> <a class="code" href="a00032.html#bb508ea8227673f419e9fe3a86c30d8e">FAIL</a>; }
<a name="l00209"></a>00209 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>

</div>
</div><p>
<a class="anchor" name="455d3b498da0863662f3309643c2b719"></a><!-- doxytag: member="nf_drv.h::nfc_check_type" ref="455d3b498da0863662f3309643c2b719" args="(U8 nb_dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> nfc_check_type           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>nb_dev</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Tests the Nand Flash configuration. 
<p>
The function verifies that the NF connected to device are properly declared in <a class="el" href="a00035.html">conf_nf.h</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The number of device connected and corresponding to NF identifiers. </dd></dl>

<p>Definition at line <a class="el" href="a00161.html#l00107">107</a> of file <a class="el" href="a00161.html">nf_drv.c</a>.</p>

<p>References <a class="el" href="a00162.html#l00388">G_CE_TOGGLE</a>, <a class="el" href="a00162.html#l00391">G_DEV_ID</a>, <a class="el" href="a00162.html#l00390">G_DEV_MAKER</a>, <a class="el" href="a00162.html#l00293">NF_READ_ID_CMD</a>, <a class="el" href="a00161.html#l00185">nf_XMCR_disable()</a>, <a class="el" href="a00161.html#l00172">nf_XMCR_enable()</a>, <a class="el" href="a00162.html#l00070">NFC_ACT_ASSERT_CE</a>, <a class="el" href="a00162.html#l00067">NFC_ACT_DEV_SELECT</a>, <a class="el" href="a00162.html#l00116">Nfc_action</a>, <a class="el" href="a00162.html#l00071">NFC_EXT_CELOW</a>, <a class="el" href="a00162.html#l00072">NFC_EXT_NOP</a>, <a class="el" href="a00162.html#l00117">nfc_init</a>, <a class="el" href="a00162.html#l00110">Nfc_rd_data_fetch_next</a>, <a class="el" href="a00161.html#l00152">nfc_reset_nands()</a>, <a class="el" href="a00162.html#l00112">Nfc_set_adc</a>, <a class="el" href="a00162.html#l00107">Nfc_set_cmd</a>, and <a class="el" href="a00161.html#l00353">nfc_wait_busy()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00108"></a>00108 {
<a name="l00109"></a>00109    <a class="code" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> i_dev;
<a name="l00110"></a>00110    <span class="keywordflow">if</span>( 2 &lt; nb_dev )
<a name="l00111"></a>00111       nb_dev = 2; <span class="comment">// Only 1 or 2 for this driver</span>
<a name="l00112"></a>00112 
<a name="l00113"></a>00113 <span class="preprocessor">#if (NF_XMCR_MODULE_SHARED == ENABLED)</span>
<a name="l00114"></a>00114 <span class="preprocessor"></span>   <a class="code" href="a00060.html#2888ee8b7b2aad2f3e86eeff599729ca" title="Enable the XMCR (Extending Memory Module) of the AVR to drive the NAND Flash.">nf_XMCR_enable</a>();
<a name="l00115"></a>00115 <span class="preprocessor">#endif</span>
<a name="l00116"></a>00116 <span class="preprocessor"></span>   <a class="code" href="a00061.html#0d84ba3390ed57d612c9b3cbc6c04286">nfc_init</a>(        nb_dev, 0 );
<a name="l00117"></a>00117    <a class="code" href="a00060.html#ec96d29ad256f2dfc2ebfceddf08d6a9" title="Reset all the NF devices.">nfc_reset_nands</a>( nb_dev ); <span class="comment">// Reset all the NF devices</span>
<a name="l00118"></a>00118 
<a name="l00119"></a>00119    <span class="comment">// Test NF configuration</span>
<a name="l00120"></a>00120    <span class="comment">//</span>
<a name="l00121"></a>00121    <span class="keywordflow">for</span>( i_dev=0 ; i_dev&lt;nb_dev ; i_dev++ )
<a name="l00122"></a>00122    {
<a name="l00123"></a>00123       <a class="code" href="a00061.html#929956d7ddddc291d7af26dea3159401">Nfc_action</a>( <a class="code" href="a00121.html#g7fac080c5cd6ef2e4488ccabd602dc29" title="Device selection. The number is given by the extension.">NFC_ACT_DEV_SELECT</a>, i_dev);
<a name="l00124"></a>00124       <a class="code" href="a00060.html#479efac38d042c2f27684ec8087da576" title="Tests the true busy.">nfc_wait_busy</a>();
<a name="l00125"></a>00125       <a class="code" href="a00061.html#929956d7ddddc291d7af26dea3159401">Nfc_action</a>( <a class="code" href="a00121.html#g5f95acd6c54e424dfa198abf6eedb8bd" title="Assert the CE pad of the last selected device.">NFC_ACT_ASSERT_CE</a>, <a class="code" href="a00121.html#g7fbd6608a2f650f008c0bc0bfdfe29df">NFC_EXT_CELOW</a>);
<a name="l00126"></a>00126       <a class="code" href="a00061.html#50a2c8add5233b65d9c537baf4fe5be0">Nfc_set_cmd</a>(<a class="code" href="a00122.html#g501ac26cbe74623f2be4889e79ae38d1" title="Read ID Command.">NF_READ_ID_CMD</a>);
<a name="l00127"></a>00127       <a class="code" href="a00061.html#97ed1acd5b7fe680c9516a9b282e723b">Nfc_set_adc</a>( 0 );
<a name="l00128"></a>00128       <span class="keywordflow">if</span>(( <a class="code" href="a00061.html#e7884626d24995c0dcf00140639cd6d4">Nfc_rd_data_fetch_next</a>()!=<a class="code" href="a00061.html#8fe0d788080aeed45f883b09ab26c2d4">G_DEV_MAKER</a>  )
<a name="l00129"></a>00129       || ( <a class="code" href="a00061.html#e7884626d24995c0dcf00140639cd6d4">Nfc_rd_data_fetch_next</a>()!=<a class="code" href="a00061.html#fe78dc9100a7cabc360db6885f1daaec">G_DEV_ID</a>     ))
<a name="l00130"></a>00130       {
<a name="l00131"></a>00131          <span class="keywordflow">return</span> i_dev;
<a name="l00132"></a>00132       }
<a name="l00133"></a>00133       <span class="keywordflow">if</span>( <a class="code" href="a00061.html#1294603227ee6dda5d13ee630f7b7415">G_CE_TOGGLE</a> )
<a name="l00134"></a>00134       {
<a name="l00135"></a>00135          <span class="comment">// disable CE Low</span>
<a name="l00136"></a>00136          <a class="code" href="a00061.html#929956d7ddddc291d7af26dea3159401">Nfc_action</a>( <a class="code" href="a00121.html#g5f95acd6c54e424dfa198abf6eedb8bd" title="Assert the CE pad of the last selected device.">NFC_ACT_ASSERT_CE</a>, <a class="code" href="a00121.html#g7adf6f14ec58a9b01e5cdbd9c2692c07">NFC_EXT_NOP</a>);
<a name="l00137"></a>00137       }
<a name="l00138"></a>00138    }
<a name="l00139"></a>00139 
<a name="l00140"></a>00140 <span class="preprocessor">#if (NF_XMCR_MODULE_SHARED == ENABLED)</span>
<a name="l00141"></a>00141 <span class="preprocessor"></span>   <a class="code" href="a00060.html#6008aafe936bca7bfc39a8db231c1e7b" title="Disable the XMCR module of the AVR, to allow access to others peripherals that may...">nf_XMCR_disable</a>();
<a name="l00142"></a>00142 <span class="preprocessor">#endif</span>
<a name="l00143"></a>00143 <span class="preprocessor"></span>   <span class="keywordflow">return</span> nb_dev;
<a name="l00144"></a>00144 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>

</div>
</div><p>
<a class="anchor" name="ec96d29ad256f2dfc2ebfceddf08d6a9"></a><!-- doxytag: member="nf_drv.h::nfc_reset_nands" ref="ec96d29ad256f2dfc2ebfceddf08d6a9" args="(U8 nb_dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nfc_reset_nands           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>nb_dev</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reset all the NF devices. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="a00161.html#l00152">152</a> of file <a class="el" href="a00161.html">nf_drv.c</a>.</p>

<p>References <a class="el" href="a00162.html#l00106">Mcu_set_sfr_page_nfc</a>, <a class="el" href="a00162.html#l00296">NF_RESET_CMD</a>, <a class="el" href="a00162.html#l00067">NFC_ACT_DEV_SELECT</a>, <a class="el" href="a00162.html#l00116">Nfc_action</a>, <a class="el" href="a00162.html#l00107">Nfc_set_cmd</a>, and <a class="el" href="a00161.html#l00353">nfc_wait_busy()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00153"></a>00153 {
<a name="l00154"></a>00154    <a class="code" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> i_dev;
<a name="l00155"></a>00155    <a class="code" href="a00061.html#91d42d1de5452067661da571363724c8">Mcu_set_sfr_page_nfc</a>();
<a name="l00156"></a>00156    <span class="keywordflow">for</span>( i_dev=0 ; i_dev&lt;nb_dev ; i_dev++ )
<a name="l00157"></a>00157    {
<a name="l00158"></a>00158       <a class="code" href="a00061.html#929956d7ddddc291d7af26dea3159401">Nfc_action</a>(<a class="code" href="a00121.html#g7fac080c5cd6ef2e4488ccabd602dc29" title="Device selection. The number is given by the extension.">NFC_ACT_DEV_SELECT</a>, i_dev);
<a name="l00159"></a>00159       <span class="comment">// The wait is mandatory here since the function is used to wait any</span>
<a name="l00160"></a>00160       <span class="comment">// pending internal programmation (Cache Program cmd).</span>
<a name="l00161"></a>00161       <a class="code" href="a00060.html#479efac38d042c2f27684ec8087da576" title="Tests the true busy.">nfc_wait_busy</a>();
<a name="l00162"></a>00162       <a class="code" href="a00061.html#50a2c8add5233b65d9c537baf4fe5be0">Nfc_set_cmd</a>(<a class="code" href="a00122.html#g5ff4dc8af5fcac6e451765fbb857129d" title="Reset command.">NF_RESET_CMD</a>);
<a name="l00163"></a>00163       <a class="code" href="a00060.html#479efac38d042c2f27684ec8087da576" title="Tests the true busy.">nfc_wait_busy</a>();
<a name="l00164"></a>00164    }
<a name="l00165"></a>00165 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>

</div>
</div><p>
<a class="anchor" name="a0a322a0237ff247248591adb2b10fab"></a><!-- doxytag: member="nf_drv.h::nfc_open_page_read" ref="a0a322a0237ff247248591adb2b10fab" args="(U32 page_addr, U16 byte_addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nfc_open_page_read           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00032.html#811024d35b9b8a41095b1f583b649e56">U32</a>&nbsp;</td>
          <td class="paramname"> <em>page_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html#df928e51a60dba0df29d615401cc55a8">U16</a>&nbsp;</td>
          <td class="paramname"> <em>byte_addr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Opens a page for read. 
<p>
The function will adapt the commands according to the type of flash memory. The busy is polled at the end of the function.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>page_addr</em>&nbsp;</td><td>absolute page address of the block </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>byte_addr</em>&nbsp;</td><td>relative byte address inside the page.</td></tr>
  </table>
</dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd><code><a class="el" href="a00063.html#7fa3ba35a1436fa32cc3a53d079dedc0" title="Initializes the nand flash memory driver.">nf_init()</a></code> should have been called before. The NF device should have been selected before with <code><a class="el" href="a00061.html#929956d7ddddc291d7af26dea3159401">Nfc_action(NFC_ACT_DEV_SELECT, id)</a></code>. </dd></dl>

<p>Definition at line <a class="el" href="a00161.html#l00221">221</a> of file <a class="el" href="a00161.html">nf_drv.c</a>.</p>

<p>References <a class="el" href="a00162.html#l00106">Mcu_set_sfr_page_nfc</a>, <a class="el" href="a00162.html#l00132">Nfc_open_page_read</a>, and <a class="el" href="a00161.html#l00353">nfc_wait_busy()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00222"></a>00222 {
<a name="l00223"></a>00223    <a class="code" href="a00061.html#91d42d1de5452067661da571363724c8">Mcu_set_sfr_page_nfc</a>();
<a name="l00224"></a>00224    <a class="code" href="a00060.html#479efac38d042c2f27684ec8087da576" title="Tests the true busy.">nfc_wait_busy</a>();
<a name="l00225"></a>00225    <a class="code" href="a00061.html#c8447f3352f9d30b0a9eb506378d3cc9" title="Opens a page for read.">Nfc_open_page_read</a>( page_addr, byte_addr);
<a name="l00226"></a>00226 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>

</div>
</div><p>
<a class="anchor" name="856b5ae1fade14e11da35fd5109fda8c"></a><!-- doxytag: member="nf_drv.h::nfc_open_page_write" ref="856b5ae1fade14e11da35fd5109fda8c" args="(U32 page_addr, U16 byte_addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nfc_open_page_write           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00032.html#811024d35b9b8a41095b1f583b649e56">U32</a>&nbsp;</td>
          <td class="paramname"> <em>page_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html#df928e51a60dba0df29d615401cc55a8">U16</a>&nbsp;</td>
          <td class="paramname"> <em>byte_addr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Opens a page for write. 
<p>
The function will adapt the commands according to the type of flash memory.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>page_addr</em>&nbsp;</td><td>absolute page address of the block </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>byte_addr</em>&nbsp;</td><td>relative byte address inside the page.</td></tr>
  </table>
</dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd><code><a class="el" href="a00063.html#7fa3ba35a1436fa32cc3a53d079dedc0" title="Initializes the nand flash memory driver.">nf_init()</a></code> should have been called before. The NF device should have been selected before with <code><a class="el" href="a00061.html#929956d7ddddc291d7af26dea3159401">Nfc_action(NFC_ACT_DEV_SELECT, id)</a></code>. </dd></dl>

<p>Definition at line <a class="el" href="a00161.html#l00239">239</a> of file <a class="el" href="a00161.html">nf_drv.c</a>.</p>

<p>References <a class="el" href="a00162.html#l00106">Mcu_set_sfr_page_nfc</a>, and <a class="el" href="a00162.html#l00211">Nfc_open_page_write</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00240"></a>00240 {
<a name="l00241"></a>00241    <a class="code" href="a00061.html#91d42d1de5452067661da571363724c8">Mcu_set_sfr_page_nfc</a>();
<a name="l00242"></a>00242    <a class="code" href="a00061.html#74dba9394ac015f89cb1c42131a239b5" title="Opens a page for write.">Nfc_open_page_write</a>( page_addr, byte_addr);
<a name="l00243"></a>00243 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="baa6a09d1819325c231e3735177a2179"></a><!-- doxytag: member="nf_drv.h::nfc_mark_bad_block" ref="baa6a09d1819325c231e3735177a2179" args="(U32 page_addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nfc_mark_bad_block           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00032.html#811024d35b9b8a41095b1f583b649e56">U32</a>&nbsp;</td>
          <td class="paramname"> <em>page_addr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Mark a block as 'invalid' by clearing it entirely. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>page_addr</em>&nbsp;</td><td>absolute page address of the block</td></tr>
  </table>
</dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd><code><a class="el" href="a00063.html#7fa3ba35a1436fa32cc3a53d079dedc0" title="Initializes the nand flash memory driver.">nf_init()</a></code> should have been called before. The device which holds this bad block should have been selected before with <code><a class="el" href="a00061.html#929956d7ddddc291d7af26dea3159401">Nfc_action(NFC_ACT_DEV_SELECT, id)</a></code>. </dd></dl>

<p>Definition at line <a class="el" href="a00161.html#l00255">255</a> of file <a class="el" href="a00161.html">nf_drv.c</a>.</p>

<p>References <a class="el" href="a00162.html#l00413">G_SHIFT_BLOCK_PAGE</a>, <a class="el" href="a00162.html#l00411">Is_nf_512</a>, <a class="el" href="a00162.html#l00106">Mcu_set_sfr_page_nfc</a>, <a class="el" href="a00162.html#l00299">NF_PAGE_PROGRAM_CMD</a>, <a class="el" href="a00162.html#l00416">NF_SPARE_POS</a>, <a class="el" href="a00161.html#l00302">nfc_erase_block()</a>, <a class="el" href="a00161.html#l00239">nfc_open_page_write()</a>, <a class="el" href="a00162.html#l00107">Nfc_set_cmd</a>, <a class="el" href="a00162.html#l00111">Nfc_wr_data</a>, and <a class="el" href="a00133.html#l00261">TRUE</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00256"></a>00256 {
<a name="l00257"></a>00257    <a class="code" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  n_bytes;
<a name="l00258"></a>00258    <a class="code" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  i_byte;
<a name="l00259"></a>00259    <a class="code" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  i_page;
<a name="l00260"></a>00260 
<a name="l00261"></a>00261    <a class="code" href="a00061.html#91d42d1de5452067661da571363724c8">Mcu_set_sfr_page_nfc</a>();
<a name="l00262"></a>00262 
<a name="l00263"></a>00263    n_bytes= ( <a class="code" href="a00061.html#d1213b7a82a55a9d9addaef5cd33ee69">Is_nf_512</a>() )
<a name="l00264"></a>00264    ?  16  <span class="comment">// 512B page access</span>
<a name="l00265"></a>00265    :  64  <span class="comment">// 2KB  page access</span>
<a name="l00266"></a>00266    ;
<a name="l00267"></a>00267 
<a name="l00268"></a>00268    <span class="comment">// Erasing the block is mandatory to prevent partial programming</span>
<a name="l00269"></a>00269    <span class="comment">// (some 512B NF does support partial prog, but not after a copy back command).</span>
<a name="l00270"></a>00270    <a class="code" href="a00060.html#4a7f7eed66f5eb678e4a96ae5dc32486" title="Erases a block.">nfc_erase_block</a>( page_addr, <a class="code" href="a00032.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> );
<a name="l00271"></a>00271    <span class="keywordflow">for</span> ( i_page=(<a class="code" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>)1&lt;&lt;<a class="code" href="a00061.html#0bc54ae60cf42f5064c0a90cfca229cf">G_SHIFT_BLOCK_PAGE</a> ; i_page!=0 ; i_page--, page_addr++ )
<a name="l00272"></a>00272    {
<a name="l00273"></a>00273       <a class="code" href="a00060.html#856b5ae1fade14e11da35fd5109fda8c" title="Opens a page for write.">nfc_open_page_write</a>( page_addr, <a class="code" href="a00061.html#c0f49b3b35f158892b2d8695c1d1f705">NF_SPARE_POS</a>-8 );
<a name="l00274"></a>00274       <a class="code" href="a00061.html#a2f2068df9c25227a31bce91dabfcaa2">Nfc_wr_data</a>(<span class="charliteral">'A'</span>); <a class="code" href="a00061.html#a2f2068df9c25227a31bce91dabfcaa2">Nfc_wr_data</a>(<span class="charliteral">'t'</span>);
<a name="l00275"></a>00275       <a class="code" href="a00061.html#a2f2068df9c25227a31bce91dabfcaa2">Nfc_wr_data</a>(<span class="charliteral">'m'</span>); <a class="code" href="a00061.html#a2f2068df9c25227a31bce91dabfcaa2">Nfc_wr_data</a>(<span class="charliteral">'e'</span>);
<a name="l00276"></a>00276       <a class="code" href="a00061.html#a2f2068df9c25227a31bce91dabfcaa2">Nfc_wr_data</a>(<span class="charliteral">'l'</span>); <a class="code" href="a00061.html#a2f2068df9c25227a31bce91dabfcaa2">Nfc_wr_data</a>(<span class="charliteral">' '</span>);
<a name="l00277"></a>00277       <a class="code" href="a00061.html#a2f2068df9c25227a31bce91dabfcaa2">Nfc_wr_data</a>(<span class="charliteral">' '</span>); <a class="code" href="a00061.html#a2f2068df9c25227a31bce91dabfcaa2">Nfc_wr_data</a>(<span class="charliteral">' '</span>);
<a name="l00278"></a>00278       <span class="keywordflow">for</span> ( i_byte=n_bytes ; i_byte!=0 ; i_byte-=4 )
<a name="l00279"></a>00279       {
<a name="l00280"></a>00280          <a class="code" href="a00061.html#a2f2068df9c25227a31bce91dabfcaa2">Nfc_wr_data</a>(0);
<a name="l00281"></a>00281          <a class="code" href="a00061.html#a2f2068df9c25227a31bce91dabfcaa2">Nfc_wr_data</a>(0);
<a name="l00282"></a>00282          <a class="code" href="a00061.html#a2f2068df9c25227a31bce91dabfcaa2">Nfc_wr_data</a>(0);
<a name="l00283"></a>00283          <a class="code" href="a00061.html#a2f2068df9c25227a31bce91dabfcaa2">Nfc_wr_data</a>(0);
<a name="l00284"></a>00284       }
<a name="l00285"></a>00285       <a class="code" href="a00061.html#50a2c8add5233b65d9c537baf4fe5be0">Nfc_set_cmd</a>(<a class="code" href="a00122.html#gcb67f1eda6e20910614d4ee4e5f16b94" title="Page Program command.">NF_PAGE_PROGRAM_CMD</a>); <span class="comment">// Confirm programmation</span>
<a name="l00286"></a>00286    }
<a name="l00287"></a>00287 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>

</div>
</div><p>
<a class="anchor" name="4a7f7eed66f5eb678e4a96ae5dc32486"></a><!-- doxytag: member="nf_drv.h::nfc_erase_block" ref="4a7f7eed66f5eb678e4a96ae5dc32486" args="(U32 page_addr, U8 force_erase)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nfc_erase_block           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00032.html#811024d35b9b8a41095b1f583b649e56">U32</a>&nbsp;</td>
          <td class="paramname"> <em>page_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>force_erase</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Erases a block. 
<p>
The erase will be done only if the block is not bad<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>page_addr</em>&nbsp;</td><td>absolute page address of the block </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>force_erase</em>&nbsp;</td><td>TRUE forces erasing, FALSE erases the block (if not bad)</td></tr>
  </table>
</dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd><code><a class="el" href="a00063.html#7fa3ba35a1436fa32cc3a53d079dedc0" title="Initializes the nand flash memory driver.">nf_init()</a></code> should have been called before. The device which holds the block to delete should have been selected before with <code><a class="el" href="a00061.html#929956d7ddddc291d7af26dea3159401">Nfc_action(NFC_ACT_DEV_SELECT, id)</a></code>. </dd></dl>

<p>Definition at line <a class="el" href="a00161.html#l00302">302</a> of file <a class="el" href="a00161.html">nf_drv.c</a>.</p>

<p>References <a class="el" href="a00133.html#l00260">FALSE</a>, <a class="el" href="a00162.html#l00384">G_N_ROW_CYCLES</a>, <a class="el" href="a00162.html#l00415">G_OFST_BLK_STATUS</a>, <a class="el" href="a00133.html#l00207">LSB0</a>, <a class="el" href="a00133.html#l00208">LSB1</a>, <a class="el" href="a00162.html#l00106">Mcu_set_sfr_page_nfc</a>, <a class="el" href="a00133.html#l00204">MSB1</a>, <a class="el" href="a00162.html#l00305">NF_BLOCK_ERASE_CMD</a>, <a class="el" href="a00162.html#l00306">NF_BLOCK_ERASE_CONFIRM_CMD</a>, <a class="el" href="a00162.html#l00416">NF_SPARE_POS</a>, <a class="el" href="a00161.html#l00221">nfc_open_page_read()</a>, <a class="el" href="a00162.html#l00109">Nfc_rd_data</a>, <a class="el" href="a00162.html#l00113">Nfc_set_adr</a>, <a class="el" href="a00162.html#l00107">Nfc_set_cmd</a>, <a class="el" href="a00162.html#l00114">Nfc_unprotect_all_flash</a>, and <a class="el" href="a00161.html#l00353">nfc_wait_busy()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00303"></a>00303 {
<a name="l00304"></a>00304    <a class="code" href="a00061.html#91d42d1de5452067661da571363724c8">Mcu_set_sfr_page_nfc</a>();
<a name="l00305"></a>00305    <span class="keywordflow">if</span> (<a class="code" href="a00032.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a> == force_erase)
<a name="l00306"></a>00306    {
<a name="l00307"></a>00307       <a class="code" href="a00060.html#a0a322a0237ff247248591adb2b10fab" title="Opens a page for read.">nfc_open_page_read</a>( page_addr, <a class="code" href="a00061.html#c0f49b3b35f158892b2d8695c1d1f705">NF_SPARE_POS</a> + <a class="code" href="a00061.html#e0e77dabaa2dc4bdde63fa552f44e745">G_OFST_BLK_STATUS</a> );
<a name="l00308"></a>00308       <span class="keywordflow">if</span>( (<a class="code" href="a00061.html#3a9602476f480441b912a7de88d440ed">Nfc_rd_data</a>() != 0xFF) ) <span class="keywordflow">return</span>;    <span class="comment">// The block is bad. We can not erase it</span>
<a name="l00309"></a>00309    }
<a name="l00310"></a>00310    <a class="code" href="a00060.html#479efac38d042c2f27684ec8087da576" title="Tests the true busy.">nfc_wait_busy</a>();
<a name="l00311"></a>00311    <a class="code" href="a00061.html#ac6eab632f7d904222094b7994cda033">Nfc_unprotect_all_flash</a>();                    <span class="comment">// WP may be actif due to block protection</span>
<a name="l00312"></a>00312    <a class="code" href="a00061.html#50a2c8add5233b65d9c537baf4fe5be0">Nfc_set_cmd</a> (<a class="code" href="a00122.html#gac29402cb01e7f1b3bfde047d1d578fa" title="Erase command.">NF_BLOCK_ERASE_CMD</a>);             <span class="comment">// Auto Block Erase Setup</span>
<a name="l00313"></a>00313    <a class="code" href="a00061.html#214acfde9f6acc02adb0bb06e2c28a80">Nfc_set_adr</a>( <a class="code" href="a00032.html#844ec34df36feb927dc92007af14674a">LSB0</a>(page_addr) );
<a name="l00314"></a>00314    <a class="code" href="a00061.html#214acfde9f6acc02adb0bb06e2c28a80">Nfc_set_adr</a>( <a class="code" href="a00032.html#2d1e45154b07481f0579ecc725e4edff">LSB1</a>(page_addr) );
<a name="l00315"></a>00315    <span class="keywordflow">if</span> (3 == <a class="code" href="a00061.html#26193f60c442075fc7fdf8022b04c489">G_N_ROW_CYCLES</a>)
<a name="l00316"></a>00316    {
<a name="l00317"></a>00317       <a class="code" href="a00061.html#214acfde9f6acc02adb0bb06e2c28a80">Nfc_set_adr</a>( <a class="code" href="a00032.html#3facab9f8ebf70ad6e16038465e2bedc">MSB1</a>(page_addr) );
<a name="l00318"></a>00318    }
<a name="l00319"></a>00319    <a class="code" href="a00061.html#50a2c8add5233b65d9c537baf4fe5be0">Nfc_set_cmd</a>(<a class="code" href="a00122.html#g43f524c57b3ba4c51c9f6bbf92ff90b0" title="Confirm erase command.">NF_BLOCK_ERASE_CONFIRM_CMD</a>);      <span class="comment">// Erase command</span>
<a name="l00320"></a>00320 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>

</div>
</div><p>
<a class="anchor" name="b9ba38cddb62690e76858546804fac2c"></a><!-- doxytag: member="nf_drv.h::nfc_copy_back_init" ref="b9ba38cddb62690e76858546804fac2c" args="(U32 page_addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nfc_copy_back_init           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00032.html#811024d35b9b8a41095b1f583b649e56">U32</a>&nbsp;</td>
          <td class="paramname"> <em>page_addr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prepare a copy-back session. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>page_addr</em>&nbsp;</td><td>absolute source page address of the block</td></tr>
  </table>
</dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd><code><a class="el" href="a00063.html#7fa3ba35a1436fa32cc3a53d079dedc0" title="Initializes the nand flash memory driver.">nf_init()</a></code> should have been called before. </dd></dl>

<p>Definition at line <a class="el" href="a00161.html#l00558">558</a> of file <a class="el" href="a00161.html">nf_drv.c</a>.</p>

<p>References <a class="el" href="a00162.html#l00384">G_N_ROW_CYCLES</a>, <a class="el" href="a00133.html#l00207">LSB0</a>, <a class="el" href="a00133.html#l00208">LSB1</a>, <a class="el" href="a00162.html#l00106">Mcu_set_sfr_page_nfc</a>, <a class="el" href="a00133.html#l00204">MSB1</a>, <a class="el" href="a00162.html#l00302">NF_COPY_BACK_CMD</a>, <a class="el" href="a00162.html#l00288">NF_READ_CMD</a>, <a class="el" href="a00162.html#l00112">Nfc_set_adc</a>, <a class="el" href="a00162.html#l00113">Nfc_set_adr</a>, <a class="el" href="a00162.html#l00107">Nfc_set_cmd</a>, <a class="el" href="a00162.html#l00114">Nfc_unprotect_all_flash</a>, and <a class="el" href="a00161.html#l00353">nfc_wait_busy()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00559"></a>00559 {
<a name="l00560"></a>00560    <a class="code" href="a00061.html#91d42d1de5452067661da571363724c8">Mcu_set_sfr_page_nfc</a>();
<a name="l00561"></a>00561    <a class="code" href="a00060.html#479efac38d042c2f27684ec8087da576" title="Tests the true busy.">nfc_wait_busy</a>();
<a name="l00562"></a>00562    <a class="code" href="a00061.html#ac6eab632f7d904222094b7994cda033">Nfc_unprotect_all_flash</a>(); <span class="comment">// WP may be actif due to block protection</span>
<a name="l00563"></a>00563    <a class="code" href="a00061.html#50a2c8add5233b65d9c537baf4fe5be0">Nfc_set_cmd</a>(<a class="code" href="a00122.html#geba99dc96d78f777d7977d9e635a486d" title="Read Command (2KB).">NF_READ_CMD</a>);
<a name="l00564"></a>00564    <a class="code" href="a00061.html#97ed1acd5b7fe680c9516a9b282e723b">Nfc_set_adc</a>( 0 );
<a name="l00565"></a>00565    <a class="code" href="a00061.html#97ed1acd5b7fe680c9516a9b282e723b">Nfc_set_adc</a>( 0 );
<a name="l00566"></a>00566    <a class="code" href="a00061.html#214acfde9f6acc02adb0bb06e2c28a80">Nfc_set_adr</a>( <a class="code" href="a00032.html#844ec34df36feb927dc92007af14674a">LSB0</a>(page_addr) );
<a name="l00567"></a>00567    <a class="code" href="a00061.html#214acfde9f6acc02adb0bb06e2c28a80">Nfc_set_adr</a>( <a class="code" href="a00032.html#2d1e45154b07481f0579ecc725e4edff">LSB1</a>(page_addr) );
<a name="l00568"></a>00568    <span class="keywordflow">if</span> ( 3==<a class="code" href="a00061.html#26193f60c442075fc7fdf8022b04c489">G_N_ROW_CYCLES</a> )
<a name="l00569"></a>00569    {
<a name="l00570"></a>00570       <a class="code" href="a00061.html#214acfde9f6acc02adb0bb06e2c28a80">Nfc_set_adr</a>( <a class="code" href="a00032.html#3facab9f8ebf70ad6e16038465e2bedc">MSB1</a>(page_addr) );
<a name="l00571"></a>00571    }
<a name="l00572"></a>00572    <a class="code" href="a00061.html#50a2c8add5233b65d9c537baf4fe5be0">Nfc_set_cmd</a>(<a class="code" href="a00122.html#g604b8b2d96b64df0d8a4e15dcb574abc" title="Copy-back command (2KB).">NF_COPY_BACK_CMD</a>);
<a name="l00573"></a>00573    <a class="code" href="a00060.html#479efac38d042c2f27684ec8087da576" title="Tests the true busy.">nfc_wait_busy</a>();
<a name="l00574"></a>00574 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>

</div>
</div><p>
<a class="anchor" name="f172475aee374f6742159a2bfb9b333b"></a><!-- doxytag: member="nf_drv.h::nfc_copy_back_conf" ref="f172475aee374f6742159a2bfb9b333b" args="(U32 page_addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nfc_copy_back_conf           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00032.html#811024d35b9b8a41095b1f583b649e56">U32</a>&nbsp;</td>
          <td class="paramname"> <em>page_addr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="2d5cf1d9c2243be1a253d5b0fd9147dd"></a><!-- doxytag: member="nf_drv.h::nfc_read_id" ref="2d5cf1d9c2243be1a253d5b0fd9147dd" args="(U8 read_id_cmd, U8 nf_num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00032.html#811024d35b9b8a41095b1f583b649e56">U32</a> nfc_read_id           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>read_id_cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>nf_num</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read the ID of the Nand-Flash. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>read_id_cmd</em>&nbsp;</td><td>Read_id command (NF_READ_ID_CMD, NF_READ_ID2_CMD) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nf_num</em>&nbsp;</td><td>Nand Flash number</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>: <a class="el" href="a00032.html#fb81783b8186acd7182a971048b0c6b3">MSB0(ret)</a> (MSB) is the Maker Code, <a class="el" href="a00032.html#3facab9f8ebf70ad6e16038465e2bedc">MSB1(ret)</a> is the Device Id, <a class="el" href="a00032.html#8683254be29bcfe3cf2fa646890d3942">MSB2(ret)</a> is 3rd byte returned, <a class="el" href="a00032.html#eeb8918fc580ce01d45f71863eebff90">MSB3(ret)</a> (LSB) is 4th byte returned.</dd></dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd><code><a class="el" href="a00063.html#7fa3ba35a1436fa32cc3a53d079dedc0" title="Initializes the nand flash memory driver.">nf_init()</a></code> should have been called before. </dd></dl>

<p>Definition at line <a class="el" href="a00161.html#l00397">397</a> of file <a class="el" href="a00161.html">nf_drv.c</a>.</p>

<p>References <a class="el" href="a00162.html#l00106">Mcu_set_sfr_page_nfc</a>, <a class="el" href="a00133.html#l00203">MSB0</a>, <a class="el" href="a00133.html#l00204">MSB1</a>, <a class="el" href="a00133.html#l00205">MSB2</a>, <a class="el" href="a00133.html#l00206">MSB3</a>, <a class="el" href="a00162.html#l00070">NFC_ACT_ASSERT_CE</a>, <a class="el" href="a00162.html#l00067">NFC_ACT_DEV_SELECT</a>, <a class="el" href="a00162.html#l00116">Nfc_action</a>, <a class="el" href="a00162.html#l00071">NFC_EXT_CELOW</a>, <a class="el" href="a00162.html#l00072">NFC_EXT_NOP</a>, <a class="el" href="a00162.html#l00110">Nfc_rd_data_fetch_next</a>, <a class="el" href="a00162.html#l00112">Nfc_set_adc</a>, <a class="el" href="a00162.html#l00107">Nfc_set_cmd</a>, and <a class="el" href="a00161.html#l00353">nfc_wait_busy()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00398"></a>00398 {
<a name="l00399"></a>00399    <a class="code" href="a00032.html#811024d35b9b8a41095b1f583b649e56">U32</a> ret;
<a name="l00400"></a>00400 
<a name="l00401"></a>00401    <a class="code" href="a00061.html#91d42d1de5452067661da571363724c8">Mcu_set_sfr_page_nfc</a>();
<a name="l00402"></a>00402    <a class="code" href="a00061.html#929956d7ddddc291d7af26dea3159401">Nfc_action</a>(<a class="code" href="a00121.html#g7fac080c5cd6ef2e4488ccabd602dc29" title="Device selection. The number is given by the extension.">NFC_ACT_DEV_SELECT</a>, nf_num);
<a name="l00403"></a>00403    <a class="code" href="a00060.html#479efac38d042c2f27684ec8087da576" title="Tests the true busy.">nfc_wait_busy</a>();
<a name="l00404"></a>00404    <a class="code" href="a00061.html#929956d7ddddc291d7af26dea3159401">Nfc_action</a>( <a class="code" href="a00121.html#g5f95acd6c54e424dfa198abf6eedb8bd" title="Assert the CE pad of the last selected device.">NFC_ACT_ASSERT_CE</a>, <a class="code" href="a00121.html#g7fbd6608a2f650f008c0bc0bfdfe29df">NFC_EXT_CELOW</a>);
<a name="l00405"></a>00405    <a class="code" href="a00061.html#50a2c8add5233b65d9c537baf4fe5be0">Nfc_set_cmd</a> (read_id_cmd);
<a name="l00406"></a>00406    <a class="code" href="a00061.html#97ed1acd5b7fe680c9516a9b282e723b">Nfc_set_adc</a>( 0 );
<a name="l00407"></a>00407 
<a name="l00408"></a>00408    <a class="code" href="a00032.html#fb81783b8186acd7182a971048b0c6b3">MSB0</a>(ret)= <a class="code" href="a00061.html#e7884626d24995c0dcf00140639cd6d4">Nfc_rd_data_fetch_next</a>(); <span class="comment">// Maker Code</span>
<a name="l00409"></a>00409    <a class="code" href="a00032.html#3facab9f8ebf70ad6e16038465e2bedc">MSB1</a>(ret)= <a class="code" href="a00061.html#e7884626d24995c0dcf00140639cd6d4">Nfc_rd_data_fetch_next</a>(); <span class="comment">// Device Id</span>
<a name="l00410"></a>00410    <a class="code" href="a00032.html#8683254be29bcfe3cf2fa646890d3942">MSB2</a>(ret)= <a class="code" href="a00061.html#e7884626d24995c0dcf00140639cd6d4">Nfc_rd_data_fetch_next</a>(); <span class="comment">// extra</span>
<a name="l00411"></a>00411    <a class="code" href="a00032.html#eeb8918fc580ce01d45f71863eebff90">MSB3</a>(ret)= <a class="code" href="a00061.html#e7884626d24995c0dcf00140639cd6d4">Nfc_rd_data_fetch_next</a>(); <span class="comment">// extra (Multi Plane Support)</span>
<a name="l00412"></a>00412 
<a name="l00413"></a>00413    <a class="code" href="a00061.html#929956d7ddddc291d7af26dea3159401">Nfc_action</a>( <a class="code" href="a00121.html#g5f95acd6c54e424dfa198abf6eedb8bd" title="Assert the CE pad of the last selected device.">NFC_ACT_ASSERT_CE</a>, <a class="code" href="a00121.html#g7adf6f14ec58a9b01e5cdbd9c2692c07">NFC_EXT_NOP</a>);
<a name="l00414"></a>00414    <span class="keywordflow">return</span> ret;
<a name="l00415"></a>00415 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>

</div>
</div><p>
<a class="anchor" name="257fa3cbd1bd671a438dad76c52d4365"></a><!-- doxytag: member="nf_drv.h::nfc_detect" ref="257fa3cbd1bd671a438dad76c52d4365" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> nfc_detect           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read the ID of the Nand-Flash and update the global variable. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>: nf index of listing "nf_listing" otherwise : NO_NF_CONNECTED or NF_UNKNOW </dd></dl>

<p>Definition at line <a class="el" href="a00161.html#l00449">449</a> of file <a class="el" href="a00161.html">nf_drv.c</a>.</p>

<p>References <a class="el" href="a00158.html#l00093">St_nf_conf::cache_program</a>, <a class="el" href="a00158.html#l00094">St_nf_conf::ce_toggle</a>, <a class="el" href="a00158.html#l00080">St_nf_id::conf</a>, <a class="el" href="a00158.html#l00091">St_nf_conf::copy_back_cont</a>, <a class="el" href="a00158.html#l00092">St_nf_conf::copy_back_discont</a>, <a class="el" href="a00133.html#l00260">FALSE</a>, <a class="el" href="a00061.html#7e776f74effed1ef2372393ca5cded60">g_cache_program</a>, <a class="el" href="a00061.html#4f97a48cb3ad4cb94aa358a5e5201b76">g_ce_toggle</a>, <a class="el" href="a00061.html#704f58e28283f1a6539d4ebcf52d2be8">g_copy_back_cont</a>, <a class="el" href="a00061.html#ccd4688c7bedb0ceeb4b3b4d4a78c92a">g_copy_back_discont</a>, <a class="el" href="a00061.html#a18d841aa5fc7d3706489403ad06529a">g_dev_id</a>, <a class="el" href="a00061.html#f1988bb3020968301cdb41696b569c0c">g_dev_maker</a>, <a class="el" href="a00061.html#a77d29865677c8e97bbd578eac48be3f">g_n_blocks</a>, <a class="el" href="a00061.html#4d7c730b3cd399426d94328236980166">g_n_row_cycles</a>, <a class="el" href="a00061.html#61fea0ce6f891274490f59384e7a21de">g_n_zones</a>, <a class="el" href="a00163.html#l00099">g_shift_block_page</a>, <a class="el" href="a00163.html#l00098">g_shift_page_byte</a>, <a class="el" href="a00133.html#l00203">MSB0</a>, <a class="el" href="a00133.html#l00204">MSB1</a>, <a class="el" href="a00158.html#l00086">St_nf_link_id_block::nb_zones</a>, <a class="el" href="a00058.html#638d2c27ba48ca3f1c27efdef2ee7101">nf_list_conf</a>, <a class="el" href="a00058.html#844219af07411c32e6a63199b0f6f16e">nf_list_id</a>, <a class="el" href="a00058.html#b685b78bc0e67a9bbdb1e884e4c0cdb7">nf_list_link_id_block</a>, <a class="el" href="a00162.html#l00274">NF_MAX_DEVICES</a>, <a class="el" href="a00162.html#l00293">NF_READ_ID_CMD</a>, <a class="el" href="a00162.html#l00447">NF_UNKNOW</a>, <a class="el" href="a00161.html#l00185">nf_XMCR_disable()</a>, <a class="el" href="a00161.html#l00172">nf_XMCR_enable()</a>, <a class="el" href="a00162.html#l00117">nfc_init</a>, <a class="el" href="a00161.html#l00423">nfc_nf_is_ready()</a>, <a class="el" href="a00161.html#l00397">nfc_read_id()</a>, <a class="el" href="a00161.html#l00152">nfc_reset_nands()</a>, and <a class="el" href="a00162.html#l00446">NO_NF_CONNECTED</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00450"></a>00450 {
<a name="l00451"></a>00451    <a class="code" href="a00032.html#811024d35b9b8a41095b1f583b649e56">U32</a>   u32_nf_ids;
<a name="l00452"></a>00452    <a class="code" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>    u8_i, u8_conf;
<a name="l00453"></a>00453 
<a name="l00454"></a>00454 <span class="preprocessor">#if (NF_XMCR_MODULE_SHARED == ENABLED)</span>
<a name="l00455"></a>00455 <span class="preprocessor"></span>   <a class="code" href="a00060.html#2888ee8b7b2aad2f3e86eeff599729ca" title="Enable the XMCR (Extending Memory Module) of the AVR to drive the NAND Flash.">nf_XMCR_enable</a>();
<a name="l00456"></a>00456 <span class="preprocessor">#endif</span>
<a name="l00457"></a>00457 <span class="preprocessor"></span>
<a name="l00458"></a>00458    <span class="comment">// Init the Nand Flash Controller</span>
<a name="l00459"></a>00459    <a class="code" href="a00061.html#0d84ba3390ed57d612c9b3cbc6c04286">nfc_init</a>(        <a class="code" href="a00061.html#b55f5bf79b94687e007eeacb266062fa">NF_MAX_DEVICES</a>, 0 );
<a name="l00460"></a>00460    <a class="code" href="a00060.html#ec96d29ad256f2dfc2ebfceddf08d6a9" title="Reset all the NF devices.">nfc_reset_nands</a>( <a class="code" href="a00061.html#b55f5bf79b94687e007eeacb266062fa">NF_MAX_DEVICES</a> ); <span class="comment">// Reset all the NF devices</span>
<a name="l00461"></a>00461 
<a name="l00462"></a>00462    <span class="comment">// Check the presence of device 0</span>
<a name="l00463"></a>00463    <span class="keywordflow">if</span> ( <a class="code" href="a00032.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a> == <a class="code" href="a00060.html#23257b9ef0081e82db5b955ffe5f348a" title="Check the status Ready/Busy of the Nand Flash.">nfc_nf_is_ready</a>() )
<a name="l00464"></a>00464    {
<a name="l00465"></a>00465 <span class="preprocessor">      #if (NF_XMCR_MODULE_SHARED == ENABLED)</span>
<a name="l00466"></a>00466 <span class="preprocessor"></span>         <a class="code" href="a00060.html#6008aafe936bca7bfc39a8db231c1e7b" title="Disable the XMCR module of the AVR, to allow access to others peripherals that may...">nf_XMCR_disable</a>();
<a name="l00467"></a>00467 <span class="preprocessor">      #endif</span>
<a name="l00468"></a>00468 <span class="preprocessor"></span>      <span class="keywordflow">return</span> <a class="code" href="a00061.html#56789fa8d78f2dc5fc1c2c95d7f9fb83">NO_NF_CONNECTED</a>;
<a name="l00469"></a>00469    }
<a name="l00470"></a>00470 
<a name="l00471"></a>00471    <span class="comment">// Read the Nand Flash IDs of device 0</span>
<a name="l00472"></a>00472    u32_nf_ids = <a class="code" href="a00060.html#2d5cf1d9c2243be1a253d5b0fd9147dd" title="Read the ID of the Nand-Flash.">nfc_read_id</a>( <a class="code" href="a00122.html#g501ac26cbe74623f2be4889e79ae38d1" title="Read ID Command.">NF_READ_ID_CMD</a>, 0 );
<a name="l00473"></a>00473 
<a name="l00474"></a>00474    <span class="comment">// Identify the Nand Flash (device 0)</span>
<a name="l00475"></a>00475    <span class="keywordflow">for</span>( u8_i=0 ; u8_i &lt; (<span class="keyword">sizeof</span>(<a class="code" href="a00058.html#844219af07411c32e6a63199b0f6f16e" title="List of Nand Flash 2KB.">nf_list_id</a>)/<span class="keyword">sizeof</span>(<a class="code" href="a00025.html">St_nf_id</a>)) ; u8_i++)
<a name="l00476"></a>00476    {
<a name="l00477"></a>00477       <span class="keywordflow">if</span>((nf_list_id[u8_i].manuf == <a class="code" href="a00032.html#fb81783b8186acd7182a971048b0c6b3">MSB0</a>(u32_nf_ids))
<a name="l00478"></a>00478       &amp;&amp; (nf_list_id[u8_i].dev   == <a class="code" href="a00032.html#3facab9f8ebf70ad6e16038465e2bedc">MSB1</a>(u32_nf_ids)))
<a name="l00479"></a>00479          <span class="keywordflow">break</span>; <span class="comment">// here, ID is know</span>
<a name="l00480"></a>00480    }
<a name="l00481"></a>00481    <span class="keywordflow">if</span>( u8_i == (<span class="keyword">sizeof</span>(nf_list_id)/<span class="keyword">sizeof</span>(<a class="code" href="a00025.html">St_nf_id</a>)) )
<a name="l00482"></a>00482    {
<a name="l00483"></a>00483 <span class="preprocessor">      #if (NF_XMCR_MODULE_SHARED == ENABLED)</span>
<a name="l00484"></a>00484 <span class="preprocessor"></span>         <a class="code" href="a00060.html#6008aafe936bca7bfc39a8db231c1e7b" title="Disable the XMCR module of the AVR, to allow access to others peripherals that may...">nf_XMCR_disable</a>();
<a name="l00485"></a>00485 <span class="preprocessor">      #endif</span>
<a name="l00486"></a>00486 <span class="preprocessor"></span>      <span class="keywordflow">return</span> <a class="code" href="a00061.html#d86057b9c0e0585bc03215515ce28f5f">NF_UNKNOW</a>;
<a name="l00487"></a>00487    }
<a name="l00488"></a>00488 
<a name="l00489"></a>00489    <span class="comment">// Set NF configuration parameters for initialisation and access</span>
<a name="l00490"></a>00490 <span class="preprocessor">#if (NF_GENERIC_DRIVER==TRUE)</span>
<a name="l00491"></a>00491 <span class="preprocessor"></span><span class="preprocessor">#  error Test me...</span>
<a name="l00492"></a>00492 <span class="preprocessor"></span>   <a class="code" href="a00061.html#12e3a20682ed5032e788a57882f8256f">g_shift_page_byte</a>    =;
<a name="l00493"></a>00493    <a class="code" href="a00061.html#be82d871b5e412806adb94589b4b7f2e">g_shift_block_page</a>   =;
<a name="l00494"></a>00494 <span class="preprocessor">#endif</span>
<a name="l00495"></a>00495 <span class="preprocessor"></span>
<a name="l00496"></a>00496 <span class="preprocessor">#if (NF_GENERIC_DRIVER==TRUE) || (NF_AUTO_DETECT_2KB==TRUE) ||(NF_AUTO_DETECT_512B==TRUE)</span>
<a name="l00497"></a>00497 <span class="preprocessor"></span>
<a name="l00498"></a>00498    <span class="comment">// Record info</span>
<a name="l00499"></a>00499    u8_conf     =  <a class="code" href="a00058.html#844219af07411c32e6a63199b0f6f16e" title="List of Nand Flash 2KB.">nf_list_id</a>[u8_i].<a class="code" href="a00025.html#29914bfbb66c667ad11daace4a70e28e">conf</a>;
<a name="l00500"></a>00500    <a class="code" href="a00061.html#f1988bb3020968301cdb41696b569c0c">g_dev_maker</a> =  <a class="code" href="a00032.html#fb81783b8186acd7182a971048b0c6b3">MSB0</a>(u32_nf_ids); <span class="comment">// Device maker</span>
<a name="l00501"></a>00501    <a class="code" href="a00061.html#a18d841aa5fc7d3706489403ad06529a">g_dev_id</a>    =  <a class="code" href="a00032.html#3facab9f8ebf70ad6e16038465e2bedc">MSB1</a>(u32_nf_ids); <span class="comment">// Device ID</span>
<a name="l00502"></a>00502 
<a name="l00503"></a>00503    <span class="comment">// Search the number of block of device</span>
<a name="l00504"></a>00504    <span class="keywordflow">for</span>( u8_i=0 ; u8_i &lt; (<span class="keyword">sizeof</span>(<a class="code" href="a00058.html#b685b78bc0e67a9bbdb1e884e4c0cdb7" title="List of link between device ID and number of block.">nf_list_link_id_block</a>)/<span class="keyword">sizeof</span>(<a class="code" href="a00026.html">St_nf_link_id_block</a>)) ; u8_i++)
<a name="l00505"></a>00505    {
<a name="l00506"></a>00506       <span class="keywordflow">if</span>( nf_list_link_id_block[u8_i].dev_id == g_dev_id )
<a name="l00507"></a>00507          <span class="keywordflow">break</span>; <span class="comment">// ID found</span>
<a name="l00508"></a>00508    }
<a name="l00509"></a>00509    <span class="keywordflow">if</span>( u8_i == (<span class="keyword">sizeof</span>(nf_list_link_id_block)/<span class="keyword">sizeof</span>(<a class="code" href="a00026.html">St_nf_link_id_block</a>)) )
<a name="l00510"></a>00510       <span class="keywordflow">while</span>(1);   <span class="comment">// Error in NF definition</span>
<a name="l00511"></a>00511 
<a name="l00512"></a>00512    <a class="code" href="a00061.html#61fea0ce6f891274490f59384e7a21de">g_n_zones</a>            =  <a class="code" href="a00058.html#b685b78bc0e67a9bbdb1e884e4c0cdb7" title="List of link between device ID and number of block.">nf_list_link_id_block</a>[u8_i].<a class="code" href="a00026.html#983529fa93766ff18f62aa028f07a778">nb_zones</a>;
<a name="l00513"></a>00513 <span class="preprocessor">#if (NF_AUTO_DETECT_2KB==TRUE)</span>
<a name="l00514"></a>00514 <span class="preprocessor"></span>   <span class="keywordflow">if</span>( 1 == g_n_zones )
<a name="l00515"></a>00515       <a class="code" href="a00061.html#4d7c730b3cd399426d94328236980166">g_n_row_cycles</a>    =  2;
<a name="l00516"></a>00516    <span class="keywordflow">else</span>
<a name="l00517"></a>00517       <a class="code" href="a00061.html#4d7c730b3cd399426d94328236980166">g_n_row_cycles</a>    =  3;
<a name="l00518"></a>00518 <span class="preprocessor">#endif</span>
<a name="l00519"></a>00519 <span class="preprocessor"></span><span class="preprocessor">#if (NF_AUTO_DETECT_512B==TRUE)</span>
<a name="l00520"></a>00520 <span class="preprocessor"></span>   <span class="keywordflow">if</span>( 2 &gt;= g_n_zones )
<a name="l00521"></a>00521       <a class="code" href="a00061.html#4d7c730b3cd399426d94328236980166">g_n_row_cycles</a>    =  2;
<a name="l00522"></a>00522    <span class="keywordflow">else</span>
<a name="l00523"></a>00523       <a class="code" href="a00061.html#4d7c730b3cd399426d94328236980166">g_n_row_cycles</a>    =  3;
<a name="l00524"></a>00524 <span class="preprocessor">#endif</span>
<a name="l00525"></a>00525 <span class="preprocessor"></span>   <a class="code" href="a00061.html#a77d29865677c8e97bbd578eac48be3f">g_n_blocks</a>           =  <a class="code" href="a00061.html#61fea0ce6f891274490f59384e7a21de">g_n_zones</a>*1024L;
<a name="l00526"></a>00526 
<a name="l00527"></a>00527    <a class="code" href="a00061.html#704f58e28283f1a6539d4ebcf52d2be8">g_copy_back_cont</a>     = <a class="code" href="a00058.html#638d2c27ba48ca3f1c27efdef2ee7101" title="List of configuration.">nf_list_conf</a>[u8_conf].<a class="code" href="a00024.html#5bd39ae24f25320ef2e649ee9bfbca0c">copy_back_cont</a>   ;
<a name="l00528"></a>00528    <a class="code" href="a00061.html#ccd4688c7bedb0ceeb4b3b4d4a78c92a">g_copy_back_discont</a>  = <a class="code" href="a00058.html#638d2c27ba48ca3f1c27efdef2ee7101" title="List of configuration.">nf_list_conf</a>[u8_conf].<a class="code" href="a00024.html#133767ff27f513dc1d500d75edeab3df">copy_back_discont</a>;
<a name="l00529"></a>00529    <a class="code" href="a00061.html#7e776f74effed1ef2372393ca5cded60">g_cache_program</a>      = <a class="code" href="a00058.html#638d2c27ba48ca3f1c27efdef2ee7101" title="List of configuration.">nf_list_conf</a>[u8_conf].<a class="code" href="a00024.html#51b70a77855907a1e141a420d9b0963d">cache_program</a>    ;
<a name="l00530"></a>00530    <a class="code" href="a00061.html#4f97a48cb3ad4cb94aa358a5e5201b76">g_ce_toggle</a>             = <a class="code" href="a00058.html#638d2c27ba48ca3f1c27efdef2ee7101" title="List of configuration.">nf_list_conf</a>[u8_conf].<a class="code" href="a00024.html#34e8492df4646cf29aa5b4e1b57fb266">ce_toggle</a>;
<a name="l00531"></a>00531 <span class="comment">/*   </span>
<a name="l00532"></a>00532 <span class="comment">   g_clock_dfc_nfc      = (nf_list_conf[u8_conf].dfc_nfc_clock&lt;&lt;5) &amp; MSK_DNFCKS;</span>
<a name="l00533"></a>00533 <span class="comment"></span>
<a name="l00534"></a>00534 <span class="comment">   Mcu_set_sfr_page_nfc();</span>
<a name="l00535"></a>00535 <span class="comment">   Nfc_set_read_timing((U8)nf_list_conf[u8_conf].timing_read );</span>
<a name="l00536"></a>00536 <span class="comment">   if( !g_ce_toggle )</span>
<a name="l00537"></a>00537 <span class="comment">   {</span>
<a name="l00538"></a>00538 <span class="comment">      // Enable CE low</span>
<a name="l00539"></a>00539 <span class="comment">      Nfc_action( NFC_ACT_ASSERT_CE, NFC_EXT_CELOW);</span>
<a name="l00540"></a>00540 <span class="comment">   }</span>
<a name="l00541"></a>00541 <span class="comment">*/</span>
<a name="l00542"></a>00542 <span class="preprocessor">#endif</span>
<a name="l00543"></a>00543 <span class="preprocessor"></span>
<a name="l00544"></a>00544 <span class="preprocessor">#if (NF_XMCR_MODULE_SHARED == ENABLED)</span>
<a name="l00545"></a>00545 <span class="preprocessor"></span>   <a class="code" href="a00060.html#6008aafe936bca7bfc39a8db231c1e7b" title="Disable the XMCR module of the AVR, to allow access to others peripherals that may...">nf_XMCR_disable</a>();
<a name="l00546"></a>00546 <span class="preprocessor">#endif</span>
<a name="l00547"></a>00547 <span class="preprocessor"></span>   <span class="keywordflow">return</span> u8_i;
<a name="l00548"></a>00548 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>

</div>
</div><p>
<a class="anchor" name="479efac38d042c2f27684ec8087da576"></a><!-- doxytag: member="nf_drv.h::nfc_wait_busy" ref="479efac38d042c2f27684ec8087da576" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nfc_wait_busy           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Tests the true busy. 
<p>
Note that we test twice the ready, since there is an hardware minimum requirement between the end of the busy and the first read cycle. Since the busy is not wired, the ready is tested twice. 
<p>Definition at line <a class="el" href="a00161.html#l00353">353</a> of file <a class="el" href="a00161.html">nf_drv.c</a>.</p>

<p>References <a class="el" href="a00162.html#l00387">G_CACHE_PROG</a>, <a class="el" href="a00162.html#l00409">Is_nf_2k</a>, <a class="el" href="a00162.html#l00411">Is_nf_512</a>, <a class="el" href="a00162.html#l00317">NF_MASK_STATUS_READY</a>, <a class="el" href="a00162.html#l00318">NF_MASK_STATUS_T_RDY_2KB</a>, <a class="el" href="a00162.html#l00319">NF_MASK_STATUS_T_RDY_512B</a>, <a class="el" href="a00162.html#l00308">NF_READ_STATUS_CMD</a>, <a class="el" href="a00162.html#l00108">Nfc_rd_status</a>, and <a class="el" href="a00162.html#l00107">Nfc_set_cmd</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00354"></a>00354 {
<a name="l00355"></a>00355    <span class="keyword">register</span> <span class="keywordtype">int</span> Reg;
<a name="l00356"></a>00356    <a class="code" href="a00061.html#50a2c8add5233b65d9c537baf4fe5be0">Nfc_set_cmd</a>(<a class="code" href="a00122.html#g783e21781a180e0fb6ebba10209d6833" title="Read Status command.">NF_READ_STATUS_CMD</a>);
<a name="l00357"></a>00357    Reg = <a class="code" href="a00061.html#ce78f62128d4b37a7cdf14a58fd4606a">Nfc_rd_status</a>();
<a name="l00358"></a>00358    <span class="keywordflow">if</span>( <a class="code" href="a00061.html#db2af259f2983b78d8cf4fac62afaf7d">Is_nf_2k</a>() )
<a name="l00359"></a>00359    {
<a name="l00360"></a>00360       <span class="keywordflow">if</span>( <a class="code" href="a00061.html#b4233cf2358424060e6586b4ca401213">G_CACHE_PROG</a> )
<a name="l00361"></a>00361       {
<a name="l00362"></a>00362          <span class="keywordflow">while</span>( (<a class="code" href="a00061.html#ce78f62128d4b37a7cdf14a58fd4606a">Nfc_rd_status</a>() &amp; <a class="code" href="a00123.html#g54968ef06beb1735571aa86940b5e24b" title="True Ready.">NF_MASK_STATUS_T_RDY_2KB</a> )==0 );
<a name="l00363"></a>00363          <span class="keywordflow">while</span>( (<a class="code" href="a00061.html#ce78f62128d4b37a7cdf14a58fd4606a">Nfc_rd_status</a>() &amp; <a class="code" href="a00123.html#g54968ef06beb1735571aa86940b5e24b" title="True Ready.">NF_MASK_STATUS_T_RDY_2KB</a> )==0 );
<a name="l00364"></a>00364       }
<a name="l00365"></a>00365       <span class="keywordflow">else</span>
<a name="l00366"></a>00366       {
<a name="l00367"></a>00367          <span class="keywordflow">while</span>( (<a class="code" href="a00061.html#ce78f62128d4b37a7cdf14a58fd4606a">Nfc_rd_status</a>() &amp; <a class="code" href="a00123.html#gc0f4b42f5c5e79d042e6253733a3e2e5" title="Ready.">NF_MASK_STATUS_READY</a>     )==0 );
<a name="l00368"></a>00368          <span class="keywordflow">while</span>( (<a class="code" href="a00061.html#ce78f62128d4b37a7cdf14a58fd4606a">Nfc_rd_status</a>() &amp; <a class="code" href="a00123.html#gc0f4b42f5c5e79d042e6253733a3e2e5" title="Ready.">NF_MASK_STATUS_READY</a>     )==0 );
<a name="l00369"></a>00369       }
<a name="l00370"></a>00370    }
<a name="l00371"></a>00371    <span class="keywordflow">if</span>( <a class="code" href="a00061.html#d1213b7a82a55a9d9addaef5cd33ee69">Is_nf_512</a>() )
<a name="l00372"></a>00372    {
<a name="l00373"></a>00373       <span class="keywordflow">while</span>( (<a class="code" href="a00061.html#ce78f62128d4b37a7cdf14a58fd4606a">Nfc_rd_status</a>() &amp; <a class="code" href="a00123.html#g67bd7320150ac34c7500aa2933928617" title="True Ready.">NF_MASK_STATUS_T_RDY_512B</a> )==0 );
<a name="l00374"></a>00374       <span class="keywordflow">while</span>( (<a class="code" href="a00061.html#ce78f62128d4b37a7cdf14a58fd4606a">Nfc_rd_status</a>() &amp; <a class="code" href="a00123.html#g67bd7320150ac34c7500aa2933928617" title="True Ready.">NF_MASK_STATUS_T_RDY_512B</a> )==0 );
<a name="l00375"></a>00375    }
<a name="l00376"></a>00376 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="37641716cd31a827e214a2d0ec1f5c66"></a><!-- doxytag: member="nf_drv.h::nfc_read_spare_byte" ref="37641716cd31a827e214a2d0ec1f5c66" args="(U8 _MEM_TYPE_SLOW_ *p_byte, U8 n_byte, U32 page_addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nfc_read_spare_byte           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> _MEM_TYPE_SLOW_ *&nbsp;</td>
          <td class="paramname"> <em>p_byte</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>n_byte</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html#811024d35b9b8a41095b1f583b649e56">U32</a>&nbsp;</td>
          <td class="paramname"> <em>page_addr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reads the number spare bytes specified and stores them in a array. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p_byte</em>&nbsp;</td><td>pointer on the array in which are stored the spare bytes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>n_byte</em>&nbsp;</td><td>number of spare bytes to read. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>page_addr</em>&nbsp;</td><td>absolute page address of the block.</td></tr>
  </table>
</dl>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd><code><a class="el" href="a00063.html#7fa3ba35a1436fa32cc3a53d079dedc0" title="Initializes the nand flash memory driver.">nf_init()</a></code> should have been called before. The NF device should have been selected before with <code><a class="el" href="a00061.html#929956d7ddddc291d7af26dea3159401">Nfc_action(NFC_ACT_DEV_SELECT, id)</a></code>. </dd></dl>

<p>Definition at line <a class="el" href="a00161.html#l00333">333</a> of file <a class="el" href="a00161.html">nf_drv.c</a>.</p>

<p>References <a class="el" href="a00162.html#l00106">Mcu_set_sfr_page_nfc</a>, <a class="el" href="a00162.html#l00416">NF_SPARE_POS</a>, <a class="el" href="a00161.html#l00221">nfc_open_page_read()</a>, and <a class="el" href="a00162.html#l00110">Nfc_rd_data_fetch_next</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00337"></a>00337 {
<a name="l00338"></a>00338    <a class="code" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  i;
<a name="l00339"></a>00339 
<a name="l00340"></a>00340    <a class="code" href="a00061.html#91d42d1de5452067661da571363724c8">Mcu_set_sfr_page_nfc</a>();
<a name="l00341"></a>00341    <a class="code" href="a00060.html#a0a322a0237ff247248591adb2b10fab" title="Opens a page for read.">nfc_open_page_read</a>( page_addr, <a class="code" href="a00061.html#c0f49b3b35f158892b2d8695c1d1f705">NF_SPARE_POS</a>);
<a name="l00342"></a>00342 
<a name="l00343"></a>00343    <span class="keywordflow">for</span> ( i=0 ; i!=n_byte ; i++ )
<a name="l00344"></a>00344    {
<a name="l00345"></a>00345       p_byte[i] = <a class="code" href="a00061.html#e7884626d24995c0dcf00140639cd6d4">Nfc_rd_data_fetch_next</a>();
<a name="l00346"></a>00346    }
<a name="l00347"></a>00347 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>

</div>
</div><p>
<a class="anchor" name="fc4fa239b80b2467d96653e379f2c473"></a><!-- doxytag: member="nf_drv.h::nfc_print_block" ref="fc4fa239b80b2467d96653e379f2c473" args="(U16 block_addr, U8 dev_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nfc_print_block           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00032.html#df928e51a60dba0df29d615401cc55a8">U16</a>&nbsp;</td>
          <td class="paramname"> <em>block_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>dev_id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="61fea0ce6f891274490f59384e7a21de"></a><!-- doxytag: member="nf_drv.h::g_n_zones" ref="61fea0ce6f891274490f59384e7a21de" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_MEM_TYPE_SLOW_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00064.html#61fea0ce6f891274490f59384e7a21de">g_n_zones</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Referenced by <a class="el" href="a00161.html#l00449">nfc_detect()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a77d29865677c8e97bbd578eac48be3f"></a><!-- doxytag: member="nf_drv.h::g_n_blocks" ref="a77d29865677c8e97bbd578eac48be3f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_MEM_TYPE_SLOW_ <a class="el" href="a00032.html#df928e51a60dba0df29d615401cc55a8">U16</a> <a class="el" href="a00064.html#a77d29865677c8e97bbd578eac48be3f">g_n_blocks</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Referenced by <a class="el" href="a00161.html#l00449">nfc_detect()</a>.</p>

</div>
</div><p>
<a class="anchor" name="4d7c730b3cd399426d94328236980166"></a><!-- doxytag: member="nf_drv.h::g_n_row_cycles" ref="4d7c730b3cd399426d94328236980166" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_MEM_TYPE_FAST_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00062.html#4d7c730b3cd399426d94328236980166">g_n_row_cycles</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Referenced by <a class="el" href="a00165.html#l00151">nf_init()</a>, and <a class="el" href="a00161.html#l00449">nfc_detect()</a>.</p>

</div>
</div><p>
<a class="anchor" name="704f58e28283f1a6539d4ebcf52d2be8"></a><!-- doxytag: member="nf_drv.h::g_copy_back_cont" ref="704f58e28283f1a6539d4ebcf52d2be8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_MEM_TYPE_SLOW_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00062.html#704f58e28283f1a6539d4ebcf52d2be8">g_copy_back_cont</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Referenced by <a class="el" href="a00161.html#l00449">nfc_detect()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ccd4688c7bedb0ceeb4b3b4d4a78c92a"></a><!-- doxytag: member="nf_drv.h::g_copy_back_discont" ref="ccd4688c7bedb0ceeb4b3b4d4a78c92a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_MEM_TYPE_SLOW_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00062.html#ccd4688c7bedb0ceeb4b3b4d4a78c92a">g_copy_back_discont</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Referenced by <a class="el" href="a00161.html#l00449">nfc_detect()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7e776f74effed1ef2372393ca5cded60"></a><!-- doxytag: member="nf_drv.h::g_cache_program" ref="7e776f74effed1ef2372393ca5cded60" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00032.html#253b248072cfc8bd812c69acd0046eed">Bool</a> <a class="el" href="a00061.html#7e776f74effed1ef2372393ca5cded60">g_cache_program</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Referenced by <a class="el" href="a00161.html#l00449">nfc_detect()</a>.</p>

</div>
</div><p>
<a class="anchor" name="4f97a48cb3ad4cb94aa358a5e5201b76"></a><!-- doxytag: member="nf_drv.h::g_ce_toggle" ref="4f97a48cb3ad4cb94aa358a5e5201b76" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00032.html#253b248072cfc8bd812c69acd0046eed">Bool</a> <a class="el" href="a00061.html#4f97a48cb3ad4cb94aa358a5e5201b76">g_ce_toggle</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Referenced by <a class="el" href="a00161.html#l00449">nfc_detect()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7176fd8ca68947e606bfb2574f6612d1"></a><!-- doxytag: member="nf_drv.h::g_clock_dfc_nfc" ref="7176fd8ca68947e606bfb2574f6612d1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_MEM_TYPE_SLOW_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00061.html#7176fd8ca68947e606bfb2574f6612d1">g_clock_dfc_nfc</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="f1988bb3020968301cdb41696b569c0c"></a><!-- doxytag: member="nf_drv.h::g_dev_maker" ref="f1988bb3020968301cdb41696b569c0c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_MEM_TYPE_SLOW_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00061.html#f1988bb3020968301cdb41696b569c0c">g_dev_maker</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Referenced by <a class="el" href="a00161.html#l00449">nfc_detect()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a18d841aa5fc7d3706489403ad06529a"></a><!-- doxytag: member="nf_drv.h::g_dev_id" ref="a18d841aa5fc7d3706489403ad06529a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_MEM_TYPE_SLOW_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00061.html#a18d841aa5fc7d3706489403ad06529a">g_dev_id</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Referenced by <a class="el" href="a00161.html#l00449">nfc_detect()</a>.</p>

</div>
</div><p>
<a class="anchor" name="12e3a20682ed5032e788a57882f8256f"></a><!-- doxytag: member="nf_drv.h::g_shift_page_byte" ref="12e3a20682ed5032e788a57882f8256f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_MEM_TYPE_FAST_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00062.html#12e3a20682ed5032e788a57882f8256f">g_shift_page_byte</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00163.html#l00098">98</a> of file <a class="el" href="a00163.html">nf_mngt.c</a>.</p>

<p>Referenced by <a class="el" href="a00165.html#l00151">nf_init()</a>, and <a class="el" href="a00161.html#l00449">nfc_detect()</a>.</p>

</div>
</div><p>
<a class="anchor" name="be82d871b5e412806adb94589b4b7f2e"></a><!-- doxytag: member="nf_drv.h::g_shift_block_page" ref="be82d871b5e412806adb94589b4b7f2e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_MEM_TYPE_FAST_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00062.html#be82d871b5e412806adb94589b4b7f2e">g_shift_block_page</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00163.html#l00099">99</a> of file <a class="el" href="a00163.html">nf_mngt.c</a>.</p>

<p>Referenced by <a class="el" href="a00165.html#l00151">nf_init()</a>, and <a class="el" href="a00161.html#l00449">nfc_detect()</a>.</p>

</div>
</div><p>
<a class="anchor" name="b466843403d37526c75306381a6807c7"></a><!-- doxytag: member="nf_drv.h::g_ofst_blk_status" ref="b466843403d37526c75306381a6807c7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_MEM_TYPE_SLOW_ <a class="el" href="a00032.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00062.html#b466843403d37526c75306381a6807c7">g_ofst_blk_status</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00163.html#l00100">100</a> of file <a class="el" href="a00163.html">nf_mngt.c</a>.</p>

<p>Referenced by <a class="el" href="a00165.html#l00151">nf_init()</a>.</p>

</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Sep 14 13:14:21 2009 for ATMEL by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.3 </small></address>
</body>
</html>
