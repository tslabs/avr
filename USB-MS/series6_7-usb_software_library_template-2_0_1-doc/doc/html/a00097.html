<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>ATMEL: USB host enumeration functions</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.3 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<h1>USB host enumeration functions</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00013.html">S_usb_setup_data</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Usb Setup Data.  <a href="a00013.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00005.html">S_usb_endpoint</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html">S_usb_interface</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00003.html">S_usb_device</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html">S_usb_tree</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gad4573aa9e169235fe5eb5f8f7c85975">REQUEST_TYPE_POS</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g45a4aee7d946a5199c0377a6bdadf49e">REQUEST_POS</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g3a8adef2b124cacc5c054d6e110ccb34">VALUE_HIGH_POS</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g1390f0e8645eaf55e81a1ae22a51ad56">VALUE_LOW_POS</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gd31faa32d4de78dfdb668c0a875b06c7">INDEX_HIGH_POS</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g7b1521b0b2ee9bc3e283ed99451da5a7">INDEX_LOW_POS</a>&nbsp;&nbsp;&nbsp;5</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g4ab3e4fce7a384d743e39a6b881d9cf8">LENGTH_HIGH_POS</a>&nbsp;&nbsp;&nbsp;6</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g61728ffbc9e3dba4d7b2e8bf0a1cfaf6">LENGTH_LOW_POS</a>&nbsp;&nbsp;&nbsp;7</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g964b26350b4374c37aa819c3a230814e">UNCOMPLETE_READ_POS</a>&nbsp;&nbsp;&nbsp;8</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g221210e664f9e7a620618af3ac8a5bb0">DATA_ADDR_HIGH_POS</a>&nbsp;&nbsp;&nbsp;9</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gbdf47eb8c3607e8fba42d46778a30960">DATA_ADDR_LOW_POS</a>&nbsp;&nbsp;&nbsp;10</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#ge10d045f2f8ce5ae0d44f58e71980b55">CONTROL_GOOD</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g7caf7ae0622556b4845800c2e71f9edc">CONTROL_DATA_TOGGLE</a>&nbsp;&nbsp;&nbsp;0x01</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g5bb1a2319c149ac5356545cc3eb6c956">CONTROL_DATA_PID</a>&nbsp;&nbsp;&nbsp;0x02</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g3f8a98d240492b9da7812ad5276cd492">CONTROL_PID</a>&nbsp;&nbsp;&nbsp;0x04</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g815800552f80a2b563a52162fa2f2353">CONTROL_TIMEOUT</a>&nbsp;&nbsp;&nbsp;0x08</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g3f3ac0e3660a4094fd56f43f3156f2d7">CONTROL_CRC16</a>&nbsp;&nbsp;&nbsp;0x10</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g95ad8156c0a2f5f1cbf49b793f59a432">CONTROL_STALL</a>&nbsp;&nbsp;&nbsp;0x20</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g8c115acca8e1a6e60caa1ba9db46be55">CONTROL_NO_DEVICE</a>&nbsp;&nbsp;&nbsp;0x40</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set of defines for offset in data stage.  <a href="#g8c115acca8e1a6e60caa1ba9db46be55"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gef8f318473091d0cc9da04438fa39566">OFFSET_FIELD_MAXPACKETSIZE</a>&nbsp;&nbsp;&nbsp;7</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g479f99068daae4bdb482cfdd552784d5">OFFSET_FIELD_MSB_VID</a>&nbsp;&nbsp;&nbsp;9</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g49178815cfd1251d2a1f2a71b1ed9671">OFFSET_FIELD_LSB_VID</a>&nbsp;&nbsp;&nbsp;8</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g34cf8f0f3cf9486a0abfb4de841560ba">OFFSET_FIELD_MSB_PID</a>&nbsp;&nbsp;&nbsp;11</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g97da720c93be1e61c6ff30b2cb155030">OFFSET_FIELD_LSB_PID</a>&nbsp;&nbsp;&nbsp;10</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g621c329f5149447fbdb3b0680c6ccd10">OFFSET_DESCRIPTOR_LENGHT</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#ge7f27d63cec79b20a67a17d587656790">OFFSET_FIELD_DESCRIPTOR_TYPE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g156413b2fac239190d7d7b9968cbd230">OFFSET_FIELD_TOTAL_LENGHT</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gb286e83bbe99c8fa9ccbaed4080494e4">OFFSET_FIELD_BMATTRIBUTES</a>&nbsp;&nbsp;&nbsp;7</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g61d63beabdf5375d599f3fe0dc3c325c">OFFSET_FIELD_MAXPOWER</a>&nbsp;&nbsp;&nbsp;8</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gdabc897d74efeed7b91bfeb339e3d860">OFFSET_FIELD_NB_INTERFACE</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">OFFSET for INTERFACE DESCRIPTORS.  <a href="#gdabc897d74efeed7b91bfeb339e3d860"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gf4b32f002bc9f9462126a8b0f5806c8b">OFFSET_FIELD_CLASS</a>&nbsp;&nbsp;&nbsp;5</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g6f0e71cc5be0dca91270b7cf3f065f40">OFFSET_FIELD_SUB_CLASS</a>&nbsp;&nbsp;&nbsp;6</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g82a7d75dfd8ccca877b315f5d86963bb">OFFSET_FIELD_PROTOCOL</a>&nbsp;&nbsp;&nbsp;7</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gad194a2c122879dc9ad70f30d3ccae75">OFFSET_FIELD_INTERFACE_NB</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g2240a2b7dde3ef59dcd963675adb55c3">OFFSET_FIELD_ALT</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g5345fd6ed3fef5cc80c8c0a8a4d051c5">OFFSET_FIELS_NB_OF_EP</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gb9aa68e98df84c1fd246179e6dc406fe">OFFSET_FIELD_EP_ADDR</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g12a92c851693a9a37b68133d4b3ddbdc">OFFSET_FIELD_EP_TYPE</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g6f301b2189b3f8221d09b3804b83dd17">OFFSET_FIELD_EP_SIZE</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g3ef3b57aba9185690d2256bf915a29b4">OFFSET_FIELD_EP_INTERVAL</a>&nbsp;&nbsp;&nbsp;6</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g2fef2e8ffbca0a854266e52acc014123">HOST_FALSE</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gb554978a75f075e4567322993fbba5b2">HOST_TRUE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g1abfd4820727f70fe5525f5ab24380b2">host_clear_endpoint_feature</a>(ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">host_clear_endpoint_feature  <a href="#g1abfd4820727f70fe5525f5ab24380b2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gc63b3fdd9a23f0a3233373c14aff8b1a">host_get_configuration</a>()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">host_get_configuration  <a href="#gc63b3fdd9a23f0a3233373c14aff8b1a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g63952ef930cf895514254283943bca4b">host_set_configuration</a>(cfg_nb)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">host_set_configuration  <a href="#g63952ef930cf895514254283943bca4b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g0b9371e5f72ea88822cc5f703be42594">host_set_interface</a>(interface_nb, alt_setting)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">host_set_interface  <a href="#g0b9371e5f72ea88822cc5f703be42594"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g39d6947864400a89bede881406922139">host_get_device_descriptor_uncomplete</a>()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">host_get_device_descriptor_uncomplete  <a href="#g39d6947864400a89bede881406922139"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g052ccaa771b77254bcd1ac7cf954f059">host_get_device_descriptor</a>()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">host_get_device_descriptor  <a href="#g052ccaa771b77254bcd1ac7cf954f059"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gff5d11da91589c3901bd94d80475da58">host_get_configuration_descriptor</a>()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">host_get_configuration_descriptor  <a href="#gff5d11da91589c3901bd94d80475da58"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g8d951f6dc20ccef024444a909c6303c4">host_get_descriptor_uncomplete</a>()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g558cc0232c34be1e4718301079fd1b81">host_set_address</a>(addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">host_set_address  <a href="#g558cc0232c34be1e4718301079fd1b81"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g122c81d5944f5fce5784309f82068dde">host_set_feature_remote_wakeup</a>()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">host_set_feature_remote_wakeup  <a href="#g122c81d5944f5fce5784309f82068dde"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gb412ec1aa5c059ae7ce640b636a9f22a">host_ms_get_max_lun</a>()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">host_ms_get_max_lun  <a href="#gb412ec1aa5c059ae7ce640b636a9f22a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#ge5562930eb4c259f82c782821e29e852">Get_VID</a>()&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].vid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get_VID.  <a href="#ge5562930eb4c259f82c782821e29e852"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g0d5f201dd724de2a2eca4405ba84d340">Get_PID</a>()&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].pid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get_PID.  <a href="#g0d5f201dd724de2a2eca4405ba84d340"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g81fe60867ceadf7c49ce62ee7d16a94d">Get_ep0_size</a>()&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].ep_ctrl_size)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get_ep0_size.  <a href="#g81fe60867ceadf7c49ce62ee7d16a94d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g3c38939eb969837ff96696f0cc1f753f">Get_maxpower</a>()&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].maxpower)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get_maxpower.  <a href="#g3c38939eb969837ff96696f0cc1f753f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gf09b09aa5a789fa2a0670e5aa369a6ed">Get_class</a>(s_interface)&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].interface[s_interface].class)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gb2ed6e3779435693cd2285fc27078266">Get_subclass</a>(s_interface)&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].interface[s_interface].subclass)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g8740cdc9480fc53b84436a57e9a7766b">Get_protocol</a>(s_interface)&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].interface[s_interface].protocol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gd26746d529ff9059c234b08a5c418d32">Get_ep_addr</a>(s_interface, n_ep)&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].interface[s_interface].ep[n_ep].ep_addr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g7deb3ec0b572bf5544f8e5a5d1cf7377">Get_nb_ep</a>(s_interface)&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].interface[s_interface].nb_ep)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gcc0e6fd9e11321860a3d19ff787ca969">Get_alts_s</a>(s_interface)&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].interface[s_interface].altset_nb)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g72f0036ab269f0e4cd113b8a90fdd72a">Get_interface_number</a>(s_interface)&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].interface[s_interface].interface_nb)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g8f4b3f8d91a7b9ef8467e5d39f18c95a">Get_nb_supported_interface</a>()&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].nb_interface)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g7d9ae1583917017cb361b28093ebf4a0">Is_device_self_powered</a>()&nbsp;&nbsp;&nbsp;((usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].bmattributes &amp; USB_CONFIG_ATTRIBUTES_SELFPOWERED) ? TRUE : FALSE)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g3176f470df0b208d8663f4c7fe47985f">Get_nb_device</a>()&nbsp;&nbsp;&nbsp;(usb_tree.nb_device)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gd56c43e67cb0de848497bbf6615d16e6">Is_device_supports_remote_wakeup</a>()&nbsp;&nbsp;&nbsp;((usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].bmattributes &amp; USB_CONFIG_ATTRIBUTES_REMOTEWAKEUP) ? TRUE : FALSE)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g3c090bb44c15efdc1c0416f9e5d66483">Host_select_device</a>(<a class="el" href="a00054.html#a31f47cc4db2a583d432407361bc4bfb">i</a>)&nbsp;&nbsp;&nbsp;(host_select_device(<a class="el" href="a00054.html#a31f47cc4db2a583d432407361bc4bfb">i</a>))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gff4fbef7828cd7f894032ca01044905d">Host_get_nb_device</a>()&nbsp;&nbsp;&nbsp;((<a class="el" href="a00021.html#df928e51a60dba0df29d615401cc55a8">U16</a>)(usb_tree.nb_device))</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g9ff536ca0eadd3afd14ec4c0510ad4ad">host_send_control</a> (<a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> *)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">host_send_control.  <a href="#g9ff536ca0eadd3afd14ec4c0510ad4ad"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g08394bbb55b8aad2c2a53447b8718a6e">host_check_VID_PID</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">host_check_VID_PID  <a href="#g08394bbb55b8aad2c2a53447b8718a6e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gaaf832167b2cadf3eefabf30ce58dffb">host_check_class</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">host_check_class  <a href="#gaaf832167b2cadf3eefabf30ce58dffb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gef82869f4fd052f7ca4b566937863070">host_auto_configure_endpoint</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g0d78118ad09c5d6679553d8b8b1bd84c">get_interface_descriptor_offset</a> (<a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> interface, <a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> alt)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get_interface_descriptor_offset  <a href="#g0d78118ad09c5d6679553d8b8b1bd84c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gd6950048d37767ee5e63c8c13875a1a5">host_get_hwd_pipe_nb</a> (<a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> ep_addr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g261b0b0b4570f744f6607864fb1bc1c9">init_usb_tree</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">init_usb_tree  <a href="#g261b0b0b4570f744f6607864fb1bc1c9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g9888d76252d97b57557cbff3fbe68c25">remove_device_entry</a> (<a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> device_index)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">remove_device_entry  <a href="#g9888d76252d97b57557cbff3fbe68c25"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g007939859d5a601e5edc389d47276a73">host_select_device</a> (<a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00054.html#a31f47cc4db2a583d432407361bc4bfb">i</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gc49b53eb6d4c6229a1c997c976507d6b">freeze_user_periodic_pipe</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g7ec93e06da874bd5a114a1cd779a7b7b">unfreeze_user_periodic_pipe</a> (void)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#gbebbb2ddeee8a9c633755dd528406c61">user_periodic_pipe</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00014.html">S_usb_tree</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591">usb_tree</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The main structure that represents the usb tree connected to the host controller.  <a href="#g376b533ecdeb345533c7ce71a4e61591"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00013.html">S_usb_setup_data</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g631e46fdd6514f9d83c7344a7e409744">usb_request</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">For control requests management over pipe 0.  <a href="#g631e46fdd6514f9d83c7344a7e409744"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g5054e33a7748126ca115825ed53064f7">data_stage</a> [SIZEOF_DATA_STAGE]</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage content This buffer is required to setup host enumeration process Its contains the device descriptors received.  <a href="#g5054e33a7748126ca115825ed53064f7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g8e06577b1995d6df11636db39d953f52">device_status</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00097.html#ge1e7a81e1811ede6ef97866cbb966f1d">ctrl_pipe_size</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="gad4573aa9e169235fe5eb5f8f7c85975"></a><!-- doxytag: member="usb_host_enum.h::REQUEST_TYPE_POS" ref="gad4573aa9e169235fe5eb5f8f7c85975" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REQUEST_TYPE_POS&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00134">134</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g45a4aee7d946a5199c0377a6bdadf49e"></a><!-- doxytag: member="usb_host_enum.h::REQUEST_POS" ref="g45a4aee7d946a5199c0377a6bdadf49e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REQUEST_POS&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00135">135</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g3a8adef2b124cacc5c054d6e110ccb34"></a><!-- doxytag: member="usb_host_enum.h::VALUE_HIGH_POS" ref="g3a8adef2b124cacc5c054d6e110ccb34" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VALUE_HIGH_POS&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00136">136</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g1390f0e8645eaf55e81a1ae22a51ad56"></a><!-- doxytag: member="usb_host_enum.h::VALUE_LOW_POS" ref="g1390f0e8645eaf55e81a1ae22a51ad56" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VALUE_LOW_POS&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00137">137</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="gd31faa32d4de78dfdb668c0a875b06c7"></a><!-- doxytag: member="usb_host_enum.h::INDEX_HIGH_POS" ref="gd31faa32d4de78dfdb668c0a875b06c7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INDEX_HIGH_POS&nbsp;&nbsp;&nbsp;4          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00138">138</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g7b1521b0b2ee9bc3e283ed99451da5a7"></a><!-- doxytag: member="usb_host_enum.h::INDEX_LOW_POS" ref="g7b1521b0b2ee9bc3e283ed99451da5a7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INDEX_LOW_POS&nbsp;&nbsp;&nbsp;5          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00139">139</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g4ab3e4fce7a384d743e39a6b881d9cf8"></a><!-- doxytag: member="usb_host_enum.h::LENGTH_HIGH_POS" ref="g4ab3e4fce7a384d743e39a6b881d9cf8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LENGTH_HIGH_POS&nbsp;&nbsp;&nbsp;6          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00140">140</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g61728ffbc9e3dba4d7b2e8bf0a1cfaf6"></a><!-- doxytag: member="usb_host_enum.h::LENGTH_LOW_POS" ref="g61728ffbc9e3dba4d7b2e8bf0a1cfaf6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LENGTH_LOW_POS&nbsp;&nbsp;&nbsp;7          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00141">141</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g964b26350b4374c37aa819c3a230814e"></a><!-- doxytag: member="usb_host_enum.h::UNCOMPLETE_READ_POS" ref="g964b26350b4374c37aa819c3a230814e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNCOMPLETE_READ_POS&nbsp;&nbsp;&nbsp;8          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00142">142</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g221210e664f9e7a620618af3ac8a5bb0"></a><!-- doxytag: member="usb_host_enum.h::DATA_ADDR_HIGH_POS" ref="g221210e664f9e7a620618af3ac8a5bb0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DATA_ADDR_HIGH_POS&nbsp;&nbsp;&nbsp;9          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00143">143</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="gbdf47eb8c3607e8fba42d46778a30960"></a><!-- doxytag: member="usb_host_enum.h::DATA_ADDR_LOW_POS" ref="gbdf47eb8c3607e8fba42d46778a30960" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DATA_ADDR_LOW_POS&nbsp;&nbsp;&nbsp;10          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00144">144</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="ge10d045f2f8ce5ae0d44f58e71980b55"></a><!-- doxytag: member="usb_host_enum.h::CONTROL_GOOD" ref="ge10d045f2f8ce5ae0d44f58e71980b55" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONTROL_GOOD&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00146">146</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00528">host_send_control()</a>, and <a class="el" href="a00139.html#l00226">usb_host_task()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g7caf7ae0622556b4845800c2e71f9edc"></a><!-- doxytag: member="usb_host_enum.h::CONTROL_DATA_TOGGLE" ref="g7caf7ae0622556b4845800c2e71f9edc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONTROL_DATA_TOGGLE&nbsp;&nbsp;&nbsp;0x01          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00147">147</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g5bb1a2319c149ac5356545cc3eb6c956"></a><!-- doxytag: member="usb_host_enum.h::CONTROL_DATA_PID" ref="g5bb1a2319c149ac5356545cc3eb6c956" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONTROL_DATA_PID&nbsp;&nbsp;&nbsp;0x02          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00148">148</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g3f8a98d240492b9da7812ad5276cd492"></a><!-- doxytag: member="usb_host_enum.h::CONTROL_PID" ref="g3f8a98d240492b9da7812ad5276cd492" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONTROL_PID&nbsp;&nbsp;&nbsp;0x04          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00149">149</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g815800552f80a2b563a52162fa2f2353"></a><!-- doxytag: member="usb_host_enum.h::CONTROL_TIMEOUT" ref="g815800552f80a2b563a52162fa2f2353" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONTROL_TIMEOUT&nbsp;&nbsp;&nbsp;0x08          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00150">150</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00528">host_send_control()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g3f3ac0e3660a4094fd56f43f3156f2d7"></a><!-- doxytag: member="usb_host_enum.h::CONTROL_CRC16" ref="g3f3ac0e3660a4094fd56f43f3156f2d7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONTROL_CRC16&nbsp;&nbsp;&nbsp;0x10          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00151">151</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g95ad8156c0a2f5f1cbf49b793f59a432"></a><!-- doxytag: member="usb_host_enum.h::CONTROL_STALL" ref="g95ad8156c0a2f5f1cbf49b793f59a432" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONTROL_STALL&nbsp;&nbsp;&nbsp;0x20          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00152">152</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00528">host_send_control()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g8c115acca8e1a6e60caa1ba9db46be55"></a><!-- doxytag: member="usb_host_enum.h::CONTROL_NO_DEVICE" ref="g8c115acca8e1a6e60caa1ba9db46be55" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONTROL_NO_DEVICE&nbsp;&nbsp;&nbsp;0x40          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set of defines for offset in data stage. 
<p>

<p>Definition at line <a class="el" href="a00138.html#l00153">153</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="gef8f318473091d0cc9da04438fa39566"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELD_MAXPACKETSIZE" ref="gef8f318473091d0cc9da04438fa39566" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELD_MAXPACKETSIZE&nbsp;&nbsp;&nbsp;7          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00157">157</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00139.html#l00226">usb_host_task()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g479f99068daae4bdb482cfdd552784d5"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELD_MSB_VID" ref="g479f99068daae4bdb482cfdd552784d5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELD_MSB_VID&nbsp;&nbsp;&nbsp;9          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00158">158</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00123">host_check_VID_PID()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g49178815cfd1251d2a1f2a71b1ed9671"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELD_LSB_VID" ref="g49178815cfd1251d2a1f2a71b1ed9671" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELD_LSB_VID&nbsp;&nbsp;&nbsp;8          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00159">159</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00123">host_check_VID_PID()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g34cf8f0f3cf9486a0abfb4de841560ba"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELD_MSB_PID" ref="g34cf8f0f3cf9486a0abfb4de841560ba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELD_MSB_PID&nbsp;&nbsp;&nbsp;11          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00160">160</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00123">host_check_VID_PID()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g97da720c93be1e61c6ff30b2cb155030"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELD_LSB_PID" ref="g97da720c93be1e61c6ff30b2cb155030" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELD_LSB_PID&nbsp;&nbsp;&nbsp;10          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00161">161</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00123">host_check_VID_PID()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g621c329f5149447fbdb3b0680c6ccd10"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_DESCRIPTOR_LENGHT" ref="g621c329f5149447fbdb3b0680c6ccd10" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_DESCRIPTOR_LENGHT&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00163">163</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00462">get_interface_descriptor_offset()</a>, and <a class="el" href="a00137.html#l00272">host_auto_configure_endpoint()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ge7f27d63cec79b20a67a17d587656790"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELD_DESCRIPTOR_TYPE" ref="ge7f27d63cec79b20a67a17d587656790" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELD_DESCRIPTOR_TYPE&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00164">164</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00462">get_interface_descriptor_offset()</a>, <a class="el" href="a00137.html#l00272">host_auto_configure_endpoint()</a>, and <a class="el" href="a00137.html#l00165">host_check_class()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g156413b2fac239190d7d7b9968cbd230"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELD_TOTAL_LENGHT" ref="g156413b2fac239190d7d7b9968cbd230" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELD_TOTAL_LENGHT&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00165">165</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00165">host_check_class()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gb286e83bbe99c8fa9ccbaed4080494e4"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELD_BMATTRIBUTES" ref="gb286e83bbe99c8fa9ccbaed4080494e4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELD_BMATTRIBUTES&nbsp;&nbsp;&nbsp;7          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00166">166</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00165">host_check_class()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g61d63beabdf5375d599f3fe0dc3c325c"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELD_MAXPOWER" ref="g61d63beabdf5375d599f3fe0dc3c325c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELD_MAXPOWER&nbsp;&nbsp;&nbsp;8          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00167">167</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00165">host_check_class()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gdabc897d74efeed7b91bfeb339e3d860"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELD_NB_INTERFACE" ref="gdabc897d74efeed7b91bfeb339e3d860" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELD_NB_INTERFACE&nbsp;&nbsp;&nbsp;4          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
OFFSET for INTERFACE DESCRIPTORS. 
<p>

<p>Definition at line <a class="el" href="a00138.html#l00172">172</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00462">get_interface_descriptor_offset()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gf4b32f002bc9f9462126a8b0f5806c8b"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELD_CLASS" ref="gf4b32f002bc9f9462126a8b0f5806c8b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELD_CLASS&nbsp;&nbsp;&nbsp;5          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00173">173</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00165">host_check_class()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g6f0e71cc5be0dca91270b7cf3f065f40"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELD_SUB_CLASS" ref="g6f0e71cc5be0dca91270b7cf3f065f40" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELD_SUB_CLASS&nbsp;&nbsp;&nbsp;6          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00174">174</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00165">host_check_class()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g82a7d75dfd8ccca877b315f5d86963bb"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELD_PROTOCOL" ref="g82a7d75dfd8ccca877b315f5d86963bb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELD_PROTOCOL&nbsp;&nbsp;&nbsp;7          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00175">175</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00165">host_check_class()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gad194a2c122879dc9ad70f30d3ccae75"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELD_INTERFACE_NB" ref="gad194a2c122879dc9ad70f30d3ccae75" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELD_INTERFACE_NB&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00177">177</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00462">get_interface_descriptor_offset()</a>, and <a class="el" href="a00137.html#l00165">host_check_class()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g2240a2b7dde3ef59dcd963675adb55c3"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELD_ALT" ref="g2240a2b7dde3ef59dcd963675adb55c3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELD_ALT&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00178">178</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00462">get_interface_descriptor_offset()</a>, and <a class="el" href="a00137.html#l00165">host_check_class()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g5345fd6ed3fef5cc80c8c0a8a4d051c5"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELS_NB_OF_EP" ref="g5345fd6ed3fef5cc80c8c0a8a4d051c5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELS_NB_OF_EP&nbsp;&nbsp;&nbsp;4          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00179">179</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00165">host_check_class()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gb9aa68e98df84c1fd246179e6dc406fe"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELD_EP_ADDR" ref="gb9aa68e98df84c1fd246179e6dc406fe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELD_EP_ADDR&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00181">181</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00272">host_auto_configure_endpoint()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g12a92c851693a9a37b68133d4b3ddbdc"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELD_EP_TYPE" ref="g12a92c851693a9a37b68133d4b3ddbdc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELD_EP_TYPE&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00182">182</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00272">host_auto_configure_endpoint()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g6f301b2189b3f8221d09b3804b83dd17"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELD_EP_SIZE" ref="g6f301b2189b3f8221d09b3804b83dd17" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELD_EP_SIZE&nbsp;&nbsp;&nbsp;4          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00183">183</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00272">host_auto_configure_endpoint()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g3ef3b57aba9185690d2256bf915a29b4"></a><!-- doxytag: member="usb_host_enum.h::OFFSET_FIELD_EP_INTERVAL" ref="g3ef3b57aba9185690d2256bf915a29b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFSET_FIELD_EP_INTERVAL&nbsp;&nbsp;&nbsp;6          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00184">184</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00272">host_auto_configure_endpoint()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g2fef2e8ffbca0a854266e52acc014123"></a><!-- doxytag: member="usb_host_enum.h::HOST_FALSE" ref="g2fef2e8ffbca0a854266e52acc014123" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HOST_FALSE&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00186">186</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00462">get_interface_descriptor_offset()</a>, <a class="el" href="a00137.html#l00272">host_auto_configure_endpoint()</a>, <a class="el" href="a00137.html#l00165">host_check_class()</a>, <a class="el" href="a00137.html#l00123">host_check_VID_PID()</a>, <a class="el" href="a00139.html#l00999">host_get_data_interrupt()</a>, <a class="el" href="a00139.html#l01050">host_send_data_interrupt()</a>, and <a class="el" href="a00139.html#l00226">usb_host_task()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gb554978a75f075e4567322993fbba5b2"></a><!-- doxytag: member="usb_host_enum.h::HOST_TRUE" ref="gb554978a75f075e4567322993fbba5b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HOST_TRUE&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00187">187</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00272">host_auto_configure_endpoint()</a>, <a class="el" href="a00137.html#l00165">host_check_class()</a>, <a class="el" href="a00137.html#l00123">host_check_VID_PID()</a>, <a class="el" href="a00139.html#l00999">host_get_data_interrupt()</a>, <a class="el" href="a00139.html#l01050">host_send_data_interrupt()</a>, and <a class="el" href="a00139.html#l00226">usb_host_task()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g1abfd4820727f70fe5525f5ab24380b2"></a><!-- doxytag: member="usb_host_enum.h::host_clear_endpoint_feature" ref="g1abfd4820727f70fe5525f5ab24380b2" args="(ep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define host_clear_endpoint_feature          </td>
          <td>(</td>
          <td class="paramtype">ep&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#c1c6dcd77f8f01bddb35c4d2ce69ddba" title="Characteristics of the request.">bmRequestType</a> = <a class="code" href="a00041.html#d186e8a22f21aadc58164e3233ce6cdf">USB_SETUP_SET_STAND_ENDPOINT</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#4d4f900a4f73036a9e5251cf9d756c5c" title="Specific request.">bRequest</a>      = <a class="code" href="a00041.html#df78c0facdd0e750f9fc855b265154f4">SETUP_CLEAR_FEATURE</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#8fa176d41d8412bae98d8f646cf01315" title="field that varies according to request">wValue</a>        = <a class="code" href="a00041.html#d7f317537ca8ae0f8109d7226855ea54">FEATURE_ENDPOINT_HALT</a> &lt;&lt; 8,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#dfd80e6664d550a4bd2b07e08f3032fc" title="field that varies according to request">wIndex</a>        = ep,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#67faf4f5fdd5cb4ef1c569024dca9114" title="Number of bytes to transfer if Data.">wLength</a>       = 0,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#f884800f35ae96670f6789b90544f9b3" title="1 = only one read">uncomplete_read</a> = <a class="code" href="a00021.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>,\
                                           <a class="code" href="a00097.html#g9ff536ca0eadd3afd14ec4c0510ad4ad" title="host_send_control.">host_send_control</a>(<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>))
</pre></div>host_clear_endpoint_feature 
<p>
this function send a clear endpoint request<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>U8</em>&nbsp;</td><td>ep (the target endpoint nb)</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>status </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00200">200</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="gc63b3fdd9a23f0a3233373c14aff8b1a"></a><!-- doxytag: member="usb_host_enum.h::host_get_configuration" ref="gc63b3fdd9a23f0a3233373c14aff8b1a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define host_get_configuration          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#c1c6dcd77f8f01bddb35c4d2ce69ddba" title="Characteristics of the request.">bmRequestType</a> = <a class="code" href="a00041.html#73f347072feecca9e02e62c20f87df35">USB_SETUP_GET_STAND_DEVICE</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#4d4f900a4f73036a9e5251cf9d756c5c" title="Specific request.">bRequest</a>      = <a class="code" href="a00041.html#447d1170fd40c0ef996b66f7cdfdcb76">SETUP_GET_CONFIGURATION</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#8fa176d41d8412bae98d8f646cf01315" title="field that varies according to request">wValue</a>        = 0,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#dfd80e6664d550a4bd2b07e08f3032fc" title="field that varies according to request">wIndex</a>        = 0,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#67faf4f5fdd5cb4ef1c569024dca9114" title="Number of bytes to transfer if Data.">wLength</a>       = 1,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#f884800f35ae96670f6789b90544f9b3" title="1 = only one read">uncomplete_read</a> = <a class="code" href="a00021.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>,\
                                           <a class="code" href="a00097.html#g9ff536ca0eadd3afd14ec4c0510ad4ad" title="host_send_control.">host_send_control</a>(<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>))
</pre></div>host_get_configuration 
<p>
this function send a get configuration request<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>status </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00216">216</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g63952ef930cf895514254283943bca4b"></a><!-- doxytag: member="usb_host_enum.h::host_set_configuration" ref="g63952ef930cf895514254283943bca4b" args="(cfg_nb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define host_set_configuration          </td>
          <td>(</td>
          <td class="paramtype">cfg_nb&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#c1c6dcd77f8f01bddb35c4d2ce69ddba" title="Characteristics of the request.">bmRequestType</a> = <a class="code" href="a00041.html#a9bf0d3c52977832dbaa60e83773d851">USB_SETUP_SET_STAND_DEVICE</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#4d4f900a4f73036a9e5251cf9d756c5c" title="Specific request.">bRequest</a>      = <a class="code" href="a00041.html#f22bcfbc77b003fe4da9b9d04aed4646">SETUP_SET_CONFIGURATION</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#8fa176d41d8412bae98d8f646cf01315" title="field that varies according to request">wValue</a>        = cfg_nb,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#dfd80e6664d550a4bd2b07e08f3032fc" title="field that varies according to request">wIndex</a>        = 0,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#67faf4f5fdd5cb4ef1c569024dca9114" title="Number of bytes to transfer if Data.">wLength</a>       = 0,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#f884800f35ae96670f6789b90544f9b3" title="1 = only one read">uncomplete_read</a> = <a class="code" href="a00021.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>,\
                                           <a class="code" href="a00097.html#g9ff536ca0eadd3afd14ec4c0510ad4ad" title="host_send_control.">host_send_control</a>(<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>))
</pre></div>host_set_configuration 
<p>
this function send a set configuration request<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>U8</em>&nbsp;</td><td>configuration numer to activate</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>status </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00232">232</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00139.html#l00226">usb_host_task()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g0b9371e5f72ea88822cc5f703be42594"></a><!-- doxytag: member="usb_host_enum.h::host_set_interface" ref="g0b9371e5f72ea88822cc5f703be42594" args="(interface_nb, alt_setting)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define host_set_interface          </td>
          <td>(</td>
          <td class="paramtype">interface_nb,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">alt_setting&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#c1c6dcd77f8f01bddb35c4d2ce69ddba" title="Characteristics of the request.">bmRequestType</a> = <a class="code" href="a00041.html#a9bf0d3c52977832dbaa60e83773d851">USB_SETUP_SET_STAND_DEVICE</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#4d4f900a4f73036a9e5251cf9d756c5c" title="Specific request.">bRequest</a>      = <a class="code" href="a00041.html#0210bd7dc82fe9b7e4319494f3276139">USB_SETUP_SET_STAND_INTERFACE</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#8fa176d41d8412bae98d8f646cf01315" title="field that varies according to request">wValue</a>        = alt_setting,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#dfd80e6664d550a4bd2b07e08f3032fc" title="field that varies according to request">wIndex</a>        = interface_nb,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#67faf4f5fdd5cb4ef1c569024dca9114" title="Number of bytes to transfer if Data.">wLength</a>       = 0,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#f884800f35ae96670f6789b90544f9b3" title="1 = only one read">uncomplete_read</a> = <a class="code" href="a00021.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>,\
                                           <a class="code" href="a00097.html#g9ff536ca0eadd3afd14ec4c0510ad4ad" title="host_send_control.">host_send_control</a>(<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>))
</pre></div>host_set_interface 
<p>
this function send a set interface request to specify a specific alt setting for an interface<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>U8</em>&nbsp;</td><td>interface_nb (the interface) U8 alt_setting (the alternate setting to activate)</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>status </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00250">250</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g39d6947864400a89bede881406922139"></a><!-- doxytag: member="usb_host_enum.h::host_get_device_descriptor_uncomplete" ref="g39d6947864400a89bede881406922139" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define host_get_device_descriptor_uncomplete          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#c1c6dcd77f8f01bddb35c4d2ce69ddba" title="Characteristics of the request.">bmRequestType</a> = <a class="code" href="a00041.html#73f347072feecca9e02e62c20f87df35">USB_SETUP_GET_STAND_DEVICE</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#4d4f900a4f73036a9e5251cf9d756c5c" title="Specific request.">bRequest</a>      = <a class="code" href="a00041.html#d9b811fe122c71d19f573423d9c689f5">SETUP_GET_DESCRIPTOR</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#8fa176d41d8412bae98d8f646cf01315" title="field that varies according to request">wValue</a>        = <a class="code" href="a00041.html#1f27c0f46f1fa2d799779840a42c1cea">DESCRIPTOR_DEVICE</a> &lt;&lt; 8,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#dfd80e6664d550a4bd2b07e08f3032fc" title="field that varies according to request">wIndex</a>        = 0,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#67faf4f5fdd5cb4ef1c569024dca9114" title="Number of bytes to transfer if Data.">wLength</a>       = 64,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#f884800f35ae96670f6789b90544f9b3" title="1 = only one read">uncomplete_read</a> = <a class="code" href="a00021.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,\
                                           <a class="code" href="a00097.html#g9ff536ca0eadd3afd14ec4c0510ad4ad" title="host_send_control.">host_send_control</a>(<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>))
</pre></div>host_get_device_descriptor_uncomplete 
<p>
this function send a get device desriptor request. The descriptor table received is stored in data_stage array. The received descriptors is limited to the control pipe lenght<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>status </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00271">271</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00139.html#l00226">usb_host_task()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g052ccaa771b77254bcd1ac7cf954f059"></a><!-- doxytag: member="usb_host_enum.h::host_get_device_descriptor" ref="g052ccaa771b77254bcd1ac7cf954f059" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define host_get_device_descriptor          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#c1c6dcd77f8f01bddb35c4d2ce69ddba" title="Characteristics of the request.">bmRequestType</a> = <a class="code" href="a00041.html#73f347072feecca9e02e62c20f87df35">USB_SETUP_GET_STAND_DEVICE</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#4d4f900a4f73036a9e5251cf9d756c5c" title="Specific request.">bRequest</a>      = <a class="code" href="a00041.html#d9b811fe122c71d19f573423d9c689f5">SETUP_GET_DESCRIPTOR</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#8fa176d41d8412bae98d8f646cf01315" title="field that varies according to request">wValue</a>        = <a class="code" href="a00041.html#1f27c0f46f1fa2d799779840a42c1cea">DESCRIPTOR_DEVICE</a> &lt;&lt; 8,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#dfd80e6664d550a4bd2b07e08f3032fc" title="field that varies according to request">wIndex</a>        = 0,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#67faf4f5fdd5cb4ef1c569024dca9114" title="Number of bytes to transfer if Data.">wLength</a>       = 18,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#f884800f35ae96670f6789b90544f9b3" title="1 = only one read">uncomplete_read</a> = <a class="code" href="a00021.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>,\
                                           <a class="code" href="a00097.html#g9ff536ca0eadd3afd14ec4c0510ad4ad" title="host_send_control.">host_send_control</a>(<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>))
</pre></div>host_get_device_descriptor 
<p>
this function send a get device desriptor request. The descriptor table received is stored in data_stage array.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>status </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00291">291</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00139.html#l00226">usb_host_task()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gff5d11da91589c3901bd94d80475da58"></a><!-- doxytag: member="usb_host_enum.h::host_get_configuration_descriptor" ref="gff5d11da91589c3901bd94d80475da58" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define host_get_configuration_descriptor          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#c1c6dcd77f8f01bddb35c4d2ce69ddba" title="Characteristics of the request.">bmRequestType</a> = <a class="code" href="a00041.html#73f347072feecca9e02e62c20f87df35">USB_SETUP_GET_STAND_DEVICE</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#4d4f900a4f73036a9e5251cf9d756c5c" title="Specific request.">bRequest</a>      = <a class="code" href="a00041.html#d9b811fe122c71d19f573423d9c689f5">SETUP_GET_DESCRIPTOR</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#8fa176d41d8412bae98d8f646cf01315" title="field that varies according to request">wValue</a>        = <a class="code" href="a00041.html#58d90c3f856c15b309be5464f0d0ba01">DESCRIPTOR_CONFIGURATION</a> &lt;&lt; 8,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#dfd80e6664d550a4bd2b07e08f3032fc" title="field that varies according to request">wIndex</a>        = 0,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#67faf4f5fdd5cb4ef1c569024dca9114" title="Number of bytes to transfer if Data.">wLength</a>       = 255,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#f884800f35ae96670f6789b90544f9b3" title="1 = only one read">uncomplete_read</a> = <a class="code" href="a00021.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>,\
                                           <a class="code" href="a00097.html#g9ff536ca0eadd3afd14ec4c0510ad4ad" title="host_send_control.">host_send_control</a>(<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>))
</pre></div>host_get_configuration_descriptor 
<p>
this function send a get device configuration request. The configuration descriptor table received is stored in data_stage array.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>status </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00310">310</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00139.html#l00226">usb_host_task()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g8d951f6dc20ccef024444a909c6303c4"></a><!-- doxytag: member="usb_host_enum.h::host_get_descriptor_uncomplete" ref="g8d951f6dc20ccef024444a909c6303c4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define host_get_descriptor_uncomplete          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#c1c6dcd77f8f01bddb35c4d2ce69ddba" title="Characteristics of the request.">bmRequestType</a> = <a class="code" href="a00041.html#73f347072feecca9e02e62c20f87df35">USB_SETUP_GET_STAND_DEVICE</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#4d4f900a4f73036a9e5251cf9d756c5c" title="Specific request.">bRequest</a>      = <a class="code" href="a00041.html#d9b811fe122c71d19f573423d9c689f5">SETUP_GET_DESCRIPTOR</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#8fa176d41d8412bae98d8f646cf01315" title="field that varies according to request">wValue</a>        = 0,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#dfd80e6664d550a4bd2b07e08f3032fc" title="field that varies according to request">wIndex</a>        = 0,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#67faf4f5fdd5cb4ef1c569024dca9114" title="Number of bytes to transfer if Data.">wLength</a>       = 64,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#f884800f35ae96670f6789b90544f9b3" title="1 = only one read">uncomplete_read</a> = <a class="code" href="a00021.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>,\
                                           <a class="code" href="a00097.html#g9ff536ca0eadd3afd14ec4c0510ad4ad" title="host_send_control.">host_send_control</a>(<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>))
</pre></div>
<p>Definition at line <a class="el" href="a00138.html#l00318">318</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g558cc0232c34be1e4718301079fd1b81"></a><!-- doxytag: member="usb_host_enum.h::host_set_address" ref="g558cc0232c34be1e4718301079fd1b81" args="(addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define host_set_address          </td>
          <td>(</td>
          <td class="paramtype">addr&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#c1c6dcd77f8f01bddb35c4d2ce69ddba" title="Characteristics of the request.">bmRequestType</a> = <a class="code" href="a00041.html#a9bf0d3c52977832dbaa60e83773d851">USB_SETUP_SET_STAND_DEVICE</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#4d4f900a4f73036a9e5251cf9d756c5c" title="Specific request.">bRequest</a>      = <a class="code" href="a00041.html#c26a74fd222ffda3433d534ce58d759c">SETUP_SET_ADDRESS</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#8fa176d41d8412bae98d8f646cf01315" title="field that varies according to request">wValue</a>        = (<a class="code" href="a00021.html#df928e51a60dba0df29d615401cc55a8">U16</a>)addr,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#dfd80e6664d550a4bd2b07e08f3032fc" title="field that varies according to request">wIndex</a>        = 0,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#67faf4f5fdd5cb4ef1c569024dca9114" title="Number of bytes to transfer if Data.">wLength</a>       = 0,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#f884800f35ae96670f6789b90544f9b3" title="1 = only one read">uncomplete_read</a> = <a class="code" href="a00021.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>,\
                                           <a class="code" href="a00097.html#g9ff536ca0eadd3afd14ec4c0510ad4ad" title="host_send_control.">host_send_control</a>(<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>))
</pre></div>host_set_address 
<p>
this function send a set address request.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>U8</em>&nbsp;</td><td>address (the addr attributed to the device)</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>status </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00336">336</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00139.html#l00226">usb_host_task()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g122c81d5944f5fce5784309f82068dde"></a><!-- doxytag: member="usb_host_enum.h::host_set_feature_remote_wakeup" ref="g122c81d5944f5fce5784309f82068dde" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define host_set_feature_remote_wakeup          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#c1c6dcd77f8f01bddb35c4d2ce69ddba" title="Characteristics of the request.">bmRequestType</a> = <a class="code" href="a00041.html#a9bf0d3c52977832dbaa60e83773d851">USB_SETUP_SET_STAND_DEVICE</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#4d4f900a4f73036a9e5251cf9d756c5c" title="Specific request.">bRequest</a>      = <a class="code" href="a00041.html#264898254eac3ab3d89436a9e2e68f3a">SETUP_SET_FEATURE</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#8fa176d41d8412bae98d8f646cf01315" title="field that varies according to request">wValue</a>        = 1,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#dfd80e6664d550a4bd2b07e08f3032fc" title="field that varies according to request">wIndex</a>        = 1,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#67faf4f5fdd5cb4ef1c569024dca9114" title="Number of bytes to transfer if Data.">wLength</a>       = 0,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#f884800f35ae96670f6789b90544f9b3" title="1 = only one read">uncomplete_read</a> = <a class="code" href="a00021.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>,\
                                           <a class="code" href="a00097.html#g9ff536ca0eadd3afd14ec4c0510ad4ad" title="host_send_control.">host_send_control</a>(<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>))
</pre></div>host_set_feature_remote_wakeup 
<p>
this function send a set feature device remote wakeup<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>status </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00353">353</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00139.html#l00226">usb_host_task()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gb412ec1aa5c059ae7ce640b636a9f22a"></a><!-- doxytag: member="usb_host_enum.h::host_ms_get_max_lun" ref="gb412ec1aa5c059ae7ce640b636a9f22a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define host_ms_get_max_lun          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#c1c6dcd77f8f01bddb35c4d2ce69ddba" title="Characteristics of the request.">bmRequestType</a> = <a class="code" href="a00041.html#596b1fd5c8d530208b433795c8ca7cf0">USB_SETUP_GET_CLASS_INTER</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#4d4f900a4f73036a9e5251cf9d756c5c" title="Specific request.">bRequest</a>      = <a class="code" href="a00045.html#90656d2248cbc5c351cb8ae7bb37ece4">SETUP_MASS_STORAGE_GET_MAX_LUN</a>,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#8fa176d41d8412bae98d8f646cf01315" title="field that varies according to request">wValue</a>        = 0,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#dfd80e6664d550a4bd2b07e08f3032fc" title="field that varies according to request">wIndex</a>        = 0,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#67faf4f5fdd5cb4ef1c569024dca9114" title="Number of bytes to transfer if Data.">wLength</a>       = 1,\
                                           <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#f884800f35ae96670f6789b90544f9b3" title="1 = only one read">uncomplete_read</a> = <a class="code" href="a00021.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>,\
                                           <a class="code" href="a00097.html#g9ff536ca0eadd3afd14ec4c0510ad4ad" title="host_send_control.">host_send_control</a>(<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>))
</pre></div>host_ms_get_max_lun 
<p>
this function send the mass storage specific request "get max lun"<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>status </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00372">372</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="ge5562930eb4c259f82c782821e29e852"></a><!-- doxytag: member="usb_host_enum.h::Get_VID" ref="ge5562930eb4c259f82c782821e29e852" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Get_VID          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].vid)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get_VID. 
<p>
this function returns the VID of the device connected<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>U16 (VID value) </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00390">390</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00123">host_check_VID_PID()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g0d5f201dd724de2a2eca4405ba84d340"></a><!-- doxytag: member="usb_host_enum.h::Get_PID" ref="g0d5f201dd724de2a2eca4405ba84d340" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Get_PID          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].pid)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get_PID. 
<p>
this function returns the PID of the device connected<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>U16 (PID value) </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00402">402</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00123">host_check_VID_PID()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g81fe60867ceadf7c49ce62ee7d16a94d"></a><!-- doxytag: member="usb_host_enum.h::Get_ep0_size" ref="g81fe60867ceadf7c49ce62ee7d16a94d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Get_ep0_size          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].ep_ctrl_size)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get_ep0_size. 
<p>
this function returns the size of the control endpoint for the selected device<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>U8 (EP0 size) </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00414">414</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g3c38939eb969837ff96696f0cc1f753f"></a><!-- doxytag: member="usb_host_enum.h::Get_maxpower" ref="g3c38939eb969837ff96696f0cc1f753f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Get_maxpower          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].maxpower)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get_maxpower. 
<p>
this function returns the maximum power consumption ot the connected device (unit is 2mA)<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>U8 (maxpower value) </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00426">426</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="gf09b09aa5a789fa2a0670e5aa369a6ed"></a><!-- doxytag: member="usb_host_enum.h::Get_class" ref="gf09b09aa5a789fa2a0670e5aa369a6ed" args="(s_interface)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Get_class          </td>
          <td>(</td>
          <td class="paramtype">s_interface&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].interface[s_interface].class)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
this function returns the USB class associated to the specified interface <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>U8</em>&nbsp;</td><td>s_interface: the supported interface number </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>U16 (CLASS code) </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00435">435</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00112.html#l00096">host_template_task()</a>, and <a class="el" href="a00139.html#l00226">usb_host_task()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gb2ed6e3779435693cd2285fc27078266"></a><!-- doxytag: member="usb_host_enum.h::Get_subclass" ref="gb2ed6e3779435693cd2285fc27078266" args="(s_interface)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Get_subclass          </td>
          <td>(</td>
          <td class="paramtype">s_interface&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].interface[s_interface].subclass)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
this function returns the USB subclass associated to the specified interface <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>U8</em>&nbsp;</td><td>s_interface: the supported interface number </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>U16 (SUBCLASS code) </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00444">444</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00112.html#l00096">host_template_task()</a>, and <a class="el" href="a00139.html#l00226">usb_host_task()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g8740cdc9480fc53b84436a57e9a7766b"></a><!-- doxytag: member="usb_host_enum.h::Get_protocol" ref="g8740cdc9480fc53b84436a57e9a7766b" args="(s_interface)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Get_protocol          </td>
          <td>(</td>
          <td class="paramtype">s_interface&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].interface[s_interface].protocol)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
this function returns the USB protocol associated to the specified interface <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>U8</em>&nbsp;</td><td>s_interface: the supported interface number </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>U16 (protocol code) </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00453">453</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00112.html#l00096">host_template_task()</a>, and <a class="el" href="a00139.html#l00226">usb_host_task()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gd26746d529ff9059c234b08a5c418d32"></a><!-- doxytag: member="usb_host_enum.h::Get_ep_addr" ref="gd26746d529ff9059c234b08a5c418d32" args="(s_interface, n_ep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Get_ep_addr          </td>
          <td>(</td>
          <td class="paramtype">s_interface,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">n_ep&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].interface[s_interface].ep[n_ep].ep_addr)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
this function returns endpoint address associated to the specified interface and endpoint number in this interface.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>U8</em>&nbsp;</td><td>s_interface: the supported interface number </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>U8</em>&nbsp;</td><td>n_ep: the endpoint number in this interface</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>U8 (endpoint address) </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00464">464</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00112.html#l00096">host_template_task()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g7deb3ec0b572bf5544f8e5a5d1cf7377"></a><!-- doxytag: member="usb_host_enum.h::Get_nb_ep" ref="g7deb3ec0b572bf5544f8e5a5d1cf7377" args="(s_interface)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Get_nb_ep          </td>
          <td>(</td>
          <td class="paramtype">s_interface&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].interface[s_interface].nb_ep)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
this function returns number of endpoints associated to a supported interface.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>U8</em>&nbsp;</td><td>s_interface: the supported interface number</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>U8 (number of enpoints) </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00474">474</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="gcc0e6fd9e11321860a3d19ff787ca969"></a><!-- doxytag: member="usb_host_enum.h::Get_alts_s" ref="gcc0e6fd9e11321860a3d19ff787ca969" args="(s_interface)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Get_alts_s          </td>
          <td>(</td>
          <td class="paramtype">s_interface&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].interface[s_interface].altset_nb)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
this function returns number of the alternate setting field associated to a supported interface.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>U8</em>&nbsp;</td><td>s_interface: the supported interface number</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>U8 (number of alt setting value) </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00484">484</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g72f0036ab269f0e4cd113b8a90fdd72a"></a><!-- doxytag: member="usb_host_enum.h::Get_interface_number" ref="g72f0036ab269f0e4cd113b8a90fdd72a" args="(s_interface)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Get_interface_number          </td>
          <td>(</td>
          <td class="paramtype">s_interface&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].interface[s_interface].interface_nb)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
this function returns number of the interface number associated to a supported interface.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>U8</em>&nbsp;</td><td>s_interface: the supported interface number</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>U8 (number of the interface) </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00494">494</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g8f4b3f8d91a7b9ef8467e5d39f18c95a"></a><!-- doxytag: member="usb_host_enum.h::Get_nb_supported_interface" ref="g8f4b3f8d91a7b9ef8467e5d39f18c95a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Get_nb_supported_interface          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].nb_interface)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
this function returns the number of interface supported in the device connected <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>U8 : The number of interface </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00503">503</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00112.html#l00096">host_template_task()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g7d9ae1583917017cb361b28093ebf4a0"></a><!-- doxytag: member="usb_host_enum.h::Is_device_self_powered" ref="g7d9ae1583917017cb361b28093ebf4a0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Is_device_self_powered          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;((usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].bmattributes &amp; USB_CONFIG_ATTRIBUTES_SELFPOWERED) ? TRUE : FALSE)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
this function returns true if the device connected is self powered <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>U8 : The number of interface </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00512">512</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="g3176f470df0b208d8663f4c7fe47985f"></a><!-- doxytag: member="usb_host_enum.h::Get_nb_device" ref="g3176f470df0b208d8663f4c7fe47985f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Get_nb_device          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(usb_tree.nb_device)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
this function returns the number of devices connected in the USB tree <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>U8 : The number of device </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00521">521</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="gd56c43e67cb0de848497bbf6615d16e6"></a><!-- doxytag: member="usb_host_enum.h::Is_device_supports_remote_wakeup" ref="gd56c43e67cb0de848497bbf6615d16e6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Is_device_supports_remote_wakeup          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;((usb_tree.device[<a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].bmattributes &amp; USB_CONFIG_ATTRIBUTES_REMOTEWAKEUP) ? TRUE : FALSE)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
this function returns true if the device supports remote wake_up <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>U8 : The number of interface </dd></dl>

<p>Definition at line <a class="el" href="a00138.html#l00530">530</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00139.html#l00226">usb_host_task()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g3c090bb44c15efdc1c0416f9e5d66483"></a><!-- doxytag: member="usb_host_enum.h::Host_select_device" ref="g3c090bb44c15efdc1c0416f9e5d66483" args="(i)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Host_select_device          </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00054.html#a31f47cc4db2a583d432407361bc4bfb">i</a>&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(host_select_device(<a class="el" href="a00054.html#a31f47cc4db2a583d432407361bc4bfb">i</a>))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00533">533</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00790">init_usb_tree()</a>, <a class="el" href="a00137.html#l00937">unfreeze_user_periodic_pipe()</a>, and <a class="el" href="a00139.html#l00226">usb_host_task()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gff4fbef7828cd7f894032ca01044905d"></a><!-- doxytag: member="usb_host_enum.h::Host_get_nb_device" ref="gff4fbef7828cd7f894032ca01044905d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Host_get_nb_device          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;((<a class="el" href="a00021.html#df928e51a60dba0df29d615401cc55a8">U16</a>)(usb_tree.nb_device))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00138.html#l00538">538</a> of file <a class="el" href="a00138.html">usb_host_enum.h</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g9ff536ca0eadd3afd14ec4c0510ad4ad"></a><!-- doxytag: member="usb_host_enum.h::host_send_control" ref="g9ff536ca0eadd3afd14ec4c0510ad4ad" args="(U8 *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> host_send_control           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> *&nbsp;</td>
          <td class="paramname"> <em>data_pointer</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
host_send_control. 
<p>
This function is the generic Pipe 0 management function This function is used to send and receive control request over pipe 0<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>Fix all timeout errors and disconnection in active wait loop</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>data_pointer</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>status</dd></dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd>This function uses the usb_request global structure as parameter. Thus this structure should be filled before calling this function. </dd></dl>

<p>Definition at line <a class="el" href="a00137.html#l00528">528</a> of file <a class="el" href="a00137.html">usb_host_enum.c</a>.</p>

<p>References <a class="el" href="a00138.html#l00078">S_usb_setup_data::bmRequestType</a>, <a class="el" href="a00138.html#l00079">S_usb_setup_data::bRequest</a>, <a class="el" href="a00139.html#l00174">c</a>, <a class="el" href="a00138.html#l00146">CONTROL_GOOD</a>, <a class="el" href="a00138.html#l00152">CONTROL_STALL</a>, <a class="el" href="a00138.html#l00150">CONTROL_TIMEOUT</a>, <a class="el" href="a00138.html#l00122">S_usb_tree::device</a>, <a class="el" href="a00138.html#l00107">S_usb_device::device_address</a>, <a class="el" href="a00138.html#l00108">S_usb_device::ep_ctrl_size</a>, <a class="el" href="a00148.html#l00080">EVT_HOST_SOF</a>, <a class="el" href="a00106.html#l00260">FALSE</a>, <a class="el" href="a00137.html#l00918">freeze_user_periodic_pipe()</a>, <a class="el" href="a00136.html#l00897">Host_ack_all_errors</a>, <a class="el" href="a00136.html#l00839">Host_ack_control_in</a>, <a class="el" href="a00136.html#l00837">Host_ack_control_out</a>, <a class="el" href="a00136.html#l00841">Host_ack_setup</a>, <a class="el" href="a00136.html#l00843">Host_ack_stall</a>, <a class="el" href="a00136.html#l00757">Host_configure_address</a>, <a class="el" href="a00136.html#l00880">Host_data_length_U8</a>, <a class="el" href="a00136.html#l00683">Host_disable_sof_interrupt</a>, <a class="el" href="a00136.html#l00681">Host_enable_sof_interrupt</a>, <a class="el" href="a00136.html#l00895">Host_error_status</a>, <a class="el" href="a00136.html#l00811">Host_freeze_pipe</a>, <a class="el" href="a00136.html#l00808">Host_read_byte</a>, <a class="el" href="a00136.html#l00803">Host_reset_pipe</a>, <a class="el" href="a00136.html#l00769">Host_select_pipe</a>, <a class="el" href="a00136.html#l00833">Host_send_control_in</a>, <a class="el" href="a00136.html#l00835">Host_send_control_out</a>, <a class="el" href="a00136.html#l00831">Host_send_setup</a>, <a class="el" href="a00136.html#l00782">Host_set_token_in</a>, <a class="el" href="a00136.html#l00784">Host_set_token_out</a>, <a class="el" href="a00136.html#l00780">Host_set_token_setup</a>, <a class="el" href="a00136.html#l00870">Host_standard_in_mode</a>, <a class="el" href="a00136.html#l00813">Host_unfreeze_pipe</a>, <a class="el" href="a00136.html#l00806">Host_write_byte</a>, <a class="el" href="a00136.html#l00823">Is_host_control_in_received</a>, <a class="el" href="a00136.html#l00825">Is_host_control_out_sent</a>, <a class="el" href="a00148.html#l00062">Is_host_emergency_exit</a>, <a class="el" href="a00136.html#l00829">Is_host_pipe_error</a>, <a class="el" href="a00136.html#l00821">Is_host_setup_sent</a>, <a class="el" href="a00136.html#l00684">Is_host_sof_interrupt_enabled</a>, <a class="el" href="a00136.html#l00827">Is_host_stall</a>, <a class="el" href="a00148.html#l00061">Is_not_usb_event</a>, <a class="el" href="a00106.html#l00200">LSB</a>, <a class="el" href="a00106.html#l00199">MSB</a>, <a class="el" href="a00137.html#l00107">selected_device</a>, <a class="el" href="a00106.html#l00261">TRUE</a>, <a class="el" href="a00138.html#l00083">S_usb_setup_data::uncomplete_read</a>, <a class="el" href="a00137.html#l00937">unfreeze_user_periodic_pipe()</a>, <a class="el" href="a00148.html#l00058">Usb_ack_event</a>, <a class="el" href="a00126.html#l00140">USB_SETUP_DIR_DEVICE_TO_HOST</a>, <a class="el" href="a00138.html#l00081">S_usb_setup_data::wIndex</a>, <a class="el" href="a00138.html#l00082">S_usb_setup_data::wLength</a>, and <a class="el" href="a00138.html#l00080">S_usb_setup_data::wValue</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00529"></a>00529 {
<a name="l00530"></a>00530 <a class="code" href="a00021.html#df928e51a60dba0df29d615401cc55a8">U16</a> data_length;
<a name="l00531"></a>00531 <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sav_int_sof_enable;
<a name="l00532"></a>00532 <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="code" href="a00054.html#59be438694d50e32414315b30318c0c8">c</a>;
<a name="l00533"></a>00533 <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> ep_size_max;
<a name="l00534"></a>00534 
<a name="l00535"></a>00535 <span class="preprocessor">#if (USB_HUB_SUPPORT==ENABLE &amp;&amp; USER_PERIODIC_PIPE==ENABLE)</span>
<a name="l00536"></a>00536 <span class="preprocessor"></span>   <a class="code" href="a00097.html#gc49b53eb6d4c6229a1c997c976507d6b">freeze_user_periodic_pipe</a>();
<a name="l00537"></a>00537 <span class="preprocessor">#endif </span>
<a name="l00538"></a>00538 <span class="preprocessor"></span>
<a name="l00539"></a>00539    ep_size_max = <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[<a class="code" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].<a class="code" href="a00003.html#3a3a0fe5dec6bc56306dd0dc960544de">ep_ctrl_size</a>;
<a name="l00540"></a>00540    <a class="code" href="a00093.html#ge8c9ae465df355c21bd114a7ef8805d9" title="configures the address to use for the device">Host_configure_address</a>(<a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[<a class="code" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].<a class="code" href="a00003.html#dc8182c6fd5e7935b24f88b7d8a6894c">device_address</a>);
<a name="l00541"></a>00541 
<a name="l00542"></a>00542    <a class="code" href="a00101.html#g41da8b1e05449acf720091b1cab8cb3f">Usb_ack_event</a>(<a class="code" href="a00101.html#gcfb019547665d9f082d732c37f4054ea">EVT_HOST_SOF</a>);
<a name="l00543"></a>00543    sav_int_sof_enable=<a class="code" href="a00093.html#gd9ea64840c5a27fe482dfd16d228fa0b">Is_host_sof_interrupt_enabled</a>();
<a name="l00544"></a>00544    <a class="code" href="a00093.html#g020c241f990a53f48a0dd3bd0f75d804" title="enables host start of frame interrupt">Host_enable_sof_interrupt</a>();                   <span class="comment">// SOF software detection is in interrupt sub-routine</span>
<a name="l00545"></a>00545    <span class="keywordflow">while</span>(<a class="code" href="a00101.html#g3da7d8904c82c9c2e4e8cd9f1bdb54e0">Is_not_usb_event</a>(<a class="code" href="a00101.html#gcfb019547665d9f082d732c37f4054ea">EVT_HOST_SOF</a>))          <span class="comment">// Wait 1 sof</span>
<a name="l00546"></a>00546    {
<a name="l00547"></a>00547       <span class="keywordflow">if</span> (<a class="code" href="a00101.html#gde6ea4e3f8d2a6300b584585b47a3515">Is_host_emergency_exit</a>())
<a name="l00548"></a>00548       {
<a name="l00549"></a>00549          c=<a class="code" href="a00097.html#g815800552f80a2b563a52162fa2f2353">CONTROL_TIMEOUT</a>;
<a name="l00550"></a>00550          <a class="code" href="a00094.html#g439e70e693f67491a1385aa6fe71b5f8" title="freezes the pipe">Host_freeze_pipe</a>();
<a name="l00551"></a>00551          <a class="code" href="a00094.html#ge1999d2c665183b2ebff21e98abf5303" title="resets the pipe">Host_reset_pipe</a>(0);
<a name="l00552"></a>00552          <span class="keywordflow">goto</span> host_send_control_end;
<a name="l00553"></a>00553       }
<a name="l00554"></a>00554    }
<a name="l00555"></a>00555    <span class="keywordflow">if</span> (sav_int_sof_enable==<a class="code" href="a00021.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l00556"></a>00556    {
<a name="l00557"></a>00557       <a class="code" href="a00093.html#g42cc31cb98e8ced4cc2a3fabdd8161c6" title="enables host start of frame interrupt">Host_disable_sof_interrupt</a>();
<a name="l00558"></a>00558    }
<a name="l00559"></a>00559 
<a name="l00560"></a>00560    <a class="code" href="a00094.html#g9cef84edfb59cc5963bebddf55f367f6" title="selects pipe for CPU interface">Host_select_pipe</a>(0);
<a name="l00561"></a>00561    <a class="code" href="a00094.html#gd745fd61550509d96f2d31fef33bffb7" title="sets SETUP token">Host_set_token_setup</a>();
<a name="l00562"></a>00562    <a class="code" href="a00094.html#g0993eaeb5238abb6d27e047784668066" title="acks setup">Host_ack_setup</a>();
<a name="l00563"></a>00563    <a class="code" href="a00094.html#gd8a6bcf6161fa98b5f79a933cbe03094" title="un-freezees the pipe">Host_unfreeze_pipe</a>();
<a name="l00564"></a>00564   <span class="comment">// Build the setup request fields</span>
<a name="l00565"></a>00565    <a class="code" href="a00094.html#g19fa8b41fa04f581cb7dea7de778cd36" title="writes a byte into the pipe FIFO">Host_write_byte</a>(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#c1c6dcd77f8f01bddb35c4d2ce69ddba" title="Characteristics of the request.">bmRequestType</a>);
<a name="l00566"></a>00566    <a class="code" href="a00094.html#g19fa8b41fa04f581cb7dea7de778cd36" title="writes a byte into the pipe FIFO">Host_write_byte</a>(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#4d4f900a4f73036a9e5251cf9d756c5c" title="Specific request.">bRequest</a>);
<a name="l00567"></a>00567    <a class="code" href="a00094.html#g19fa8b41fa04f581cb7dea7de778cd36" title="writes a byte into the pipe FIFO">Host_write_byte</a>(<a class="code" href="a00021.html#bd2fa7b756342ae251e3a7a66670c2fe">LSB</a>(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#8fa176d41d8412bae98d8f646cf01315" title="field that varies according to request">wValue</a>));
<a name="l00568"></a>00568    <a class="code" href="a00094.html#g19fa8b41fa04f581cb7dea7de778cd36" title="writes a byte into the pipe FIFO">Host_write_byte</a>(<a class="code" href="a00021.html#bee1b74eceef5a0cf26efbf3ff87ccbf">MSB</a>(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#8fa176d41d8412bae98d8f646cf01315" title="field that varies according to request">wValue</a>));
<a name="l00569"></a>00569    <a class="code" href="a00094.html#g19fa8b41fa04f581cb7dea7de778cd36" title="writes a byte into the pipe FIFO">Host_write_byte</a>(<a class="code" href="a00021.html#bd2fa7b756342ae251e3a7a66670c2fe">LSB</a>(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#dfd80e6664d550a4bd2b07e08f3032fc" title="field that varies according to request">wIndex</a>));
<a name="l00570"></a>00570    <a class="code" href="a00094.html#g19fa8b41fa04f581cb7dea7de778cd36" title="writes a byte into the pipe FIFO">Host_write_byte</a>(<a class="code" href="a00021.html#bee1b74eceef5a0cf26efbf3ff87ccbf">MSB</a>(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#dfd80e6664d550a4bd2b07e08f3032fc" title="field that varies according to request">wIndex</a>));
<a name="l00571"></a>00571    <a class="code" href="a00094.html#g19fa8b41fa04f581cb7dea7de778cd36" title="writes a byte into the pipe FIFO">Host_write_byte</a>(<a class="code" href="a00021.html#bd2fa7b756342ae251e3a7a66670c2fe">LSB</a>(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#67faf4f5fdd5cb4ef1c569024dca9114" title="Number of bytes to transfer if Data.">wLength</a>));
<a name="l00572"></a>00572    <a class="code" href="a00094.html#g19fa8b41fa04f581cb7dea7de778cd36" title="writes a byte into the pipe FIFO">Host_write_byte</a>(<a class="code" href="a00021.html#bee1b74eceef5a0cf26efbf3ff87ccbf">MSB</a>(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#67faf4f5fdd5cb4ef1c569024dca9114" title="Number of bytes to transfer if Data.">wLength</a>));
<a name="l00573"></a>00573 
<a name="l00574"></a>00574    <a class="code" href="a00094.html#g5d1987ef47cc807905c344b57d16e0a8" title="sends a setup">Host_send_setup</a>();
<a name="l00575"></a>00575    <span class="keywordflow">while</span>(<a class="code" href="a00094.html#g206fdd77ac18f0049ef9953867e9d53e" title="tests if SETUP has been sent">Is_host_setup_sent</a>() == <a class="code" href="a00021.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>)  <span class="comment">// wait for SETUP ack</span>
<a name="l00576"></a>00576    {
<a name="l00577"></a>00577       <span class="keywordflow">if</span> (<a class="code" href="a00101.html#gde6ea4e3f8d2a6300b584585b47a3515">Is_host_emergency_exit</a>())
<a name="l00578"></a>00578       {
<a name="l00579"></a>00579          c=<a class="code" href="a00097.html#g815800552f80a2b563a52162fa2f2353">CONTROL_TIMEOUT</a>;
<a name="l00580"></a>00580          <a class="code" href="a00094.html#g439e70e693f67491a1385aa6fe71b5f8" title="freezes the pipe">Host_freeze_pipe</a>();
<a name="l00581"></a>00581          <a class="code" href="a00094.html#ge1999d2c665183b2ebff21e98abf5303" title="resets the pipe">Host_reset_pipe</a>(0);
<a name="l00582"></a>00582          <span class="keywordflow">goto</span> host_send_control_end;
<a name="l00583"></a>00583       }
<a name="l00584"></a>00584       <span class="keywordflow">if</span>(<a class="code" href="a00094.html#gdb6efa169d9cf437138886375dffd717" title="tests if an error occurs on current pipe">Is_host_pipe_error</a>())           <span class="comment">// Any error ?</span>
<a name="l00585"></a>00585       {
<a name="l00586"></a>00586          c = <a class="code" href="a00094.html#gfe5e2c3815d0f5e6fb6fa5e9d8f5ad5d" title="tests if error occurs on pipe">Host_error_status</a>();
<a name="l00587"></a>00587          <a class="code" href="a00094.html#g38a4fe69ac54cec03dbdea3a853d9133" title="acks all pipe error">Host_ack_all_errors</a>();
<a name="l00588"></a>00588          <span class="keywordflow">goto</span> host_send_control_end;     <span class="comment">// Send error status</span>
<a name="l00589"></a>00589       }
<a name="l00590"></a>00590    }
<a name="l00591"></a>00591   <span class="comment">// Setup token sent now send In or OUT token</span>
<a name="l00592"></a>00592   <span class="comment">// Before just wait one SOF</span>
<a name="l00593"></a>00593    <a class="code" href="a00101.html#g41da8b1e05449acf720091b1cab8cb3f">Usb_ack_event</a>(<a class="code" href="a00101.html#gcfb019547665d9f082d732c37f4054ea">EVT_HOST_SOF</a>);
<a name="l00594"></a>00594    sav_int_sof_enable=<a class="code" href="a00093.html#gd9ea64840c5a27fe482dfd16d228fa0b">Is_host_sof_interrupt_enabled</a>();
<a name="l00595"></a>00595    <a class="code" href="a00093.html#g020c241f990a53f48a0dd3bd0f75d804" title="enables host start of frame interrupt">Host_enable_sof_interrupt</a>();
<a name="l00596"></a>00596    <a class="code" href="a00094.html#g439e70e693f67491a1385aa6fe71b5f8" title="freezes the pipe">Host_freeze_pipe</a>();
<a name="l00597"></a>00597    data_length = <a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#67faf4f5fdd5cb4ef1c569024dca9114" title="Number of bytes to transfer if Data.">wLength</a>;
<a name="l00598"></a>00598    <span class="keywordflow">while</span>(<a class="code" href="a00101.html#g3da7d8904c82c9c2e4e8cd9f1bdb54e0">Is_not_usb_event</a>(<a class="code" href="a00101.html#gcfb019547665d9f082d732c37f4054ea">EVT_HOST_SOF</a>))         <span class="comment">// Wait 1 sof</span>
<a name="l00599"></a>00599    {
<a name="l00600"></a>00600       <span class="keywordflow">if</span> (<a class="code" href="a00101.html#gde6ea4e3f8d2a6300b584585b47a3515">Is_host_emergency_exit</a>())
<a name="l00601"></a>00601       {
<a name="l00602"></a>00602          c=<a class="code" href="a00097.html#g815800552f80a2b563a52162fa2f2353">CONTROL_TIMEOUT</a>;
<a name="l00603"></a>00603          <a class="code" href="a00094.html#g439e70e693f67491a1385aa6fe71b5f8" title="freezes the pipe">Host_freeze_pipe</a>();
<a name="l00604"></a>00604          <a class="code" href="a00094.html#ge1999d2c665183b2ebff21e98abf5303" title="resets the pipe">Host_reset_pipe</a>(0);
<a name="l00605"></a>00605          <span class="keywordflow">goto</span> host_send_control_end;
<a name="l00606"></a>00606       }
<a name="l00607"></a>00607    }
<a name="l00608"></a>00608    <span class="keywordflow">if</span> (sav_int_sof_enable==<a class="code" href="a00021.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l00609"></a>00609    {  <a class="code" href="a00093.html#g42cc31cb98e8ced4cc2a3fabdd8161c6" title="enables host start of frame interrupt">Host_disable_sof_interrupt</a>();  }   <span class="comment">// Restore SOF interrupt enable</span>
<a name="l00610"></a>00610 
<a name="l00611"></a>00611   <span class="comment">// IN request management ---------------------------------------------</span>
<a name="l00612"></a>00612    <span class="keywordflow">if</span>(<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#c1c6dcd77f8f01bddb35c4d2ce69ddba" title="Characteristics of the request.">bmRequestType</a> &amp; <a class="code" href="a00041.html#345989d2f1a7e6a60bf560b7920eaa7d">USB_SETUP_DIR_DEVICE_TO_HOST</a>)
<a name="l00613"></a>00613    {
<a name="l00614"></a>00614       <a class="code" href="a00094.html#gfa87f52529c5b911e22e3fce68ea50e5" title="sets IN in standard mode">Host_standard_in_mode</a>();
<a name="l00615"></a>00615       <a class="code" href="a00094.html#gad2775274ed99f26309d5377e53f2b74" title="sets IN token">Host_set_token_in</a>();
<a name="l00616"></a>00616       <span class="keywordflow">while</span>(data_length != 0)
<a name="l00617"></a>00617       {
<a name="l00618"></a>00618          <a class="code" href="a00094.html#gd8a6bcf6161fa98b5f79a933cbe03094" title="un-freezees the pipe">Host_unfreeze_pipe</a>();
<a name="l00619"></a>00619          <span class="keywordflow">while</span>(!<a class="code" href="a00094.html#g364bb30f8b7c970a4901d228c99969f0" title="tests if control IN has been received">Is_host_control_in_received</a>())
<a name="l00620"></a>00620          {
<a name="l00621"></a>00621             <span class="keywordflow">if</span> (<a class="code" href="a00101.html#gde6ea4e3f8d2a6300b584585b47a3515">Is_host_emergency_exit</a>())
<a name="l00622"></a>00622             {
<a name="l00623"></a>00623                c=<a class="code" href="a00097.html#g815800552f80a2b563a52162fa2f2353">CONTROL_TIMEOUT</a>;
<a name="l00624"></a>00624                <a class="code" href="a00094.html#g439e70e693f67491a1385aa6fe71b5f8" title="freezes the pipe">Host_freeze_pipe</a>();
<a name="l00625"></a>00625                <a class="code" href="a00094.html#ge1999d2c665183b2ebff21e98abf5303" title="resets the pipe">Host_reset_pipe</a>(0);
<a name="l00626"></a>00626                <span class="keywordflow">goto</span> host_send_control_end;
<a name="l00627"></a>00627             }
<a name="l00628"></a>00628             <span class="keywordflow">if</span>(<a class="code" href="a00094.html#gdb6efa169d9cf437138886375dffd717" title="tests if an error occurs on current pipe">Is_host_pipe_error</a>())
<a name="l00629"></a>00629             {
<a name="l00630"></a>00630                c = <a class="code" href="a00094.html#gfe5e2c3815d0f5e6fb6fa5e9d8f5ad5d" title="tests if error occurs on pipe">Host_error_status</a>();
<a name="l00631"></a>00631                <a class="code" href="a00094.html#g38a4fe69ac54cec03dbdea3a853d9133" title="acks all pipe error">Host_ack_all_errors</a>();
<a name="l00632"></a>00632                <span class="keywordflow">goto</span> host_send_control_end;
<a name="l00633"></a>00633             }
<a name="l00634"></a>00634             <span class="keywordflow">if</span>(<a class="code" href="a00094.html#g66efeecc2c1b771a09b6f7f61ea8ad0f" title="tests if a STALL has been received">Is_host_stall</a>())
<a name="l00635"></a>00635             {
<a name="l00636"></a>00636                c=<a class="code" href="a00097.html#g95ad8156c0a2f5f1cbf49b793f59a432">CONTROL_STALL</a>;
<a name="l00637"></a>00637                <a class="code" href="a00094.html#ge49501c68d910043ccecfd4bc91dd642" title="acks STALL reception">Host_ack_stall</a>();
<a name="l00638"></a>00638                <span class="keywordflow">goto</span> host_send_control_end;
<a name="l00639"></a>00639             }
<a name="l00640"></a>00640          }
<a name="l00641"></a>00641          c = <a class="code" href="a00094.html#g7932238da10d7eddc35fe61f46be0e65" title="returns number of bytes (8 bits)">Host_data_length_U8</a>();
<a name="l00642"></a>00642          <span class="keywordflow">if</span> (c == ep_size_max)
<a name="l00643"></a>00643          {
<a name="l00644"></a>00644             data_length -= c;
<a name="l00645"></a>00645             <span class="keywordflow">if</span> (<a class="code" href="a00052.html#631e46fdd6514f9d83c7344a7e409744" title="For control requests management over pipe 0.">usb_request</a>.<a class="code" href="a00013.html#f884800f35ae96670f6789b90544f9b3" title="1 = only one read">uncomplete_read</a> == <a class="code" href="a00021.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)           <span class="comment">// uncomplete_read</span>
<a name="l00646"></a>00646             {
<a name="l00647"></a>00647                data_length = 0;
<a name="l00648"></a>00648             }
<a name="l00649"></a>00649          }
<a name="l00650"></a>00650          <span class="keywordflow">else</span>
<a name="l00651"></a>00651          {
<a name="l00652"></a>00652             data_length = 0;
<a name="l00653"></a>00653          }
<a name="l00654"></a>00654          <span class="keywordflow">while</span> (c!=0)
<a name="l00655"></a>00655          {
<a name="l00656"></a>00656             *data_pointer = <a class="code" href="a00094.html#gf78a38ae2b9de6980dfa4028d6370f7d" title="reads a byte from the pipe FIFO">Host_read_byte</a>();
<a name="l00657"></a>00657             data_pointer++;
<a name="l00658"></a>00658             c--;
<a name="l00659"></a>00659          }
<a name="l00660"></a>00660          <a class="code" href="a00094.html#g439e70e693f67491a1385aa6fe71b5f8" title="freezes the pipe">Host_freeze_pipe</a>();
<a name="l00661"></a>00661          <a class="code" href="a00094.html#g585dbe0562014120661d756a9cd28895" title="acks control IN">Host_ack_control_in</a>();
<a name="l00662"></a>00662          <a class="code" href="a00094.html#gddc360762c84170a49a7a085d3e72cec" title="sends a control IN">Host_send_control_in</a>();
<a name="l00663"></a>00663       }                                <span class="comment">// end of IN data stage</span>
<a name="l00664"></a>00664 
<a name="l00665"></a>00665       <a class="code" href="a00094.html#g54e5d0b2c9e76a2af10280b101efdd94" title="sets OUT token">Host_set_token_out</a>();
<a name="l00666"></a>00666       <a class="code" href="a00094.html#gd8a6bcf6161fa98b5f79a933cbe03094" title="un-freezees the pipe">Host_unfreeze_pipe</a>();
<a name="l00667"></a>00667       <a class="code" href="a00094.html#g821167ebb84df0abba0567bdc76e462d" title="acks control OUT">Host_ack_control_out</a>();
<a name="l00668"></a>00668       <a class="code" href="a00094.html#g5745c396634daa0ccc4c87c16744b008" title="sends a control OUT">Host_send_control_out</a>();
<a name="l00669"></a>00669       <span class="keywordflow">while</span>(!<a class="code" href="a00094.html#g31bb6ce755ad1c642fecbd04044da1f3" title="tests if control OUT has been sent">Is_host_control_out_sent</a>())
<a name="l00670"></a>00670       {
<a name="l00671"></a>00671          <span class="keywordflow">if</span> (<a class="code" href="a00101.html#gde6ea4e3f8d2a6300b584585b47a3515">Is_host_emergency_exit</a>())
<a name="l00672"></a>00672          {
<a name="l00673"></a>00673             c=<a class="code" href="a00097.html#g815800552f80a2b563a52162fa2f2353">CONTROL_TIMEOUT</a>;
<a name="l00674"></a>00674             <a class="code" href="a00094.html#g439e70e693f67491a1385aa6fe71b5f8" title="freezes the pipe">Host_freeze_pipe</a>();
<a name="l00675"></a>00675             <a class="code" href="a00094.html#ge1999d2c665183b2ebff21e98abf5303" title="resets the pipe">Host_reset_pipe</a>(0);
<a name="l00676"></a>00676             <span class="keywordflow">goto</span> host_send_control_end;
<a name="l00677"></a>00677          }
<a name="l00678"></a>00678          <span class="keywordflow">if</span>(<a class="code" href="a00094.html#gdb6efa169d9cf437138886375dffd717" title="tests if an error occurs on current pipe">Is_host_pipe_error</a>())
<a name="l00679"></a>00679          {
<a name="l00680"></a>00680             c = <a class="code" href="a00094.html#gfe5e2c3815d0f5e6fb6fa5e9d8f5ad5d" title="tests if error occurs on pipe">Host_error_status</a>();
<a name="l00681"></a>00681             <a class="code" href="a00094.html#g38a4fe69ac54cec03dbdea3a853d9133" title="acks all pipe error">Host_ack_all_errors</a>();
<a name="l00682"></a>00682             <span class="keywordflow">goto</span> host_send_control_end;
<a name="l00683"></a>00683          }
<a name="l00684"></a>00684          <span class="keywordflow">if</span>(<a class="code" href="a00094.html#g66efeecc2c1b771a09b6f7f61ea8ad0f" title="tests if a STALL has been received">Is_host_stall</a>())
<a name="l00685"></a>00685          {
<a name="l00686"></a>00686             c=<a class="code" href="a00097.html#g95ad8156c0a2f5f1cbf49b793f59a432">CONTROL_STALL</a>;
<a name="l00687"></a>00687             <a class="code" href="a00094.html#ge49501c68d910043ccecfd4bc91dd642" title="acks STALL reception">Host_ack_stall</a>();
<a name="l00688"></a>00688             <span class="keywordflow">goto</span> host_send_control_end;
<a name="l00689"></a>00689          }
<a name="l00690"></a>00690       }
<a name="l00691"></a>00691       <a class="code" href="a00094.html#g821167ebb84df0abba0567bdc76e462d" title="acks control OUT">Host_ack_control_out</a>();
<a name="l00692"></a>00692       c=(<a class="code" href="a00097.html#ge10d045f2f8ce5ae0d44f58e71980b55">CONTROL_GOOD</a>);
<a name="l00693"></a>00693       <span class="keywordflow">goto</span> host_send_control_end;
<a name="l00694"></a>00694    }
<a name="l00695"></a>00695 
<a name="l00696"></a>00696   <span class="comment">// OUT request management ---------------------------------------------</span>
<a name="l00697"></a>00697    <span class="keywordflow">else</span>                                 <span class="comment">// Data stage OUT (bmRequestType==0)</span>
<a name="l00698"></a>00698    {
<a name="l00699"></a>00699       <a class="code" href="a00094.html#g54e5d0b2c9e76a2af10280b101efdd94" title="sets OUT token">Host_set_token_out</a>();
<a name="l00700"></a>00700       <a class="code" href="a00094.html#g821167ebb84df0abba0567bdc76e462d" title="acks control OUT">Host_ack_control_out</a>();
<a name="l00701"></a>00701       <span class="keywordflow">while</span>(data_length != 0)
<a name="l00702"></a>00702       {
<a name="l00703"></a>00703          <a class="code" href="a00094.html#gd8a6bcf6161fa98b5f79a933cbe03094" title="un-freezees the pipe">Host_unfreeze_pipe</a>();
<a name="l00704"></a>00704          c = ep_size_max;
<a name="l00705"></a>00705          <span class="keywordflow">if</span> ( ep_size_max &gt; data_length)
<a name="l00706"></a>00706          {
<a name="l00707"></a>00707             c = (<a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>)data_length;
<a name="l00708"></a>00708             data_length = 0;
<a name="l00709"></a>00709          }
<a name="l00710"></a>00710          <span class="keywordflow">else</span>
<a name="l00711"></a>00711          {
<a name="l00712"></a>00712             data_length -= c;
<a name="l00713"></a>00713          }
<a name="l00714"></a>00714          <span class="keywordflow">while</span> (c!=0)
<a name="l00715"></a>00715          {
<a name="l00716"></a>00716             <a class="code" href="a00094.html#g19fa8b41fa04f581cb7dea7de778cd36" title="writes a byte into the pipe FIFO">Host_write_byte</a>(*data_pointer);
<a name="l00717"></a>00717             data_pointer++;
<a name="l00718"></a>00718             c--;
<a name="l00719"></a>00719          }
<a name="l00720"></a>00720          <a class="code" href="a00094.html#g5745c396634daa0ccc4c87c16744b008" title="sends a control OUT">Host_send_control_out</a>();
<a name="l00721"></a>00721          <span class="keywordflow">while</span> (!<a class="code" href="a00094.html#g31bb6ce755ad1c642fecbd04044da1f3" title="tests if control OUT has been sent">Is_host_control_out_sent</a>())
<a name="l00722"></a>00722          {
<a name="l00723"></a>00723             <span class="keywordflow">if</span> (<a class="code" href="a00101.html#gde6ea4e3f8d2a6300b584585b47a3515">Is_host_emergency_exit</a>())
<a name="l00724"></a>00724             {
<a name="l00725"></a>00725                c=<a class="code" href="a00097.html#g815800552f80a2b563a52162fa2f2353">CONTROL_TIMEOUT</a>;
<a name="l00726"></a>00726                <a class="code" href="a00094.html#g439e70e693f67491a1385aa6fe71b5f8" title="freezes the pipe">Host_freeze_pipe</a>();
<a name="l00727"></a>00727                <a class="code" href="a00094.html#ge1999d2c665183b2ebff21e98abf5303" title="resets the pipe">Host_reset_pipe</a>(0);
<a name="l00728"></a>00728                <span class="keywordflow">goto</span> host_send_control_end;
<a name="l00729"></a>00729             }
<a name="l00730"></a>00730             <span class="keywordflow">if</span>(<a class="code" href="a00094.html#gdb6efa169d9cf437138886375dffd717" title="tests if an error occurs on current pipe">Is_host_pipe_error</a>())
<a name="l00731"></a>00731             {
<a name="l00732"></a>00732                c = <a class="code" href="a00094.html#gfe5e2c3815d0f5e6fb6fa5e9d8f5ad5d" title="tests if error occurs on pipe">Host_error_status</a>();
<a name="l00733"></a>00733                <a class="code" href="a00094.html#g38a4fe69ac54cec03dbdea3a853d9133" title="acks all pipe error">Host_ack_all_errors</a>();
<a name="l00734"></a>00734                <span class="keywordflow">goto</span> host_send_control_end;
<a name="l00735"></a>00735             }
<a name="l00736"></a>00736             <span class="keywordflow">if</span>(<a class="code" href="a00094.html#g66efeecc2c1b771a09b6f7f61ea8ad0f" title="tests if a STALL has been received">Is_host_stall</a>())
<a name="l00737"></a>00737             {
<a name="l00738"></a>00738                c=<a class="code" href="a00097.html#g95ad8156c0a2f5f1cbf49b793f59a432">CONTROL_STALL</a>;
<a name="l00739"></a>00739                <a class="code" href="a00094.html#ge49501c68d910043ccecfd4bc91dd642" title="acks STALL reception">Host_ack_stall</a>();
<a name="l00740"></a>00740                <span class="keywordflow">goto</span> host_send_control_end;
<a name="l00741"></a>00741             }
<a name="l00742"></a>00742          }
<a name="l00743"></a>00743          <a class="code" href="a00094.html#g821167ebb84df0abba0567bdc76e462d" title="acks control OUT">Host_ack_control_out</a>();
<a name="l00744"></a>00744       }                                <span class="comment">// end of OUT data stage</span>
<a name="l00745"></a>00745       <a class="code" href="a00094.html#g439e70e693f67491a1385aa6fe71b5f8" title="freezes the pipe">Host_freeze_pipe</a>();
<a name="l00746"></a>00746       <a class="code" href="a00094.html#gad2775274ed99f26309d5377e53f2b74" title="sets IN token">Host_set_token_in</a>();
<a name="l00747"></a>00747       <a class="code" href="a00094.html#gd8a6bcf6161fa98b5f79a933cbe03094" title="un-freezees the pipe">Host_unfreeze_pipe</a>();
<a name="l00748"></a>00748       <span class="keywordflow">while</span>(!<a class="code" href="a00094.html#g364bb30f8b7c970a4901d228c99969f0" title="tests if control IN has been received">Is_host_control_in_received</a>())
<a name="l00749"></a>00749       {
<a name="l00750"></a>00750          <span class="keywordflow">if</span> (<a class="code" href="a00101.html#gde6ea4e3f8d2a6300b584585b47a3515">Is_host_emergency_exit</a>())
<a name="l00751"></a>00751          {
<a name="l00752"></a>00752             c=<a class="code" href="a00097.html#g815800552f80a2b563a52162fa2f2353">CONTROL_TIMEOUT</a>;
<a name="l00753"></a>00753             <a class="code" href="a00094.html#g439e70e693f67491a1385aa6fe71b5f8" title="freezes the pipe">Host_freeze_pipe</a>();
<a name="l00754"></a>00754             <a class="code" href="a00094.html#ge1999d2c665183b2ebff21e98abf5303" title="resets the pipe">Host_reset_pipe</a>(0);
<a name="l00755"></a>00755             <span class="keywordflow">goto</span> host_send_control_end;
<a name="l00756"></a>00756          }
<a name="l00757"></a>00757          <span class="keywordflow">if</span>(<a class="code" href="a00094.html#gdb6efa169d9cf437138886375dffd717" title="tests if an error occurs on current pipe">Is_host_pipe_error</a>())
<a name="l00758"></a>00758          {
<a name="l00759"></a>00759             c = <a class="code" href="a00094.html#gfe5e2c3815d0f5e6fb6fa5e9d8f5ad5d" title="tests if error occurs on pipe">Host_error_status</a>();
<a name="l00760"></a>00760             <a class="code" href="a00094.html#g38a4fe69ac54cec03dbdea3a853d9133" title="acks all pipe error">Host_ack_all_errors</a>();
<a name="l00761"></a>00761             <span class="keywordflow">goto</span> host_send_control_end;
<a name="l00762"></a>00762          }
<a name="l00763"></a>00763          <span class="keywordflow">if</span>(<a class="code" href="a00094.html#g66efeecc2c1b771a09b6f7f61ea8ad0f" title="tests if a STALL has been received">Is_host_stall</a>())
<a name="l00764"></a>00764          {
<a name="l00765"></a>00765             c=<a class="code" href="a00097.html#g95ad8156c0a2f5f1cbf49b793f59a432">CONTROL_STALL</a>;
<a name="l00766"></a>00766             <a class="code" href="a00094.html#ge49501c68d910043ccecfd4bc91dd642" title="acks STALL reception">Host_ack_stall</a>();
<a name="l00767"></a>00767             <span class="keywordflow">goto</span> host_send_control_end;
<a name="l00768"></a>00768          }
<a name="l00769"></a>00769       }
<a name="l00770"></a>00770       <a class="code" href="a00094.html#g585dbe0562014120661d756a9cd28895" title="acks control IN">Host_ack_control_in</a>();
<a name="l00771"></a>00771       <a class="code" href="a00094.html#g439e70e693f67491a1385aa6fe71b5f8" title="freezes the pipe">Host_freeze_pipe</a>();
<a name="l00772"></a>00772       <a class="code" href="a00094.html#gddc360762c84170a49a7a085d3e72cec" title="sends a control IN">Host_send_control_in</a>();
<a name="l00773"></a>00773       c=(<a class="code" href="a00097.html#ge10d045f2f8ce5ae0d44f58e71980b55">CONTROL_GOOD</a>);
<a name="l00774"></a>00774       <span class="keywordflow">goto</span> host_send_control_end;
<a name="l00775"></a>00775    }
<a name="l00776"></a>00776 host_send_control_end:
<a name="l00777"></a>00777 <span class="preprocessor">#if(USB_HUB_SUPPORT==ENABLE &amp;&amp; USER_PERIODIC_PIPE==ENABLE)</span>
<a name="l00778"></a>00778 <span class="preprocessor"></span>   <a class="code" href="a00097.html#g7ec93e06da874bd5a114a1cd779a7b7b">unfreeze_user_periodic_pipe</a>();
<a name="l00779"></a>00779 <span class="preprocessor">#endif  </span>
<a name="l00780"></a>00780 <span class="preprocessor"></span>   <span class="keywordflow">return</span> ((<a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>)c);
<a name="l00781"></a>00781 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>

</div>
</div><p>
<a class="anchor" name="g08394bbb55b8aad2c2a53447b8718a6e"></a><!-- doxytag: member="usb_host_enum.h::host_check_VID_PID" ref="g08394bbb55b8aad2c2a53447b8718a6e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> host_check_VID_PID           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
host_check_VID_PID 
<p>
This function checks if the VID and the PID are supported (if the VID/PID belongs to the VID_PID table)<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>status </dd></dl>

<p>Definition at line <a class="el" href="a00137.html#l00123">123</a> of file <a class="el" href="a00137.html">usb_host_enum.c</a>.</p>

<p>References <a class="el" href="a00139.html#l00174">c</a>, <a class="el" href="a00139.html#l00166">data_stage</a>, <a class="el" href="a00138.html#l00122">S_usb_tree::device</a>, <a class="el" href="a00138.html#l00402">Get_PID</a>, <a class="el" href="a00138.html#l00390">Get_VID</a>, <a class="el" href="a00138.html#l00186">HOST_FALSE</a>, <a class="el" href="a00138.html#l00187">HOST_TRUE</a>, <a class="el" href="a00106.html#l00200">LSB</a>, <a class="el" href="a00106.html#l00199">MSB</a>, <a class="el" href="a00138.html#l00161">OFFSET_FIELD_LSB_PID</a>, <a class="el" href="a00138.html#l00159">OFFSET_FIELD_LSB_VID</a>, <a class="el" href="a00138.html#l00160">OFFSET_FIELD_MSB_PID</a>, <a class="el" href="a00138.html#l00158">OFFSET_FIELD_MSB_VID</a>, <a class="el" href="a00138.html#l00112">S_usb_device::pid</a>, <a class="el" href="a00137.html#l00091">registered_VID_PID</a>, <a class="el" href="a00137.html#l00107">selected_device</a>, and <a class="el" href="a00138.html#l00113">S_usb_device::vid</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00124"></a>00124 {
<a name="l00125"></a>00125 <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  <a class="code" href="a00054.html#59be438694d50e32414315b30318c0c8">c</a>,d;
<a name="l00126"></a>00126 
<a name="l00127"></a>00127    <span class="comment">// Rebuild VID PID from data stage</span>
<a name="l00128"></a>00128    <a class="code" href="a00021.html#bd2fa7b756342ae251e3a7a66670c2fe">LSB</a>(<a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[<a class="code" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].<a class="code" href="a00003.html#b5f92008ef3c2ae8e0ef7feb2a79156a">vid</a>) = <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[<a class="code" href="a00097.html#g49178815cfd1251d2a1f2a71b1ed9671">OFFSET_FIELD_LSB_VID</a>];
<a name="l00129"></a>00129    <a class="code" href="a00021.html#bee1b74eceef5a0cf26efbf3ff87ccbf">MSB</a>(<a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[<a class="code" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].<a class="code" href="a00003.html#b5f92008ef3c2ae8e0ef7feb2a79156a">vid</a>) = <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[<a class="code" href="a00097.html#g479f99068daae4bdb482cfdd552784d5">OFFSET_FIELD_MSB_VID</a>];
<a name="l00130"></a>00130    <a class="code" href="a00021.html#bd2fa7b756342ae251e3a7a66670c2fe">LSB</a>(<a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[<a class="code" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].<a class="code" href="a00003.html#1f321181eea8be28d7733b16db5b5442">pid</a>) = <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[<a class="code" href="a00097.html#g97da720c93be1e61c6ff30b2cb155030">OFFSET_FIELD_LSB_PID</a>];
<a name="l00131"></a>00131    <a class="code" href="a00021.html#bee1b74eceef5a0cf26efbf3ff87ccbf">MSB</a>(<a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[<a class="code" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].<a class="code" href="a00003.html#1f321181eea8be28d7733b16db5b5442">pid</a>) = <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[<a class="code" href="a00097.html#g34cf8f0f3cf9486a0abfb4de841560ba">OFFSET_FIELD_MSB_PID</a>];
<a name="l00132"></a>00132 
<a name="l00133"></a>00133    <span class="comment">// Compare detected VID PID with supported table</span>
<a name="l00134"></a>00134    c=0;
<a name="l00135"></a>00135    <span class="keywordflow">while</span> (c&lt; <span class="keyword">sizeof</span>(<a class="code" href="a00052.html#fa30f42d57061253cd04fc081c02df78" title="Const table of known devices (see conf_usb.h for table content).">registered_VID_PID</a>)/2)   <span class="comment">// /2 because registered_VID_PID table is U16...</span>
<a name="l00136"></a>00136    {
<a name="l00137"></a>00137       <span class="keywordflow">if</span> (<a class="code" href="a00052.html#fa30f42d57061253cd04fc081c02df78" title="Const table of known devices (see conf_usb.h for table content).">registered_VID_PID</a>[c] == <a class="code" href="a00097.html#ge5562930eb4c259f82c782821e29e852" title="Get_VID.">Get_VID</a>())   <span class="comment">// VID is correct</span>
<a name="l00138"></a>00138       {
<a name="l00139"></a>00139          d = (<a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>)<a class="code" href="a00052.html#fa30f42d57061253cd04fc081c02df78" title="Const table of known devices (see conf_usb.h for table content).">registered_VID_PID</a>[c+1];    <span class="comment">// store nb of PID for this VID</span>
<a name="l00140"></a>00140          <span class="keywordflow">while</span> (d != 0)
<a name="l00141"></a>00141          {
<a name="l00142"></a>00142             <span class="keywordflow">if</span> (<a class="code" href="a00052.html#fa30f42d57061253cd04fc081c02df78" title="Const table of known devices (see conf_usb.h for table content).">registered_VID_PID</a>[c+d+1] == <a class="code" href="a00097.html#g0d5f201dd724de2a2eca4405ba84d340" title="Get_PID.">Get_PID</a>())
<a name="l00143"></a>00143             {
<a name="l00144"></a>00144                <span class="keywordflow">return</span> <a class="code" href="a00097.html#gb554978a75f075e4567322993fbba5b2">HOST_TRUE</a>;
<a name="l00145"></a>00145             }
<a name="l00146"></a>00146             d--;
<a name="l00147"></a>00147          }
<a name="l00148"></a>00148       }
<a name="l00149"></a>00149       c+=<a class="code" href="a00052.html#fa30f42d57061253cd04fc081c02df78" title="Const table of known devices (see conf_usb.h for table content).">registered_VID_PID</a>[c+1]+2;
<a name="l00150"></a>00150    }
<a name="l00151"></a>00151    <span class="keywordflow">return</span> <a class="code" href="a00097.html#g2fef2e8ffbca0a854266e52acc014123">HOST_FALSE</a>;
<a name="l00152"></a>00152 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gaaf832167b2cadf3eefabf30ce58dffb"></a><!-- doxytag: member="usb_host_enum.h::host_check_class" ref="gaaf832167b2cadf3eefabf30ce58dffb" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> host_check_class           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
host_check_class 
<p>
This function checks if the device class is supported. The function looks in all interface declared in the received dewcriptors, if one of them match with the CLASS/SUB_CLASS/PROTOCOL table<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>status </dd></dl>

<p>Definition at line <a class="el" href="a00137.html#l00165">165</a> of file <a class="el" href="a00137.html">usb_host_enum.c</a>.</p>

<p>References <a class="el" href="a00138.html#l00097">S_usb_interface::altset_nb</a>, <a class="el" href="a00138.html#l00114">S_usb_device::bmattributes</a>, <a class="el" href="a00139.html#l00174">c</a>, <a class="el" href="a00138.html#l00098">S_usb_interface::class</a>, <a class="el" href="a00139.html#l00166">data_stage</a>, <a class="el" href="a00126.html#l00214">DESCRIPTOR_CONFIGURATION</a>, <a class="el" href="a00126.html#l00216">DESCRIPTOR_INTERFACE</a>, <a class="el" href="a00138.html#l00122">S_usb_tree::device</a>, <a class="el" href="a00138.html#l00186">HOST_FALSE</a>, <a class="el" href="a00138.html#l00187">HOST_TRUE</a>, <a class="el" href="a00138.html#l00116">S_usb_device::interface</a>, <a class="el" href="a00138.html#l00096">S_usb_interface::interface_nb</a>, <a class="el" href="a00106.html#l00200">LSB</a>, <a class="el" href="a00108.html#l00128">MAX_INTERFACE_FOR_DEVICE</a>, <a class="el" href="a00138.html#l00115">S_usb_device::maxpower</a>, <a class="el" href="a00106.html#l00199">MSB</a>, <a class="el" href="a00138.html#l00101">S_usb_interface::nb_ep</a>, <a class="el" href="a00138.html#l00111">S_usb_device::nb_interface</a>, <a class="el" href="a00138.html#l00178">OFFSET_FIELD_ALT</a>, <a class="el" href="a00138.html#l00166">OFFSET_FIELD_BMATTRIBUTES</a>, <a class="el" href="a00138.html#l00173">OFFSET_FIELD_CLASS</a>, <a class="el" href="a00138.html#l00164">OFFSET_FIELD_DESCRIPTOR_TYPE</a>, <a class="el" href="a00138.html#l00177">OFFSET_FIELD_INTERFACE_NB</a>, <a class="el" href="a00138.html#l00167">OFFSET_FIELD_MAXPOWER</a>, <a class="el" href="a00138.html#l00175">OFFSET_FIELD_PROTOCOL</a>, <a class="el" href="a00138.html#l00174">OFFSET_FIELD_SUB_CLASS</a>, <a class="el" href="a00138.html#l00165">OFFSET_FIELD_TOTAL_LENGHT</a>, <a class="el" href="a00138.html#l00179">OFFSET_FIELS_NB_OF_EP</a>, <a class="el" href="a00138.html#l00100">S_usb_interface::protocol</a>, <a class="el" href="a00137.html#l00094">registered_class</a>, <a class="el" href="a00137.html#l00107">selected_device</a>, <a class="el" href="a00108.html#l00119">SIZEOF_DATA_STAGE</a>, <a class="el" href="a00138.html#l00099">S_usb_interface::subclass</a>, and <a class="el" href="a00138.html#l00060">T_DESC_OFFSET</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00166"></a>00166 {
<a name="l00167"></a>00167 <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  <a class="code" href="a00054.html#59be438694d50e32414315b30318c0c8">c</a>;
<a name="l00168"></a>00168 <a class="code" href="a00053.html#15f43a7a42588cf4d8e0155fd195e4b7" title="Optimize descriptor offset index according to data_stage[] size.">T_DESC_OFFSET</a>  descriptor_offset;
<a name="l00169"></a>00169 <a class="code" href="a00053.html#15f43a7a42588cf4d8e0155fd195e4b7" title="Optimize descriptor offset index according to data_stage[] size.">T_DESC_OFFSET</a>  conf_offset_end;
<a name="l00170"></a>00170 <a class="code" href="a00021.html#df928e51a60dba0df29d615401cc55a8">U16</a>  config_size;
<a name="l00171"></a>00171 <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  device_class;
<a name="l00172"></a>00172 <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  device_subclass;
<a name="l00173"></a>00173 <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  device_protocol;
<a name="l00174"></a>00174 <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  nb_interface_supported;
<a name="l00175"></a>00175 
<a name="l00176"></a>00176 
<a name="l00177"></a>00177    nb_interface_supported=0;   <span class="comment">//First asumes ,no interface is supported!</span>
<a name="l00178"></a>00178    <span class="keywordflow">if</span> (<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[<a class="code" href="a00097.html#ge7f27d63cec79b20a67a17d587656790">OFFSET_FIELD_DESCRIPTOR_TYPE</a>] != <a class="code" href="a00041.html#58d90c3f856c15b309be5464f0d0ba01">DESCRIPTOR_CONFIGURATION</a>)           <span class="comment">// check if configuration descriptor</span>
<a name="l00179"></a>00179    { <span class="keywordflow">return</span> <a class="code" href="a00097.html#g2fef2e8ffbca0a854266e52acc014123">HOST_FALSE</a>;}
<a name="l00180"></a>00180    <a class="code" href="a00021.html#bd2fa7b756342ae251e3a7a66670c2fe">LSB</a>(config_size) = <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[<a class="code" href="a00097.html#g156413b2fac239190d7d7b9968cbd230">OFFSET_FIELD_TOTAL_LENGHT</a>];
<a name="l00181"></a>00181    <a class="code" href="a00021.html#bee1b74eceef5a0cf26efbf3ff87ccbf">MSB</a>(config_size) = <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[<a class="code" href="a00097.html#g156413b2fac239190d7d7b9968cbd230">OFFSET_FIELD_TOTAL_LENGHT</a>+1];
<a name="l00182"></a>00182    <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[<a class="code" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].<a class="code" href="a00003.html#6e97322a2e0a51aedcf43c643a7aae7d">bmattributes</a> = <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[<a class="code" href="a00097.html#gb286e83bbe99c8fa9ccbaed4080494e4">OFFSET_FIELD_BMATTRIBUTES</a>];
<a name="l00183"></a>00183    <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[<a class="code" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].<a class="code" href="a00003.html#f480af470702f6fb0545a57c84e746ab">maxpower</a> = <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[<a class="code" href="a00097.html#g61d63beabdf5375d599f3fe0dc3c325c">OFFSET_FIELD_MAXPOWER</a>];
<a name="l00184"></a>00184    descriptor_offset = 0;
<a name="l00185"></a>00185    conf_offset_end = descriptor_offset + config_size;
<a name="l00186"></a>00186 
<a name="l00187"></a>00187    <span class="comment">// Look in all interfaces declared in the configuration</span>
<a name="l00188"></a>00188    <span class="keywordflow">while</span>(descriptor_offset &lt; conf_offset_end)
<a name="l00189"></a>00189    {
<a name="l00190"></a>00190       <span class="comment">// Find next interface descriptor</span>
<a name="l00191"></a>00191       <span class="keywordflow">while</span> (<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#ge7f27d63cec79b20a67a17d587656790">OFFSET_FIELD_DESCRIPTOR_TYPE</a>] != <a class="code" href="a00041.html#9861aff4822127c97440bcd226b94477">DESCRIPTOR_INTERFACE</a>)
<a name="l00192"></a>00192       {
<a name="l00193"></a>00193          descriptor_offset += <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset];
<a name="l00194"></a>00194          <span class="keywordflow">if</span>(descriptor_offset &gt;= conf_offset_end)
<a name="l00195"></a>00195          {
<a name="l00196"></a>00196             <span class="keywordflow">if</span>(nb_interface_supported)
<a name="l00197"></a>00197             {
<a name="l00198"></a>00198                <span class="keywordflow">return</span> <a class="code" href="a00097.html#gb554978a75f075e4567322993fbba5b2">HOST_TRUE</a>;
<a name="l00199"></a>00199             }
<a name="l00200"></a>00200             <span class="keywordflow">else</span> <span class="keywordflow">return</span> <a class="code" href="a00097.html#g2fef2e8ffbca0a854266e52acc014123">HOST_FALSE</a>;
<a name="l00201"></a>00201          }
<a name="l00202"></a>00202       }
<a name="l00203"></a>00203       <span class="comment">// Found an interface descriptor</span>
<a name="l00204"></a>00204       <span class="comment">// Get charateristics of this interface</span>
<a name="l00205"></a>00205       device_class    = <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset + <a class="code" href="a00097.html#gf4b32f002bc9f9462126a8b0f5806c8b">OFFSET_FIELD_CLASS</a>];
<a name="l00206"></a>00206       device_subclass = <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset + <a class="code" href="a00097.html#g6f0e71cc5be0dca91270b7cf3f065f40">OFFSET_FIELD_SUB_CLASS</a>];
<a name="l00207"></a>00207       device_protocol = <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset + <a class="code" href="a00097.html#g82a7d75dfd8ccca877b315f5d86963bb">OFFSET_FIELD_PROTOCOL</a>];
<a name="l00208"></a>00208       <span class="comment">// Look in registered class table for match</span>
<a name="l00209"></a>00209       c=0;
<a name="l00210"></a>00210       <span class="keywordflow">while</span> (c&lt; <span class="keyword">sizeof</span>(<a class="code" href="a00052.html#708ae96ff01f864b6e8767b01a4ccad5" title="Const table of known class (see conf_usb.h for table content).">registered_class</a>))
<a name="l00211"></a>00211       {
<a name="l00212"></a>00212          <span class="keywordflow">if</span> (<a class="code" href="a00052.html#708ae96ff01f864b6e8767b01a4ccad5" title="Const table of known class (see conf_usb.h for table content).">registered_class</a>[c] == device_class)                 <span class="comment">// class is correct!</span>
<a name="l00213"></a>00213          {
<a name="l00214"></a>00214             <span class="keywordflow">if</span> (<a class="code" href="a00052.html#708ae96ff01f864b6e8767b01a4ccad5" title="Const table of known class (see conf_usb.h for table content).">registered_class</a>[c+1] == device_subclass)         <span class="comment">// sub class is correct!</span>
<a name="l00215"></a>00215             {
<a name="l00216"></a>00216                <span class="keywordflow">if</span> (<a class="code" href="a00052.html#708ae96ff01f864b6e8767b01a4ccad5" title="Const table of known class (see conf_usb.h for table content).">registered_class</a>[c+2] == device_protocol)      <span class="comment">// protocol is correct!</span>
<a name="l00217"></a>00217                {
<a name="l00218"></a>00218                   <span class="comment">// Prepare for another item CLASS/SUB_CLASS/PROTOCOL in table</span>
<a name="l00219"></a>00219                   c+=3;
<a name="l00220"></a>00220                   <span class="comment">// Store this interface as supported interface</span>
<a name="l00221"></a>00221                   <span class="comment">// Memorize its interface nb</span>
<a name="l00222"></a>00222                   <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[<a class="code" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[nb_interface_supported].<a class="code" href="a00007.html#d560cf0a694d32b46e8c4875f9f8dc5e">interface_nb</a>=<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#gad194a2c122879dc9ad70f30d3ccae75">OFFSET_FIELD_INTERFACE_NB</a>];
<a name="l00223"></a>00223                   <span class="comment">//          its alternate setting</span>
<a name="l00224"></a>00224                   <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[<a class="code" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[nb_interface_supported].<a class="code" href="a00007.html#db860225fe053d199780a43d12e692fe">altset_nb</a>=<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g2240a2b7dde3ef59dcd963675adb55c3">OFFSET_FIELD_ALT</a>];
<a name="l00225"></a>00225                   <span class="comment">//          its USB class</span>
<a name="l00226"></a>00226                   <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[<a class="code" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[nb_interface_supported].<a class="code" href="a00007.html#c563065dd6e5c4526111a9a848fd3e2b">class</a>=device_class;
<a name="l00227"></a>00227                   <span class="comment">//          its USB subclass</span>
<a name="l00228"></a>00228                   <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[<a class="code" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[nb_interface_supported].<a class="code" href="a00007.html#c9edc644859ea2faf9925046182a2921">subclass</a>=device_subclass;
<a name="l00229"></a>00229                   <span class="comment">//          its USB protocol</span>
<a name="l00230"></a>00230                   <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[<a class="code" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[nb_interface_supported].<a class="code" href="a00007.html#b5475b8d38ee9a10b9283dba5144e6fe">protocol</a>=device_protocol;
<a name="l00231"></a>00231                   <span class="comment">//          the number of endpoints associated to this interface</span>
<a name="l00232"></a>00232                   <span class="comment">//          Note: The associated endpoints addresses are stored during pipe attribution...</span>
<a name="l00233"></a>00233                   <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[<a class="code" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[nb_interface_supported].<a class="code" href="a00007.html#4a3033c978c5cc847b209d05e71d94d7">nb_ep</a>=<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g5345fd6ed3fef5cc80c8c0a8a4d051c5">OFFSET_FIELS_NB_OF_EP</a>];
<a name="l00234"></a>00234                   <span class="comment">// Update the number of interface supported</span>
<a name="l00235"></a>00235                   nb_interface_supported++;
<a name="l00236"></a>00236                   <span class="comment">// Update the number of interface supported for the device</span>
<a name="l00237"></a>00237                   <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[<a class="code" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].<a class="code" href="a00003.html#d8af5613594354d9bbf1b862527f3194">nb_interface</a>++;
<a name="l00238"></a>00238                   <span class="comment">// Check the maximum number of interfaces we can support</span>
<a name="l00239"></a>00239                   <span class="keywordflow">if</span>(nb_interface_supported&gt;=<a class="code" href="a00070.html#gf555ac95cfc24daa44af760d0404518e" title="The maximum number of interface supported per device.">MAX_INTERFACE_FOR_DEVICE</a>)
<a name="l00240"></a>00240                   {
<a name="l00241"></a>00241                      <span class="keywordflow">return</span> <a class="code" href="a00097.html#gb554978a75f075e4567322993fbba5b2">HOST_TRUE</a>;
<a name="l00242"></a>00242                   }
<a name="l00243"></a>00243                }
<a name="l00244"></a>00244             }
<a name="l00245"></a>00245          }
<a name="l00246"></a>00246          c+=3; <span class="comment">// Check other item CLASS/SUB_CLASS/PROTOCOL in table</span>
<a name="l00247"></a>00247       }
<a name="l00248"></a>00248       descriptor_offset += <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset]; <span class="comment">// Next descriptor</span>
<a name="l00249"></a>00249       <span class="keywordflow">if</span>(descriptor_offset &gt; <a class="code" href="a00070.html#g5b9eae1b7be09014673af472171c17d4" title="The size of RAM buffer reserved of descriptors manipulation.">SIZEOF_DATA_STAGE</a>)           <span class="comment">// Check overflow</span>
<a name="l00250"></a>00250       {
<a name="l00251"></a>00251          <span class="keywordflow">if</span>(nb_interface_supported)
<a name="l00252"></a>00252          {
<a name="l00253"></a>00253             <span class="keywordflow">return</span> <a class="code" href="a00097.html#gb554978a75f075e4567322993fbba5b2">HOST_TRUE</a>;
<a name="l00254"></a>00254          }
<a name="l00255"></a>00255          <span class="keywordflow">else</span> <span class="keywordflow">return</span> <a class="code" href="a00097.html#g2fef2e8ffbca0a854266e52acc014123">HOST_FALSE</a>;
<a name="l00256"></a>00256       }
<a name="l00257"></a>00257    }
<a name="l00258"></a>00258    <span class="keywordflow">if</span>(nb_interface_supported)
<a name="l00259"></a>00259    { 
<a name="l00260"></a>00260       <span class="keywordflow">return</span> <a class="code" href="a00097.html#gb554978a75f075e4567322993fbba5b2">HOST_TRUE</a>; 
<a name="l00261"></a>00261    }
<a name="l00262"></a>00262    <span class="keywordflow">else</span> <span class="keywordflow">return</span> <a class="code" href="a00097.html#g2fef2e8ffbca0a854266e52acc014123">HOST_FALSE</a>;
<a name="l00263"></a>00263 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gef82869f4fd052f7ca4b566937863070"></a><!-- doxytag: member="usb_host_enum.h::host_auto_configure_endpoint" ref="gef82869f4fd052f7ca4b566937863070" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> host_auto_configure_endpoint           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function configures the pipe according to the device class of the interface selected. THe function will configure the pipe corresponding to the last device selected<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>status </dd></dl>

<p>Definition at line <a class="el" href="a00137.html#l00272">272</a> of file <a class="el" href="a00137.html">usb_host_enum.c</a>.</p>

<p>References <a class="el" href="a00138.html#l00097">S_usb_interface::altset_nb</a>, <a class="el" href="a00138.html#l00098">S_usb_interface::class</a>, <a class="el" href="a00139.html#l00166">data_stage</a>, <a class="el" href="a00126.html#l00217">DESCRIPTOR_ENDPOINT</a>, <a class="el" href="a00138.html#l00122">S_usb_tree::device</a>, <a class="el" href="a00138.html#l00102">S_usb_interface::ep</a>, <a class="el" href="a00138.html#l00088">S_usb_endpoint::ep_addr</a>, <a class="el" href="a00138.html#l00090">S_usb_endpoint::ep_size</a>, <a class="el" href="a00138.html#l00091">S_usb_endpoint::ep_type</a>, <a class="el" href="a00106.html#l00260">FALSE</a>, <a class="el" href="a00137.html#l00462">get_interface_descriptor_offset()</a>, <a class="el" href="a00136.html#l00924">Get_pipe_token</a>, <a class="el" href="a00136.html#l00188">host_configure_pipe</a>, <a class="el" href="a00135.html#l00268">host_determine_pipe_size()</a>, <a class="el" href="a00136.html#l00777">Host_disable_pipe</a>, <a class="el" href="a00136.html#l00775">Host_enable_pipe</a>, <a class="el" href="a00138.html#l00186">HOST_FALSE</a>, <a class="el" href="a00136.html#l00772">Host_get_selected_pipe</a>, <a class="el" href="a00136.html#l00769">Host_select_pipe</a>, <a class="el" href="a00140.html#l00164">Host_set_configured</a>, <a class="el" href="a00138.html#l00187">HOST_TRUE</a>, <a class="el" href="a00136.html#l00657">Host_unallocate_memory</a>, <a class="el" href="a00139.html#l00178">i</a>, <a class="el" href="a00138.html#l00116">S_usb_device::interface</a>, <a class="el" href="a00138.html#l00096">S_usb_interface::interface_nb</a>, <a class="el" href="a00136.html#l00659">Is_host_pipe_memory_allocated</a>, <a class="el" href="a00136.html#l00056">MAX_EP_NB</a>, <a class="el" href="a00136.html#l00078">MSK_EP_DIR</a>, <a class="el" href="a00138.html#l00121">S_usb_tree::nb_device</a>, <a class="el" href="a00138.html#l00101">S_usb_interface::nb_ep</a>, <a class="el" href="a00138.html#l00111">S_usb_device::nb_interface</a>, <a class="el" href="a00138.html#l00163">OFFSET_DESCRIPTOR_LENGHT</a>, <a class="el" href="a00138.html#l00164">OFFSET_FIELD_DESCRIPTOR_TYPE</a>, <a class="el" href="a00138.html#l00181">OFFSET_FIELD_EP_ADDR</a>, <a class="el" href="a00138.html#l00184">OFFSET_FIELD_EP_INTERVAL</a>, <a class="el" href="a00138.html#l00183">OFFSET_FIELD_EP_SIZE</a>, <a class="el" href="a00138.html#l00182">OFFSET_FIELD_EP_TYPE</a>, <a class="el" href="a00136.html#l00139">ONE_BANK</a>, <a class="el" href="a00138.html#l00089">S_usb_endpoint::pipe_number</a>, <a class="el" href="a00136.html#l00128">SIZE_8</a>, <a class="el" href="a00108.html#l00119">SIZEOF_DATA_STAGE</a>, <a class="el" href="a00138.html#l00060">T_DESC_OFFSET</a>, <a class="el" href="a00136.html#l00148">TOKEN_IN</a>, <a class="el" href="a00136.html#l00140">TWO_BANKS</a>, <a class="el" href="a00136.html#l00120">TYPE_BULK</a>, <a class="el" href="a00136.html#l00121">TYPE_INTERRUPT</a>, <a class="el" href="a00137.html#l00100">user_periodic_pipe</a>, and <a class="el" href="a00137.html#l00102">user_periodic_pipe_device_index</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00273"></a>00273 {
<a name="l00274"></a>00274 <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  nb_endpoint_to_configure;
<a name="l00275"></a>00275 <a class="code" href="a00053.html#15f43a7a42588cf4d8e0155fd195e4b7" title="Optimize descriptor offset index according to data_stage[] size.">T_DESC_OFFSET</a>  descriptor_offset;
<a name="l00276"></a>00276 <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>  physical_pipe=1;   <span class="comment">// =1 cause lookup table assumes that physical pipe 0 is reserved for control</span>
<a name="l00277"></a>00277 <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="code" href="a00054.html#a31f47cc4db2a583d432407361bc4bfb">i</a>;
<a name="l00278"></a>00278 <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> ep_index;
<a name="l00279"></a>00279 <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> device,interface,alt_interface;
<a name="l00280"></a>00280 <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> nb_interface;
<a name="l00281"></a>00281 
<a name="l00282"></a>00282    <span class="comment">// Get the last device number to configure</span>
<a name="l00283"></a>00283    device = <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#56188ed5b1d93dd3744d3302d803d82b">nb_device</a>-1;
<a name="l00284"></a>00284    
<a name="l00285"></a>00285    <span class="comment">// Get the nulber of interface to configure for the last device connected</span>
<a name="l00286"></a>00286    nb_interface = <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device].<a class="code" href="a00003.html#d8af5613594354d9bbf1b862527f3194">nb_interface</a>;
<a name="l00287"></a>00287    
<a name="l00288"></a>00288    <span class="comment">// Look for first physical pipe free</span>
<a name="l00289"></a>00289    <span class="comment">// TODO improve allocation mechanism...</span>
<a name="l00290"></a>00290    i = <a class="code" href="a00094.html#ga602f18f3102551a390cab51280ca702" title="get the currently selected pipe number">Host_get_selected_pipe</a>();    <span class="comment">// Save current selected pipe</span>
<a name="l00291"></a>00291    <span class="keywordflow">for</span>(physical_pipe=1;physical_pipe&lt;<a class="code" href="a00087.html#gf2735f56ebd716202bc74c3e903f2807">MAX_EP_NB</a>-1;physical_pipe++)
<a name="l00292"></a>00292    {
<a name="l00293"></a>00293       <a class="code" href="a00094.html#g9cef84edfb59cc5963bebddf55f367f6" title="selects pipe for CPU interface">Host_select_pipe</a>(physical_pipe);
<a name="l00294"></a>00294       <span class="keywordflow">if</span>(<a class="code" href="a00093.html#g0cbe3f5e5966239697fdeb6043cc815d" title="Check if pipe memory is allocated.">Is_host_pipe_memory_allocated</a>()==<a class="code" href="a00021.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>) <span class="keywordflow">break</span>; <span class="comment">// Pipe already allocated try next one</span>
<a name="l00295"></a>00295    }
<a name="l00296"></a>00296    <a class="code" href="a00094.html#g9cef84edfb59cc5963bebddf55f367f6" title="selects pipe for CPU interface">Host_select_pipe</a>(i); <span class="comment">//Restore previous selected pipe</span>
<a name="l00297"></a>00297 
<a name="l00298"></a>00298    <span class="comment">// For all interfaces to configure...</span>
<a name="l00299"></a>00299    <span class="keywordflow">for</span>(i=0;i&lt;nb_interface;i++)
<a name="l00300"></a>00300    {
<a name="l00301"></a>00301       ep_index=0;
<a name="l00302"></a>00302       <span class="comment">// Look for the target interface descriptor offset</span>
<a name="l00303"></a>00303       interface = <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[i].<a class="code" href="a00007.html#d560cf0a694d32b46e8c4875f9f8dc5e">interface_nb</a>;
<a name="l00304"></a>00304       alt_interface = <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[i].<a class="code" href="a00007.html#db860225fe053d199780a43d12e692fe">altset_nb</a>;
<a name="l00305"></a>00305       descriptor_offset = <a class="code" href="a00097.html#g0d78118ad09c5d6679553d8b8b1bd84c" title="get_interface_descriptor_offset">get_interface_descriptor_offset</a>(interface,alt_interface);
<a name="l00306"></a>00306       <span class="comment">// Get the number of endpoint to configure for this interface</span>
<a name="l00307"></a>00307       nb_endpoint_to_configure = <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[i].<a class="code" href="a00007.html#4a3033c978c5cc847b209d05e71d94d7">nb_ep</a>;
<a name="l00308"></a>00308       <span class="comment">// Get the first Endpoint descriptor offset to configure</span>
<a name="l00309"></a>00309       descriptor_offset += <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g621c329f5149447fbdb3b0680c6ccd10">OFFSET_DESCRIPTOR_LENGHT</a>];  <span class="comment">// pointing on endpoint descriptor</span>
<a name="l00310"></a>00310 
<a name="l00311"></a>00311       <span class="comment">// While there is at least one pipe to configure</span>
<a name="l00312"></a>00312       <span class="keywordflow">while</span> (nb_endpoint_to_configure)
<a name="l00313"></a>00313       {
<a name="l00314"></a>00314          <span class="comment">// Check and look for an Endpoint descriptor</span>
<a name="l00315"></a>00315          <span class="keywordflow">while</span> (<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#ge7f27d63cec79b20a67a17d587656790">OFFSET_FIELD_DESCRIPTOR_TYPE</a>] != <a class="code" href="a00041.html#2bf44081031a2eaf2c5d23d1f3a73642">DESCRIPTOR_ENDPOINT</a>)
<a name="l00316"></a>00316          {
<a name="l00317"></a>00317             descriptor_offset += <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset];
<a name="l00318"></a>00318             <span class="keywordflow">if</span>(descriptor_offset &gt; <a class="code" href="a00070.html#g5b9eae1b7be09014673af472171c17d4" title="The size of RAM buffer reserved of descriptors manipulation.">SIZEOF_DATA_STAGE</a>)   <span class="comment">// No more endpoint descriptor found -&gt; Errror !</span>
<a name="l00319"></a>00319             {  <span class="keywordflow">return</span> <a class="code" href="a00097.html#g2fef2e8ffbca0a854266e52acc014123">HOST_FALSE</a>; }
<a name="l00320"></a>00320          }
<a name="l00321"></a>00321 <span class="preprocessor">#if (SAVE_INTERRUPT_PIPE_FOR_DMS_INTERFACE==ENABLE)</span>
<a name="l00322"></a>00322 <span class="preprocessor"></span>         <span class="comment">// @TODO HUB support &amp; INTERRUPT PIPE No validated</span>
<a name="l00323"></a>00323          <span class="keywordflow">if</span>(<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g12a92c851693a9a37b68133d4b3ddbdc">OFFSET_FIELD_EP_TYPE</a>]==<a class="code" href="a00087.html#gb34d6f23ac074575b13729f4f0a418ae">TYPE_INTERRUPT</a> &amp;&amp; <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[i].<a class="code" href="a00007.html#c563065dd6e5c4526111a9a848fd3e2b">class</a>==0x08)
<a name="l00324"></a>00324          {
<a name="l00325"></a>00325             nb_endpoint_to_configure--;
<a name="l00326"></a>00326             <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[i].<a class="code" href="a00007.html#4a3033c978c5cc847b209d05e71d94d7">nb_ep</a>--;
<a name="l00327"></a>00327             <span class="keywordflow">continue</span>;
<a name="l00328"></a>00328          }
<a name="l00329"></a>00329 <span class="preprocessor">#endif         </span>
<a name="l00330"></a>00330 <span class="preprocessor"></span>
<a name="l00331"></a>00331          <span class="comment">// Select the new physical pipe to configure and get ride of any previous configuration for this physical pipe</span>
<a name="l00332"></a>00332          <a class="code" href="a00094.html#g9cef84edfb59cc5963bebddf55f367f6" title="selects pipe for CPU interface">Host_select_pipe</a>(physical_pipe);
<a name="l00333"></a>00333          <a class="code" href="a00094.html#g24dc68cd6a9baed2f17e40b036be0824" title="disables pipe">Host_disable_pipe</a>();
<a name="l00334"></a>00334          <a class="code" href="a00093.html#g5df72c8139aadcda4d86261bf62696cf" title="un-allocates the current configuration in DPRAM memory">Host_unallocate_memory</a>();
<a name="l00335"></a>00335          <a class="code" href="a00094.html#g26ae9e6e50f7de7462df1abe3201e614" title="enables pipe">Host_enable_pipe</a>();
<a name="l00336"></a>00336 
<a name="l00337"></a>00337          <span class="comment">// Build the pipe configuration according to the endpoint descriptors fields received</span>
<a name="l00338"></a>00338          <span class="comment">//</span>
<a name="l00339"></a>00339          <span class="comment">// host_configure_pipe(</span>
<a name="l00340"></a>00340          <span class="comment">//    physical_pipe,                                                                    // pipe nb in USB interface</span>
<a name="l00341"></a>00341          <span class="comment">//    data_stage[descriptor_offset+OFFSET_FIELD_EP_TYPE],                               // pipe type (interrupt/BULK/ISO)</span>
<a name="l00342"></a>00342          <span class="comment">//    Get_pipe_token(data_stage[descriptor_offset+OFFSET_FIELD_EP_ADDR]),               // pipe addr</span>
<a name="l00343"></a>00343          <span class="comment">//    (data_stage[descriptor_offset+2] &amp; MSK_EP_DIR),                                   // pipe dir (IN/OUT)</span>
<a name="l00344"></a>00344          <span class="comment">//    host_determine_pipe_size((U16)data_stage[descriptor_offset+OFFSET_FIELD_EP_SIZE]),// pipe size</span>
<a name="l00345"></a>00345          <span class="comment">//    ONE_BANK,                                                                         // bumber of bank to allocate for pipe</span>
<a name="l00346"></a>00346          <span class="comment">//    data_stage[descriptor_offset+OFFSET_FIELD_EP_INTERVAL]                            // interrupt period (for interrupt pipe)</span>
<a name="l00347"></a>00347          <span class="comment">//  );</span>
<a name="l00348"></a>00348 
<a name="l00349"></a>00349 <span class="preprocessor">#if (USB_HUB_SUPPORT==ENABLE)</span>
<a name="l00350"></a>00350 <span class="preprocessor"></span>         <span class="comment">// For USB hub move from interupt type to bulk type</span>
<a name="l00351"></a>00351          <span class="keywordflow">if</span>(<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g12a92c851693a9a37b68133d4b3ddbdc">OFFSET_FIELD_EP_TYPE</a>]==<a class="code" href="a00087.html#gb34d6f23ac074575b13729f4f0a418ae">TYPE_INTERRUPT</a> &amp;&amp; <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[i].<a class="code" href="a00007.html#c563065dd6e5c4526111a9a848fd3e2b">class</a>==0x09)
<a name="l00352"></a>00352          {
<a name="l00353"></a>00353                <a class="code" href="a00088.html#g69b1035875dea2558c650b221a6dbba7">host_configure_pipe</a>(physical_pipe, \
<a name="l00354"></a>00354                              <a class="code" href="a00087.html#gecf9984e4a03af2ce8b0a2367641cdb7">TYPE_BULK</a>, \
<a name="l00355"></a>00355                              <a class="code" href="a00087.html#g85c411b087c1466b130f5cce33bd4103">TOKEN_IN</a>,  \
<a name="l00356"></a>00356                              1,   \
<a name="l00357"></a>00357                              <a class="code" href="a00087.html#gffc575030c953e6ae116a07013b969dd">SIZE_8</a>,      \
<a name="l00358"></a>00358                              <a class="code" href="a00087.html#gdec7a5c1b9ed61af0268113a110bbf1f">ONE_BANK</a>,     \
<a name="l00359"></a>00359                              0             );  
<a name="l00360"></a>00360          }
<a name="l00361"></a>00361          <span class="keywordflow">else</span> <span class="comment">// The device connected is not a hub</span>
<a name="l00362"></a>00362          {
<a name="l00363"></a>00363             <span class="keywordflow">if</span>( nb_hub_present==0) <span class="comment">// No hub already exist in the USB tree</span>
<a name="l00364"></a>00364             {
<a name="l00365"></a>00365                <a class="code" href="a00088.html#g69b1035875dea2558c650b221a6dbba7">host_configure_pipe</a>(                                                          \
<a name="l00366"></a>00366                   physical_pipe,                                                             \
<a name="l00367"></a>00367                   <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g12a92c851693a9a37b68133d4b3ddbdc">OFFSET_FIELD_EP_TYPE</a>],                        \
<a name="l00368"></a>00368                   <a class="code" href="a00094.html#g91d8e39915c6983deaa976ff6b87d3c0">Get_pipe_token</a>(<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#gb9aa68e98df84c1fd246179e6dc406fe">OFFSET_FIELD_EP_ADDR</a>]),        \
<a name="l00369"></a>00369                   (<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#gb9aa68e98df84c1fd246179e6dc406fe">OFFSET_FIELD_EP_ADDR</a>] &amp; <a class="code" href="a00087.html#g6b33e652b50d91dc0025fffe8c090a45">MSK_EP_DIR</a>),                            \
<a name="l00370"></a>00370                   <a class="code" href="a00050.html#5610958a0b4b34f2eafffba0fac8f960" title="host_determine_pipe_size.">host_determine_pipe_size</a>((<a class="code" href="a00021.html#df928e51a60dba0df29d615401cc55a8">U16</a>)<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g6f301b2189b3f8221d09b3804b83dd17">OFFSET_FIELD_EP_SIZE</a>]),\
<a name="l00371"></a>00371                   <a class="code" href="a00087.html#gb8fdf29cd733b5873fcb8e68b7795913">TWO_BANKS</a>,                                                                  \
<a name="l00372"></a>00372                   <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g3ef3b57aba9185690d2256bf915a29b4">OFFSET_FIELD_EP_INTERVAL</a>]                     \
<a name="l00373"></a>00373                );
<a name="l00374"></a>00374             }
<a name="l00375"></a>00375             <span class="keywordflow">else</span> <span class="comment">// At least one hub is present in the usb tree</span>
<a name="l00376"></a>00376             {
<a name="l00377"></a>00377                <span class="keywordflow">if</span>(<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g12a92c851693a9a37b68133d4b3ddbdc">OFFSET_FIELD_EP_TYPE</a>]==<a class="code" href="a00087.html#gecf9984e4a03af2ce8b0a2367641cdb7">TYPE_BULK</a> ) <span class="comment">// If BULK type : OK</span>
<a name="l00378"></a>00378                {
<a name="l00379"></a>00379                      <a class="code" href="a00088.html#g69b1035875dea2558c650b221a6dbba7">host_configure_pipe</a>(                                                          \
<a name="l00380"></a>00380                      physical_pipe,                                                             \
<a name="l00381"></a>00381                      <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g12a92c851693a9a37b68133d4b3ddbdc">OFFSET_FIELD_EP_TYPE</a>],                        \
<a name="l00382"></a>00382                      <a class="code" href="a00094.html#g91d8e39915c6983deaa976ff6b87d3c0">Get_pipe_token</a>(<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#gb9aa68e98df84c1fd246179e6dc406fe">OFFSET_FIELD_EP_ADDR</a>]),        \
<a name="l00383"></a>00383                      (<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#gb9aa68e98df84c1fd246179e6dc406fe">OFFSET_FIELD_EP_ADDR</a>] &amp; MSK_EP_DIR),                            \
<a name="l00384"></a>00384                      <a class="code" href="a00050.html#5610958a0b4b34f2eafffba0fac8f960" title="host_determine_pipe_size.">host_determine_pipe_size</a>((<a class="code" href="a00021.html#df928e51a60dba0df29d615401cc55a8">U16</a>)<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g6f301b2189b3f8221d09b3804b83dd17">OFFSET_FIELD_EP_SIZE</a>]),\
<a name="l00385"></a>00385                      <a class="code" href="a00087.html#gb8fdf29cd733b5873fcb8e68b7795913">TWO_BANKS</a>,                                                                  \
<a name="l00386"></a>00386                      <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g3ef3b57aba9185690d2256bf915a29b4">OFFSET_FIELD_EP_INTERVAL</a>]                     \
<a name="l00387"></a>00387                   ); 
<a name="l00388"></a>00388                }
<a name="l00389"></a>00389 <span class="preprocessor">               #if (USER_PERIODIC_PIPE==ENABLE)</span>
<a name="l00390"></a>00390 <span class="preprocessor"></span>               <span class="keywordflow">else</span>
<a name="l00391"></a>00391                <span class="keywordflow">if</span>(<a class="code" href="a00097.html#gbebbb2ddeee8a9c633755dd528406c61">user_periodic_pipe</a>==0 )                  
<a name="l00392"></a>00392                {
<a name="l00393"></a>00393                   <a class="code" href="a00097.html#gbebbb2ddeee8a9c633755dd528406c61">user_periodic_pipe</a>=physical_pipe;
<a name="l00394"></a>00394                   <a class="code" href="a00052.html#6054ba31109a97df97ad4d645d9911d9">user_periodic_pipe_device_index</a>=device;
<a name="l00395"></a>00395                   <a class="code" href="a00088.html#g69b1035875dea2558c650b221a6dbba7">host_configure_pipe</a>(                                                          \
<a name="l00396"></a>00396                      physical_pipe,                                                             \
<a name="l00397"></a>00397                      <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g12a92c851693a9a37b68133d4b3ddbdc">OFFSET_FIELD_EP_TYPE</a>],                        \
<a name="l00398"></a>00398                      <a class="code" href="a00094.html#g91d8e39915c6983deaa976ff6b87d3c0">Get_pipe_token</a>(<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#gb9aa68e98df84c1fd246179e6dc406fe">OFFSET_FIELD_EP_ADDR</a>]),        \
<a name="l00399"></a>00399                      (<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#gb9aa68e98df84c1fd246179e6dc406fe">OFFSET_FIELD_EP_ADDR</a>] &amp; MSK_EP_DIR),                            \
<a name="l00400"></a>00400                      <a class="code" href="a00050.html#5610958a0b4b34f2eafffba0fac8f960" title="host_determine_pipe_size.">host_determine_pipe_size</a>((<a class="code" href="a00021.html#df928e51a60dba0df29d615401cc55a8">U16</a>)<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g6f301b2189b3f8221d09b3804b83dd17">OFFSET_FIELD_EP_SIZE</a>]),\
<a name="l00401"></a>00401                      <a class="code" href="a00087.html#gdec7a5c1b9ed61af0268113a110bbf1f">ONE_BANK</a>,                                                                  \
<a name="l00402"></a>00402                      <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g3ef3b57aba9185690d2256bf915a29b4">OFFSET_FIELD_EP_INTERVAL</a>]                     \
<a name="l00403"></a>00403                   );                  
<a name="l00404"></a>00404                }
<a name="l00405"></a>00405                <span class="keywordflow">else</span>
<a name="l00406"></a>00406                {
<a name="l00407"></a>00407                   nb_endpoint_to_configure--;
<a name="l00408"></a>00408                   <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[i].<a class="code" href="a00007.html#4a3033c978c5cc847b209d05e71d94d7">nb_ep</a>--;
<a name="l00409"></a>00409                   <span class="keywordflow">continue</span>;                  
<a name="l00410"></a>00410                }
<a name="l00411"></a>00411 <span class="preprocessor">               #endif</span>
<a name="l00412"></a>00412 <span class="preprocessor"></span>            }
<a name="l00413"></a>00413          }
<a name="l00414"></a>00414 <span class="preprocessor">#else // NO HUB SUPPORT</span>
<a name="l00415"></a>00415 <span class="preprocessor"></span>         <a class="code" href="a00088.html#g69b1035875dea2558c650b221a6dbba7">host_configure_pipe</a>(                                                          \
<a name="l00416"></a>00416             physical_pipe,                                                             \
<a name="l00417"></a>00417             <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g12a92c851693a9a37b68133d4b3ddbdc">OFFSET_FIELD_EP_TYPE</a>],                        \
<a name="l00418"></a>00418             <a class="code" href="a00094.html#g91d8e39915c6983deaa976ff6b87d3c0">Get_pipe_token</a>(<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#gb9aa68e98df84c1fd246179e6dc406fe">OFFSET_FIELD_EP_ADDR</a>]),        \
<a name="l00419"></a>00419             (<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#gb9aa68e98df84c1fd246179e6dc406fe">OFFSET_FIELD_EP_ADDR</a>] &amp; MSK_EP_DIR),                            \
<a name="l00420"></a>00420             <a class="code" href="a00050.html#5610958a0b4b34f2eafffba0fac8f960" title="host_determine_pipe_size.">host_determine_pipe_size</a>((<a class="code" href="a00021.html#df928e51a60dba0df29d615401cc55a8">U16</a>)<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g6f301b2189b3f8221d09b3804b83dd17">OFFSET_FIELD_EP_SIZE</a>]),\
<a name="l00421"></a>00421             <a class="code" href="a00087.html#gb8fdf29cd733b5873fcb8e68b7795913">TWO_BANKS</a>,                                                                 \
<a name="l00422"></a>00422             <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g3ef3b57aba9185690d2256bf915a29b4">OFFSET_FIELD_EP_INTERVAL</a>]                     \
<a name="l00423"></a>00423          );
<a name="l00424"></a>00424 <span class="preprocessor">#endif          </span>
<a name="l00425"></a>00425 <span class="preprocessor"></span>         
<a name="l00426"></a>00426          <span class="comment">// Update endpoint addr table in supported interface structure</span>
<a name="l00427"></a>00427          <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[i].<a class="code" href="a00007.html#cd4434bd7064c054b4945b869678bfce">ep</a>[ep_index].<a class="code" href="a00005.html#a5cec91959f52766f2320388b71943c7">ep_addr</a> = <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#gb9aa68e98df84c1fd246179e6dc406fe">OFFSET_FIELD_EP_ADDR</a>];
<a name="l00428"></a>00428          <span class="comment">// Update physical pipe number used for this endpoint</span>
<a name="l00429"></a>00429          <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[i].<a class="code" href="a00007.html#cd4434bd7064c054b4945b869678bfce">ep</a>[ep_index].<a class="code" href="a00005.html#f0cf12c2414a047379504283412d4889">pipe_number</a> = physical_pipe;
<a name="l00430"></a>00430          <span class="comment">// Update endpoint size in supported interface structure</span>
<a name="l00431"></a>00431          <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[i].<a class="code" href="a00007.html#cd4434bd7064c054b4945b869678bfce">ep</a>[ep_index].<a class="code" href="a00005.html#b0ae7a1e387a68da2e516097d25de814">ep_size</a> = <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g6f301b2189b3f8221d09b3804b83dd17">OFFSET_FIELD_EP_SIZE</a>];
<a name="l00432"></a>00432          <span class="comment">// Update endpoint type in supported interface structure</span>
<a name="l00433"></a>00433          <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[i].<a class="code" href="a00007.html#cd4434bd7064c054b4945b869678bfce">ep</a>[ep_index].<a class="code" href="a00005.html#185452761f4aad66f709f6e7b51a1d24">ep_type</a> = <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g12a92c851693a9a37b68133d4b3ddbdc">OFFSET_FIELD_EP_TYPE</a>];
<a name="l00434"></a>00434          <span class="comment">// point on next descriptor</span>
<a name="l00435"></a>00435          descriptor_offset += <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset];        
<a name="l00436"></a>00436          <span class="comment">// Use next physical pipe</span>
<a name="l00437"></a>00437          <span class="keywordflow">if</span> (physical_pipe++&gt;=MAX_EP_NB)
<a name="l00438"></a>00438          {
<a name="l00439"></a>00439              <span class="keywordflow">return</span> <a class="code" href="a00097.html#g2fef2e8ffbca0a854266e52acc014123">HOST_FALSE</a>;
<a name="l00440"></a>00440          }
<a name="l00441"></a>00441          <span class="comment">// To configure next endpoint </span>
<a name="l00442"></a>00442          ep_index++;
<a name="l00443"></a>00443          <span class="comment">// All target endpoints configured ?</span>
<a name="l00444"></a>00444          nb_endpoint_to_configure--;
<a name="l00445"></a>00445       } <span class="comment">//for(i=0;i&lt;nb_interface;i++)</span>
<a name="l00446"></a>00446    }
<a name="l00447"></a>00447    <a class="code" href="a00099.html#gff66183f6aebf783b0e8a5251419be22">Host_set_configured</a>();
<a name="l00448"></a>00448    <span class="keywordflow">return</span> <a class="code" href="a00097.html#gb554978a75f075e4567322993fbba5b2">HOST_TRUE</a>;
<a name="l00449"></a>00449 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>

</div>
</div><p>
<a class="anchor" name="g0d78118ad09c5d6679553d8b8b1bd84c"></a><!-- doxytag: member="usb_host_enum.h::get_interface_descriptor_offset" ref="g0d78118ad09c5d6679553d8b8b1bd84c" args="(U8 interface, U8 alt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> get_interface_descriptor_offset           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>interface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>alt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
get_interface_descriptor_offset 
<p>
This function returns the offset in data_stage where to find the interface descriptor whose number and alternate setting values are passed as parameters<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>interface</em>&nbsp;</td><td>the interface nb to look for offset descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>alt</em>&nbsp;</td><td>the interface alt setting number</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>T_DESC_OFFSET offset in data_stage[] </dd></dl>

<p>Definition at line <a class="el" href="a00137.html#l00462">462</a> of file <a class="el" href="a00137.html">usb_host_enum.c</a>.</p>

<p>References <a class="el" href="a00139.html#l00166">data_stage</a>, <a class="el" href="a00126.html#l00216">DESCRIPTOR_INTERFACE</a>, <a class="el" href="a00138.html#l00186">HOST_FALSE</a>, <a class="el" href="a00138.html#l00163">OFFSET_DESCRIPTOR_LENGHT</a>, <a class="el" href="a00138.html#l00178">OFFSET_FIELD_ALT</a>, <a class="el" href="a00138.html#l00164">OFFSET_FIELD_DESCRIPTOR_TYPE</a>, <a class="el" href="a00138.html#l00177">OFFSET_FIELD_INTERFACE_NB</a>, <a class="el" href="a00138.html#l00172">OFFSET_FIELD_NB_INTERFACE</a>, <a class="el" href="a00108.html#l00119">SIZEOF_DATA_STAGE</a>, and <a class="el" href="a00138.html#l00060">T_DESC_OFFSET</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00463"></a>00463 {
<a name="l00464"></a>00464    <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> nb_interface;
<a name="l00465"></a>00465    <a class="code" href="a00053.html#15f43a7a42588cf4d8e0155fd195e4b7" title="Optimize descriptor offset index according to data_stage[] size.">T_DESC_OFFSET</a> descriptor_offset;
<a name="l00466"></a>00466 
<a name="l00467"></a>00467    nb_interface = <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[<a class="code" href="a00097.html#gdabc897d74efeed7b91bfeb339e3d860" title="OFFSET for INTERFACE DESCRIPTORS.">OFFSET_FIELD_NB_INTERFACE</a>];      <span class="comment">// Detects the number of interfaces in this configuration</span>
<a name="l00468"></a>00468    descriptor_offset = <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[<a class="code" href="a00097.html#g621c329f5149447fbdb3b0680c6ccd10">OFFSET_DESCRIPTOR_LENGHT</a>];  <span class="comment">// now pointing on next descriptor</span>
<a name="l00469"></a>00469 
<a name="l00470"></a>00470    <span class="keywordflow">while</span>(descriptor_offset &lt; <a class="code" href="a00070.html#g5b9eae1b7be09014673af472171c17d4" title="The size of RAM buffer reserved of descriptors manipulation.">SIZEOF_DATA_STAGE</a>)            <span class="comment">// Look in all interfaces declared in the configuration</span>
<a name="l00471"></a>00471    {
<a name="l00472"></a>00472       <span class="keywordflow">while</span> (<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#ge7f27d63cec79b20a67a17d587656790">OFFSET_FIELD_DESCRIPTOR_TYPE</a>] != <a class="code" href="a00041.html#9861aff4822127c97440bcd226b94477">DESCRIPTOR_INTERFACE</a>)
<a name="l00473"></a>00473       {
<a name="l00474"></a>00474          descriptor_offset += <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset];
<a name="l00475"></a>00475          <span class="keywordflow">if</span>(descriptor_offset &gt; <a class="code" href="a00070.html#g5b9eae1b7be09014673af472171c17d4" title="The size of RAM buffer reserved of descriptors manipulation.">SIZEOF_DATA_STAGE</a>)
<a name="l00476"></a>00476          {  <span class="keywordflow">return</span> <a class="code" href="a00097.html#g2fef2e8ffbca0a854266e52acc014123">HOST_FALSE</a>;  }
<a name="l00477"></a>00477       }
<a name="l00478"></a>00478       <span class="keywordflow">if</span> (<a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#gad194a2c122879dc9ad70f30d3ccae75">OFFSET_FIELD_INTERFACE_NB</a>]==interface
<a name="l00479"></a>00479           &amp;&amp; <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset+<a class="code" href="a00097.html#g2240a2b7dde3ef59dcd963675adb55c3">OFFSET_FIELD_ALT</a>]==alt)
<a name="l00480"></a>00480       {
<a name="l00481"></a>00481         <span class="keywordflow">return</span>  descriptor_offset;
<a name="l00482"></a>00482       }
<a name="l00483"></a>00483       descriptor_offset += <a class="code" href="a00097.html#g5054e33a7748126ca115825ed53064f7" title="Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage...">data_stage</a>[descriptor_offset];
<a name="l00484"></a>00484    }
<a name="l00485"></a>00485    <span class="keywordflow">return</span> descriptor_offset;
<a name="l00486"></a>00486 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="gd6950048d37767ee5e63c8c13875a1a5"></a><!-- doxytag: member="usb_host_enum.h::host_get_hwd_pipe_nb" ref="gd6950048d37767ee5e63c8c13875a1a5" args="(U8 ep_addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> host_get_hwd_pipe_nb           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>ep_addr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function returns the physical pipe number linked to a logical endpoint address.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ep_addr</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>physical_pipe_number</dd></dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd>the function returns 0 if no ep_addr is found in the look up table. </dd></dl>

<p>Definition at line <a class="el" href="a00137.html#l00498">498</a> of file <a class="el" href="a00137.html">usb_host_enum.c</a>.</p>

<p>References <a class="el" href="a00138.html#l00122">S_usb_tree::device</a>, <a class="el" href="a00138.html#l00102">S_usb_interface::ep</a>, <a class="el" href="a00138.html#l00088">S_usb_endpoint::ep_addr</a>, <a class="el" href="a00139.html#l00178">i</a>, <a class="el" href="a00138.html#l00116">S_usb_device::interface</a>, <a class="el" href="a00139.html#l00178">j</a>, <a class="el" href="a00108.html#l00125">MAX_EP_PER_INTERFACE</a>, <a class="el" href="a00108.html#l00128">MAX_INTERFACE_FOR_DEVICE</a>, <a class="el" href="a00138.html#l00089">S_usb_endpoint::pipe_number</a>, and <a class="el" href="a00137.html#l00107">selected_device</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00499"></a>00499 {
<a name="l00500"></a>00500    <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="code" href="a00054.html#a31f47cc4db2a583d432407361bc4bfb">i</a>,<a class="code" href="a00054.html#148c46b3e95d8fd60d712942e2a74888">j</a>;
<a name="l00501"></a>00501    <span class="keywordflow">for</span>(j=0;j&lt;<a class="code" href="a00070.html#gf555ac95cfc24daa44af760d0404518e" title="The maximum number of interface supported per device.">MAX_INTERFACE_FOR_DEVICE</a>;j++)
<a name="l00502"></a>00502    {
<a name="l00503"></a>00503       <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="a00070.html#g13052bbddf65c51d419bac223613ccb9" title="The maximum number of endpoints per interface supported.">MAX_EP_PER_INTERFACE</a>;i++)
<a name="l00504"></a>00504       {
<a name="l00505"></a>00505          <span class="keywordflow">if</span>(<a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[<a class="code" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[j].<a class="code" href="a00007.html#cd4434bd7064c054b4945b869678bfce">ep</a>[i].<a class="code" href="a00005.html#a5cec91959f52766f2320388b71943c7">ep_addr</a>==ep_addr)
<a name="l00506"></a>00506          { <span class="keywordflow">return</span> <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[<a class="code" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[j].<a class="code" href="a00007.html#cd4434bd7064c054b4945b869678bfce">ep</a>[i].<a class="code" href="a00005.html#f0cf12c2414a047379504283412d4889">pipe_number</a>; }
<a name="l00507"></a>00507       }
<a name="l00508"></a>00508    }
<a name="l00509"></a>00509    <span class="keywordflow">return</span> 0;
<a name="l00510"></a>00510 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g261b0b0b4570f744f6607864fb1bc1c9"></a><!-- doxytag: member="usb_host_enum.h::init_usb_tree" ref="g261b0b0b4570f744f6607864fb1bc1c9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_usb_tree           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
init_usb_tree 
<p>
This function initializes the usb_tree structure when no device is connected to the root downstream port<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>none </dd></dl>

<p>Definition at line <a class="el" href="a00137.html#l00790">790</a> of file <a class="el" href="a00137.html">usb_host_enum.c</a>.</p>

<p>References <a class="el" href="a00138.html#l00533">Host_select_device</a>, <a class="el" href="a00139.html#l00178">i</a>, <a class="el" href="a00108.html#l00131">MAX_DEVICE_IN_USB_TREE</a>, <a class="el" href="a00138.html#l00121">S_usb_tree::nb_device</a>, <a class="el" href="a00137.html#l00831">remove_device_entry()</a>, <a class="el" href="a00137.html#l00100">user_periodic_pipe</a>, and <a class="el" href="a00137.html#l00102">user_periodic_pipe_device_index</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00791"></a>00791 {
<a name="l00792"></a>00792    <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="code" href="a00054.html#a31f47cc4db2a583d432407361bc4bfb">i</a>;
<a name="l00793"></a>00793   
<a name="l00794"></a>00794    <span class="comment">// Clear all device entry</span>
<a name="l00795"></a>00795    <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="a00070.html#g2b143cb4cce82167939b22db63471d80" title="The maximum number of devices in the USB tree.">MAX_DEVICE_IN_USB_TREE</a>;i++)
<a name="l00796"></a>00796    {
<a name="l00797"></a>00797       <a class="code" href="a00097.html#g9888d76252d97b57557cbff3fbe68c25" title="remove_device_entry">remove_device_entry</a>(i);
<a name="l00798"></a>00798    }
<a name="l00799"></a>00799    <span class="comment">// By default select device 0 (connected to root port)</span>
<a name="l00800"></a>00800    <a class="code" href="a00097.html#g3c090bb44c15efdc1c0416f9e5d66483">Host_select_device</a>(0);
<a name="l00801"></a>00801 
<a name="l00802"></a>00802 <span class="preprocessor">#if (USB_HUB_SUPPORT==ENABLE)</span>
<a name="l00803"></a>00803 <span class="preprocessor"></span><span class="preprocessor">   #if (USER_PERIODIC_PIPE==ENABLE)</span>
<a name="l00804"></a>00804 <span class="preprocessor"></span>   <a class="code" href="a00097.html#gbebbb2ddeee8a9c633755dd528406c61">user_periodic_pipe</a>=0;
<a name="l00805"></a>00805    <a class="code" href="a00052.html#6054ba31109a97df97ad4d645d9911d9">user_periodic_pipe_device_index</a>=0;
<a name="l00806"></a>00806 <span class="preprocessor">   #endif</span>
<a name="l00807"></a>00807 <span class="preprocessor"></span>   <span class="keywordflow">for</span>(i=0;i&lt;HUB_MAX_NB_PORT;i++)
<a name="l00808"></a>00808    hub_init(i);
<a name="l00809"></a>00809    <span class="keywordflow">for</span>(i=0;i&lt;USB_MAX_HUB_NUMBER;i++)   
<a name="l00810"></a>00810    hub_device_address[i]=0;
<a name="l00811"></a>00811 <span class="preprocessor">#endif</span>
<a name="l00812"></a>00812 <span class="preprocessor"></span>
<a name="l00813"></a>00813    <span class="comment">// Clear the number of device in the tree</span>
<a name="l00814"></a>00814    <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#56188ed5b1d93dd3744d3302d803d82b">nb_device</a>=0;
<a name="l00815"></a>00815 
<a name="l00816"></a>00816 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>

</div>
</div><p>
<a class="anchor" name="g9888d76252d97b57557cbff3fbe68c25"></a><!-- doxytag: member="usb_host_enum.h::remove_device_entry" ref="g9888d76252d97b57557cbff3fbe68c25" args="(U8 device_index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void remove_device_entry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>device_index</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
remove_device_entry 
<p>
This function reset the device entry required when a device disconnect from the usb tree<p>
If the removed device is a hub, the function also removes the devices connected to this hub. The function is also in charge of the USB DPRAM desallocation mechanism. DPRAM is deallocated only if the removed device is the last device that allocate pipes.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>device_index</em>&nbsp;</td><td>the device numer index in the usb_tree that disconnects</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>none </dd></dl>

<p>Definition at line <a class="el" href="a00137.html#l00831">831</a> of file <a class="el" href="a00137.html">usb_host_enum.c</a>.</p>

<p>References <a class="el" href="a00138.html#l00097">S_usb_interface::altset_nb</a>, <a class="el" href="a00138.html#l00114">S_usb_device::bmattributes</a>, <a class="el" href="a00138.html#l00098">S_usb_interface::class</a>, <a class="el" href="a00138.html#l00122">S_usb_tree::device</a>, <a class="el" href="a00138.html#l00107">S_usb_device::device_address</a>, <a class="el" href="a00138.html#l00102">S_usb_interface::ep</a>, <a class="el" href="a00138.html#l00088">S_usb_endpoint::ep_addr</a>, <a class="el" href="a00138.html#l00108">S_usb_device::ep_ctrl_size</a>, <a class="el" href="a00138.html#l00090">S_usb_endpoint::ep_size</a>, <a class="el" href="a00138.html#l00091">S_usb_endpoint::ep_type</a>, <a class="el" href="a00136.html#l00772">Host_get_selected_pipe</a>, <a class="el" href="a00136.html#l00769">Host_select_pipe</a>, <a class="el" href="a00136.html#l00657">Host_unallocate_memory</a>, <a class="el" href="a00129.html#l00046">HUB_CLASS</a>, <a class="el" href="a00138.html#l00109">S_usb_device::hub_port_nb</a>, <a class="el" href="a00139.html#l00178">i</a>, <a class="el" href="a00138.html#l00116">S_usb_device::interface</a>, <a class="el" href="a00138.html#l00096">S_usb_interface::interface_nb</a>, <a class="el" href="a00139.html#l00178">j</a>, <a class="el" href="a00108.html#l00131">MAX_DEVICE_IN_USB_TREE</a>, <a class="el" href="a00108.html#l00125">MAX_EP_PER_INTERFACE</a>, <a class="el" href="a00108.html#l00128">MAX_INTERFACE_FOR_DEVICE</a>, <a class="el" href="a00138.html#l00115">S_usb_device::maxpower</a>, <a class="el" href="a00138.html#l00121">S_usb_tree::nb_device</a>, <a class="el" href="a00138.html#l00101">S_usb_interface::nb_ep</a>, <a class="el" href="a00138.html#l00111">S_usb_device::nb_interface</a>, <a class="el" href="a00138.html#l00110">S_usb_device::parent_hub_number</a>, <a class="el" href="a00138.html#l00112">S_usb_device::pid</a>, <a class="el" href="a00138.html#l00089">S_usb_endpoint::pipe_number</a>, <a class="el" href="a00138.html#l00100">S_usb_interface::protocol</a>, <a class="el" href="a00137.html#l00831">remove_device_entry()</a>, <a class="el" href="a00138.html#l00099">S_usb_interface::subclass</a>, and <a class="el" href="a00138.html#l00113">S_usb_device::vid</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00832"></a>00832 {
<a name="l00833"></a>00833    <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="code" href="a00054.html#a31f47cc4db2a583d432407361bc4bfb">i</a>,<a class="code" href="a00054.html#148c46b3e95d8fd60d712942e2a74888">j</a>,k,m;
<a name="l00834"></a>00834    
<a name="l00835"></a>00835 <span class="preprocessor">#if (USB_HUB_SUPPORT==ENABLE)   </span>
<a name="l00836"></a>00836 <span class="preprocessor"></span>   <span class="comment">// Check if the disconnected device is a hub</span>
<a name="l00837"></a>00837    <span class="keywordflow">if</span>(<a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[0].<a class="code" href="a00007.html#c563065dd6e5c4526111a9a848fd3e2b">class</a>==<a class="code" href="a00044.html#9923dde3f3e49671f435418314e99021">HUB_CLASS</a>)
<a name="l00838"></a>00838    {
<a name="l00839"></a>00839       nb_hub_present--; 
<a name="l00840"></a>00840       <span class="keywordflow">for</span>(i=0;i&lt;USB_MAX_HUB_NUMBER;i++)      <span class="comment">// For entire hub table</span>
<a name="l00841"></a>00841       {  <span class="comment">// Find the hub number that deconnects</span>
<a name="l00842"></a>00842          <span class="keywordflow">if</span>(hub_device_address[i]==<a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#dc8182c6fd5e7935b24f88b7d8a6894c">device_address</a>)
<a name="l00843"></a>00843          {  <span class="comment">// Reset its port state machine</span>
<a name="l00844"></a>00844             <span class="keywordflow">for</span>(j=0;j&lt;HUB_MAX_NB_PORT;j++)  <span class="comment">// For all ports </span>
<a name="l00845"></a>00845             {         
<a name="l00846"></a>00846                hub_port_state[i][j]=HUB_DEVICE_POWERED; 
<a name="l00847"></a>00847             }
<a name="l00848"></a>00848             <span class="comment">// Look devices previously connected to this hub and remove ther entries</span>
<a name="l00849"></a>00849             <span class="keywordflow">for</span>(j=0;j&lt;<a class="code" href="a00070.html#g2b143cb4cce82167939b22db63471d80" title="The maximum number of devices in the USB tree.">MAX_DEVICE_IN_USB_TREE</a>;j++)
<a name="l00850"></a>00850             {
<a name="l00851"></a>00851                <span class="keywordflow">if</span>(<a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[j].<a class="code" href="a00003.html#9c4d4b4c7ec1f55cb6973374a70f0eeb">parent_hub_number</a>==(i+1))
<a name="l00852"></a>00852                {
<a name="l00853"></a>00853                   <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#56188ed5b1d93dd3744d3302d803d82b">nb_device</a>--;
<a name="l00854"></a>00854                   <span class="comment">// Caution recursive function !!!!</span>
<a name="l00855"></a>00855                   <a class="code" href="a00097.html#g9888d76252d97b57557cbff3fbe68c25" title="remove_device_entry">remove_device_entry</a>(j);                  
<a name="l00856"></a>00856                }
<a name="l00857"></a>00857             }
<a name="l00858"></a>00858             hub_device_address[i]=0;
<a name="l00859"></a>00859             <span class="keywordflow">break</span>;
<a name="l00860"></a>00860          }
<a name="l00861"></a>00861       }
<a name="l00862"></a>00862    }
<a name="l00863"></a>00863 <span class="preprocessor">#endif   </span>
<a name="l00864"></a>00864 <span class="preprocessor"></span>
<a name="l00865"></a>00865    <span class="comment">// Unallocate USB pipe memory only if the device disconnection is the last device </span>
<a name="l00866"></a>00866    <span class="comment">// enumerated</span>
<a name="l00867"></a>00867    <span class="comment">// TODO: Improve it for devices removing from hub.</span>
<a name="l00868"></a>00868    <span class="comment">// But cannot unallocate USB DPRAM if there is an active pipe number &gt; current pipe for the removed device....</span>
<a name="l00869"></a>00869    <span class="keywordflow">if</span>(<a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#56188ed5b1d93dd3744d3302d803d82b">nb_device</a>==device_index+1)
<a name="l00870"></a>00870    {
<a name="l00871"></a>00871       <span class="keywordflow">for</span>(j=0;j&lt;<a class="code" href="a00070.html#gf555ac95cfc24daa44af760d0404518e" title="The maximum number of interface supported per device.">MAX_INTERFACE_FOR_DEVICE</a>;j++)
<a name="l00872"></a>00872       {
<a name="l00873"></a>00873          <span class="keywordflow">for</span>(k=0;k&lt;<a class="code" href="a00070.html#g13052bbddf65c51d419bac223613ccb9" title="The maximum number of endpoints per interface supported.">MAX_EP_PER_INTERFACE</a>;k++)
<a name="l00874"></a>00874          {
<a name="l00875"></a>00875             m=<a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[j].<a class="code" href="a00007.html#cd4434bd7064c054b4945b869678bfce">ep</a>[k].<a class="code" href="a00005.html#f0cf12c2414a047379504283412d4889">pipe_number</a>;
<a name="l00876"></a>00876             <span class="keywordflow">if</span>(m!=0)
<a name="l00877"></a>00877             {
<a name="l00878"></a>00878                i = <a class="code" href="a00094.html#ga602f18f3102551a390cab51280ca702" title="get the currently selected pipe number">Host_get_selected_pipe</a>();
<a name="l00879"></a>00879                <a class="code" href="a00094.html#g9cef84edfb59cc5963bebddf55f367f6" title="selects pipe for CPU interface">Host_select_pipe</a>(m);
<a name="l00880"></a>00880                <a class="code" href="a00093.html#g5df72c8139aadcda4d86261bf62696cf" title="un-allocates the current configuration in DPRAM memory">Host_unallocate_memory</a>();
<a name="l00881"></a>00881                <a class="code" href="a00094.html#g9cef84edfb59cc5963bebddf55f367f6" title="selects pipe for CPU interface">Host_select_pipe</a>(i);
<a name="l00882"></a>00882             }
<a name="l00883"></a>00883          }
<a name="l00884"></a>00884       }
<a name="l00885"></a>00885    }
<a name="l00886"></a>00886    <span class="comment">// Reset device entry fields ...</span>
<a name="l00887"></a>00887    <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#dc8182c6fd5e7935b24f88b7d8a6894c">device_address</a> = 0;
<a name="l00888"></a>00888    <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#3a3a0fe5dec6bc56306dd0dc960544de">ep_ctrl_size</a> = 0;
<a name="l00889"></a>00889    <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#b4afa99ac09ee5ca585079c025a68dbc">hub_port_nb</a> = 0;
<a name="l00890"></a>00890    <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#9c4d4b4c7ec1f55cb6973374a70f0eeb">parent_hub_number</a> = 0;
<a name="l00891"></a>00891    <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#d8af5613594354d9bbf1b862527f3194">nb_interface</a> = 0;
<a name="l00892"></a>00892    <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#1f321181eea8be28d7733b16db5b5442">pid</a> = 0;
<a name="l00893"></a>00893    <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#b5f92008ef3c2ae8e0ef7feb2a79156a">vid</a> = 0;
<a name="l00894"></a>00894    <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#6e97322a2e0a51aedcf43c643a7aae7d">bmattributes</a> = 0;   
<a name="l00895"></a>00895    <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#f480af470702f6fb0545a57c84e746ab">maxpower</a> = 0;   
<a name="l00896"></a>00896    
<a name="l00897"></a>00897    <span class="keywordflow">for</span>(j=0;j&lt;MAX_INTERFACE_FOR_DEVICE;j++)
<a name="l00898"></a>00898    {
<a name="l00899"></a>00899       <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[j].<a class="code" href="a00007.html#d560cf0a694d32b46e8c4875f9f8dc5e">interface_nb</a> = 0;
<a name="l00900"></a>00900       <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[j].<a class="code" href="a00007.html#db860225fe053d199780a43d12e692fe">altset_nb</a> = 0;
<a name="l00901"></a>00901       <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[j].<a class="code" href="a00007.html#c563065dd6e5c4526111a9a848fd3e2b">class</a> = 0;
<a name="l00902"></a>00902       <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[j].<a class="code" href="a00007.html#c9edc644859ea2faf9925046182a2921">subclass</a> = 0;
<a name="l00903"></a>00903       <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[j].<a class="code" href="a00007.html#b5475b8d38ee9a10b9283dba5144e6fe">protocol</a> = 0;
<a name="l00904"></a>00904       <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[j].<a class="code" href="a00007.html#4a3033c978c5cc847b209d05e71d94d7">nb_ep</a> = 0;
<a name="l00905"></a>00905       <span class="keywordflow">for</span>(k=0;k&lt;<a class="code" href="a00070.html#g13052bbddf65c51d419bac223613ccb9" title="The maximum number of endpoints per interface supported.">MAX_EP_PER_INTERFACE</a>;k++)
<a name="l00906"></a>00906       {
<a name="l00907"></a>00907          <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[j].<a class="code" href="a00007.html#cd4434bd7064c054b4945b869678bfce">ep</a>[k].<a class="code" href="a00005.html#a5cec91959f52766f2320388b71943c7">ep_addr</a> = 0;
<a name="l00908"></a>00908          <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[j].<a class="code" href="a00007.html#cd4434bd7064c054b4945b869678bfce">ep</a>[k].<a class="code" href="a00005.html#f0cf12c2414a047379504283412d4889">pipe_number</a> = 0;
<a name="l00909"></a>00909          <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[j].<a class="code" href="a00007.html#cd4434bd7064c054b4945b869678bfce">ep</a>[k].<a class="code" href="a00005.html#b0ae7a1e387a68da2e516097d25de814">ep_size</a> = 0;
<a name="l00910"></a>00910          <a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[device_index].<a class="code" href="a00003.html#be716796158b1a5f0d8f4132475d3a66">interface</a>[j].<a class="code" href="a00007.html#cd4434bd7064c054b4945b869678bfce">ep</a>[k].<a class="code" href="a00005.html#185452761f4aad66f709f6e7b51a1d24">ep_type</a> = 0;
<a name="l00911"></a>00911       }
<a name="l00912"></a>00912    }   
<a name="l00913"></a>00913 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>

</div>
</div><p>
<a class="anchor" name="g007939859d5a601e5edc389d47276a73"></a><!-- doxytag: member="usb_host_enum.h::host_select_device" ref="g007939859d5a601e5edc389d47276a73" args="(U8 i)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void host_select_device           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>i</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00137.html#l00952">952</a> of file <a class="el" href="a00137.html">usb_host_enum.c</a>.</p>

<p>References <a class="el" href="a00138.html#l00122">S_usb_tree::device</a>, <a class="el" href="a00138.html#l00107">S_usb_device::device_address</a>, <a class="el" href="a00137.html#l00918">freeze_user_periodic_pipe()</a>, <a class="el" href="a00136.html#l00757">Host_configure_address</a>, and <a class="el" href="a00137.html#l00107">selected_device</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00953"></a>00953 {
<a name="l00954"></a>00954    <a class="code" href="a00097.html#gc49b53eb6d4c6229a1c997c976507d6b">freeze_user_periodic_pipe</a>();
<a name="l00955"></a>00955    <a class="code" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>=<a class="code" href="a00054.html#a31f47cc4db2a583d432407361bc4bfb">i</a>;
<a name="l00956"></a>00956    <a class="code" href="a00093.html#ge8c9ae465df355c21bd114a7ef8805d9" title="configures the address to use for the device">Host_configure_address</a>(<a class="code" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591" title="The main structure that represents the usb tree connected to the host controller...">usb_tree</a>.<a class="code" href="a00014.html#07d8fcf7d396c9da92c282e6fb5a8a5c">device</a>[<a class="code" href="a00054.html#a31f47cc4db2a583d432407361bc4bfb">i</a>].<a class="code" href="a00003.html#dc8182c6fd5e7935b24f88b7d8a6894c">device_address</a>);
<a name="l00957"></a>00957 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>

</div>
</div><p>
<a class="anchor" name="gc49b53eb6d4c6229a1c997c976507d6b"></a><!-- doxytag: member="usb_host_enum.h::freeze_user_periodic_pipe" ref="gc49b53eb6d4c6229a1c997c976507d6b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void freeze_user_periodic_pipe           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00137.html#l00918">918</a> of file <a class="el" href="a00137.html">usb_host_enum.c</a>.</p>

<p>References <a class="el" href="a00136.html#l00811">Host_freeze_pipe</a>, <a class="el" href="a00136.html#l00769">Host_select_pipe</a>, <a class="el" href="a00136.html#l00815">Is_host_pipe_freeze</a>, <a class="el" href="a00137.html#l00100">user_periodic_pipe</a>, and <a class="el" href="a00137.html#l00101">user_periodic_pipe_freeze_state</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00919"></a>00919 {
<a name="l00920"></a>00920    <span class="keywordflow">if</span>(<a class="code" href="a00097.html#gbebbb2ddeee8a9c633755dd528406c61">user_periodic_pipe</a>)
<a name="l00921"></a>00921    {
<a name="l00922"></a>00922       <a class="code" href="a00094.html#g9cef84edfb59cc5963bebddf55f367f6" title="selects pipe for CPU interface">Host_select_pipe</a>(<a class="code" href="a00097.html#gbebbb2ddeee8a9c633755dd528406c61">user_periodic_pipe</a>);
<a name="l00923"></a>00923       <span class="keywordflow">if</span>(<a class="code" href="a00094.html#g28a96e67e4d87412b575401b0d286ab9" title="tests if the current pipe is frozen">Is_host_pipe_freeze</a>()) 
<a name="l00924"></a>00924       {
<a name="l00925"></a>00925          <a class="code" href="a00052.html#9ca222b60d617f668361279b1f8b6582">user_periodic_pipe_freeze_state</a>=0;
<a name="l00926"></a>00926       }
<a name="l00927"></a>00927       <span class="keywordflow">else</span>
<a name="l00928"></a>00928       {
<a name="l00929"></a>00929          <a class="code" href="a00052.html#9ca222b60d617f668361279b1f8b6582">user_periodic_pipe_freeze_state</a>=1;
<a name="l00930"></a>00930          <a class="code" href="a00094.html#g439e70e693f67491a1385aa6fe71b5f8" title="freezes the pipe">Host_freeze_pipe</a>();
<a name="l00931"></a>00931       }
<a name="l00932"></a>00932    } 
<a name="l00933"></a>00933 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="g7ec93e06da874bd5a114a1cd779a7b7b"></a><!-- doxytag: member="usb_host_enum.h::unfreeze_user_periodic_pipe" ref="g7ec93e06da874bd5a114a1cd779a7b7b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void unfreeze_user_periodic_pipe           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00137.html#l00937">937</a> of file <a class="el" href="a00137.html">usb_host_enum.c</a>.</p>

<p>References <a class="el" href="a00138.html#l00533">Host_select_device</a>, <a class="el" href="a00136.html#l00769">Host_select_pipe</a>, <a class="el" href="a00136.html#l00813">Host_unfreeze_pipe</a>, <a class="el" href="a00137.html#l00100">user_periodic_pipe</a>, <a class="el" href="a00137.html#l00102">user_periodic_pipe_device_index</a>, and <a class="el" href="a00137.html#l00101">user_periodic_pipe_freeze_state</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00938"></a>00938 {
<a name="l00939"></a>00939    <span class="keywordflow">if</span>(<a class="code" href="a00097.html#gbebbb2ddeee8a9c633755dd528406c61">user_periodic_pipe</a>)
<a name="l00940"></a>00940    {
<a name="l00941"></a>00941       <span class="keywordflow">if</span>(<a class="code" href="a00052.html#9ca222b60d617f668361279b1f8b6582">user_periodic_pipe_freeze_state</a>)
<a name="l00942"></a>00942       {   
<a name="l00943"></a>00943          <a class="code" href="a00094.html#g9cef84edfb59cc5963bebddf55f367f6" title="selects pipe for CPU interface">Host_select_pipe</a>(<a class="code" href="a00097.html#gbebbb2ddeee8a9c633755dd528406c61">user_periodic_pipe</a>);
<a name="l00944"></a>00944          <a class="code" href="a00094.html#gd8a6bcf6161fa98b5f79a933cbe03094" title="un-freezees the pipe">Host_unfreeze_pipe</a>();
<a name="l00945"></a>00945       }
<a name="l00946"></a>00946       <a class="code" href="a00097.html#g3c090bb44c15efdc1c0416f9e5d66483">Host_select_device</a>(<a class="code" href="a00052.html#6054ba31109a97df97ad4d645d9911d9">user_periodic_pipe_device_index</a>);
<a name="l00947"></a>00947    }   
<a name="l00948"></a>00948 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="gbebbb2ddeee8a9c633755dd528406c61"></a><!-- doxytag: member="usb_host_enum.h::user_periodic_pipe" ref="gbebbb2ddeee8a9c633755dd528406c61" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00097.html#gbebbb2ddeee8a9c633755dd528406c61">user_periodic_pipe</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00137.html#l00100">100</a> of file <a class="el" href="a00137.html">usb_host_enum.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g376b533ecdeb345533c7ce71a4e61591"></a><!-- doxytag: member="usb_host_enum.h::usb_tree" ref="g376b533ecdeb345533c7ce71a4e61591" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00014.html">S_usb_tree</a> <a class="el" href="a00097.html#g376b533ecdeb345533c7ce71a4e61591">usb_tree</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The main structure that represents the usb tree connected to the host controller. 
<p>

<p>Definition at line <a class="el" href="a00137.html#l00097">97</a> of file <a class="el" href="a00137.html">usb_host_enum.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g631e46fdd6514f9d83c7344a7e409744"></a><!-- doxytag: member="usb_host_enum.h::usb_request" ref="g631e46fdd6514f9d83c7344a7e409744" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00013.html">S_usb_setup_data</a> <a class="el" href="a00097.html#g631e46fdd6514f9d83c7344a7e409744">usb_request</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
For control requests management over pipe 0. 
<p>

<p>Definition at line <a class="el" href="a00139.html#l00155">155</a> of file <a class="el" href="a00139.html">usb_host_task.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g5054e33a7748126ca115825ed53064f7"></a><!-- doxytag: member="usb_host_enum.h::data_stage" ref="g5054e33a7748126ca115825ed53064f7" args="[SIZEOF_DATA_STAGE]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00097.html#g5054e33a7748126ca115825ed53064f7">data_stage</a>[SIZEOF_DATA_STAGE]          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Public : U8 data_stage[SIZEOF_DATA_STAGE]; Internal RAM buffer for USB data stage content This buffer is required to setup host enumeration process Its contains the device descriptors received. 
<p>
Depending on the device descriptors lenght, its size can be optimized with the SIZEOF_DATA_STAGE define of <a class="el" href="a00023.html">conf_usb.h</a> file<p>
/ 
<p>Definition at line <a class="el" href="a00139.html#l00166">166</a> of file <a class="el" href="a00139.html">usb_host_task.c</a>.</p>

<p>Referenced by <a class="el" href="a00137.html#l00462">get_interface_descriptor_offset()</a>, <a class="el" href="a00137.html#l00272">host_auto_configure_endpoint()</a>, <a class="el" href="a00137.html#l00165">host_check_class()</a>, <a class="el" href="a00137.html#l00123">host_check_VID_PID()</a>, and <a class="el" href="a00139.html#l00226">usb_host_task()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g8e06577b1995d6df11636db39d953f52"></a><!-- doxytag: member="usb_host_enum.h::device_status" ref="g8e06577b1995d6df11636db39d953f52" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00097.html#g8e06577b1995d6df11636db39d953f52">device_status</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00139.html#l00168">168</a> of file <a class="el" href="a00139.html">usb_host_task.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g44e5b0bdff899bc3dbc396cea8863a5a"></a><!-- doxytag: member="usb_host_enum.h::selected_device" ref="g44e5b0bdff899bc3dbc396cea8863a5a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00097.html#g44e5b0bdff899bc3dbc396cea8863a5a">selected_device</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00137.html#l00107">107</a> of file <a class="el" href="a00137.html">usb_host_enum.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="ge1e7a81e1811ede6ef97866cbb966f1d"></a><!-- doxytag: member="usb_host_enum.h::ctrl_pipe_size" ref="ge1e7a81e1811ede6ef97866cbb966f1d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00097.html#ge1e7a81e1811ede6ef97866cbb966f1d">ctrl_pipe_size</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Nov 3 10:08:27 2008 for ATMEL by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.3 </small></address>
</body>
</html>
